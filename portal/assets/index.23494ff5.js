import{w as _e,d as x,a as Me,b as ye,c as Te,g as me,F as at,S as te,i as le,s as ne,e as d,f as g,h as m,t as U,j as b,k as r,l as J,n as Y,m as $,o as Ce,p as h,q as de,r as ue,u as Z,v as I,x as ke,y as Xe,z as se,A as ae,B as P,C as F,D as oe,E as Je,G as Qe}from"./vendor.5e678f43.js";const ot=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const o of l)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&t(a)}).observe(document,{childList:!0,subtree:!0});function n(l){const o={};return l.integrity&&(o.integrity=l.integrity),l.referrerpolicy&&(o.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?o.credentials="include":l.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function t(l){if(l.ep)return;l.ep=!0;const o=n(l);fetch(l.href,o)}};ot();const xe="1201",rt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",it="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ne=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),ve=_e(),be=_e(!1),et=_e();let we=_e(!1);const tt=_e();x.extend(Me);x.extend(ye);x.extend(Te);async function he(s,e,n,t=!0,l){if(me(re)||l){const o={headers:{Authorization:`Bearer ${s}`},method:"GET"},a=await await fetch(`https://${e}.zportal.nl/api/v3/${n}`,l?{}:o);return t?a.json():a.text()}return t?{}:"{}"}async function ct(s,e){const n={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${s}`,n)).json()}let re=_e(!1),fe,ie;async function lt(s,e){if(localStorage.getItem("accessToken")){fe=localStorage.getItem("accessToken"),ie=localStorage.getItem("school");const n=await(await fetch(`https://${ie}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${fe}`}})).json();return re.set(n.response.status==200),re?(console.log("Zermelo login succeeded from stored access token"),ve.set(n.response.data)):console.log("Zermelo login failed from stored access token: server returned "+n.response.status),me(re)}if(!s||!e)return console.log("Zermelo login failed!"),!1;try{const n=await ct(e,s);n.access_token&&(localStorage.setItem("accessToken",n.access_token),localStorage.setItem("school",s),re.set(!0)),me(re)&&console.log("Zermelo login succeeded from provided data")}catch{re.set(!1)}return re}function ut(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),re.set(!1)}async function nt(){return await he(fe,ie,`${rt}${xe}`)}async function st(){return await he(fe,ie,`${it}${xe}`)}async function ft(s){const e=new Date(pe(ce.prev)).getTime(),n=new Date(pe(ce.next)).getTime();return await he(fe,ie,`appointments?start=${e}&end=${n}&teachers=${s}&fields=${Ne.get("teacherSchedule")}`,!0)}async function pt(s,e=0){const n=new Date(pe(ce.prev)).getTime()+601200*e,t=new Date(pe(ce.next)).getTime()+601200*e;return await he(fe,ie,`appointments?user=${s}&start=${n}&end=${t}&fields=${Ne.get("studentSchedule")}`,!0)}async function dt(s){const e=new Date(pe(ce.prev)).getTime(),n=new Date(pe(ce.next)).getTime(),t=await he(fe,ie,`appointments?valid=true&start=${e}&end=${n}&fields=${Ne.get("getStudentClassAppointments")}&possibleStudents=${s}`,!0);let l;const o=t.response.data;for(let a=0;a<o.length;a++)if(o[a].groupsInDepartments.length>0&&o[a].subjects.length>0){if(o[a].subjects[0]=="mtr"){l=o[a].groupsInDepartments[0];break}continue}return(await he(fe,ie,`groupindepartments?id=${l}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function pe(s){let e;return s==ce.prev?e=x().weekday(-7).unix():e=x().weekday(0).unix(),e}async function mt(s){const e=Array.prototype.concat((await st()).response.data,(await nt()).response.data),n={includeScore:!0,keys:["firstName","lastName","code"]};return new at(e,n).search(s)}function Se(s,e){return s.sort(function(n,t){var l=n[e],o=t[e];return l<o?-1:l>o?1:0})}var ce=(s=>(s[s.prev=0]="prev",s[s.next=1]="next",s))(ce||{});function ht(s){let e,n,t,l,o,a,c,i,u,f,v,_,N;return{c(){e=d("div"),n=d("div"),t=d("h1"),t.textContent="Login",l=g(),o=d("p"),o.textContent="Provide the requested information to continue to Zermelo.",a=g(),c=d("input"),i=g(),u=d("input"),f=g(),v=d("button"),v.textContent="Login",m(t,"class","svelte-zxbxdw"),m(o,"class","svelte-zxbxdw"),m(c,"placeholder","schoolname"),m(c,"class","svelte-zxbxdw"),U(c,"error",s[2]),m(u,"placeholder","pairing code"),m(u,"type","number"),m(u,"class","svelte-zxbxdw"),U(u,"error",s[2]),m(v,"class","svelte-zxbxdw"),m(n,"class","centered svelte-zxbxdw"),m(e,"class","svelte-zxbxdw")},m(w,p){b(w,e,p),r(e,n),r(n,t),r(n,l),r(n,o),r(n,a),r(n,c),s[4](c),r(n,i),r(n,u),s[5](u),r(n,f),r(n,v),_||(N=J(v,"click",s[3]),_=!0)},p(w,[p]){p&4&&U(c,"error",w[2]),p&4&&U(u,"error",w[2])},i:Y,o:Y,d(w){w&&$(e),s[4](null),s[5](null),_=!1,N()}}}function _t(s,e,n){let t,l,o;async function a(){if(!t.value||!l.value){c();return}await lt(t.value,l.value),me(re)||c()}function c(){n(2,o=!0),setTimeout(()=>{n(2,o=!1)},3e3)}function i(f){Ce[f?"unshift":"push"](()=>{t=f,n(0,t)})}function u(f){Ce[f?"unshift":"push"](()=>{l=f,n(1,l)})}return[t,l,o,a,i,u]}class gt extends te{constructor(e){super();le(this,e,_t,ht,ne,{})}}function $e(s,e){et.set({type:s,id:e})}function De(s,e,n){const t=s.slice();return t[1]=e[n],t}function je(s){let e,n=s[1].icon+"",t,l,o,a,c;return{c(){e=d("button"),t=h(n),l=g(),m(e,"class","material-icons svelte-1lh10jz"),m(e,"title",o=s[1].caption)},m(i,u){b(i,e,u),r(e,t),r(e,l),a||(c=J(e,"click",s[1].action),a=!0)},p(i,u){s=i},d(i){i&&$(e),a=!1,c()}}}function vt(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=je(De(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,o){for(let a=0;a<t.length;a+=1)t[a].m(l,o);b(l,e,o)},p(l,[o]){if(o&1){n=l[0];let a;for(a=0;a<n.length;a+=1){const c=De(l,n,a);t[a]?t[a].p(c,o):(t[a]=je(c),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:Y,o:Y,d(l){ue(t,l),l&&$(e)}}}function bt(s){return[[{icon:"logout",action:()=>{ut()},caption:"Logout"},{icon:"calendar_today",action:()=>{console.log(me(ve)),$e("student",me(ve)[0].code)},caption:"Show own calendar"}]]}class $t extends te{constructor(e){super();le(this,e,bt,vt,ne,{})}}function Ie(s,e,n){const t=s.slice();return t[9]=e[n],t}function ze(s){let e,n=s[3],t=[];for(let l=0;l<n.length;l+=1)t[l]=Ae(Ie(s,n,l));return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();m(e,"class","searchResults svelte-z915me"),Z(e,"top",s[2]+"px"),Z(e,"left",s[1]+"px")},m(l,o){b(l,e,o);for(let a=0;a<t.length;a+=1)t[a].m(e,null)},p(l,o){if(o&9){n=l[3];let a;for(a=0;a<n.length;a+=1){const c=Ie(l,n,a);t[a]?t[a].p(c,o):(t[a]=Ae(c),t[a].c(),t[a].m(e,null))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}o&4&&Z(e,"top",l[2]+"px"),o&2&&Z(e,"left",l[1]+"px")},d(l){l&&$(e),ue(t,l)}}}function Be(s){let e,n=s[9].item.code.toUpperCase()+"",t,l;return{c(){e=h("("),t=h(n),l=h(")")},m(o,a){b(o,e,a),b(o,t,a),b(o,l,a)},p(o,a){a&8&&n!==(n=o[9].item.code.toUpperCase()+"")&&I(t,n)},d(o){o&&$(e),o&&$(t),o&&$(l)}}}function Ae(s){let e,n=(s[9].item.firstName||"")+"",t,l,o=(s[9].item.prefix||"")+"",a,c,i=(s[9].item.lastName||"")+"",u,f,v,_,N,w=s[9].item.isEmployee&&Be(s);function p(){return s[8](s[9])}return{c(){e=d("button"),t=h(n),l=g(),a=h(o),c=g(),u=h(i),f=g(),w&&w.c(),v=g(),m(e,"class","svelte-z915me")},m(M,j){b(M,e,j),r(e,t),r(e,l),r(e,a),r(e,c),r(e,u),r(e,f),w&&w.m(e,null),r(e,v),_||(N=J(e,"click",p),_=!0)},p(M,j){s=M,j&8&&n!==(n=(s[9].item.firstName||"")+"")&&I(t,n),j&8&&o!==(o=(s[9].item.prefix||"")+"")&&I(a,o),j&8&&i!==(i=(s[9].item.lastName||"")+"")&&I(u,i),s[9].item.isEmployee?w?w.p(s,j):(w=Be(s),w.c(),w.m(e,v)):w&&(w.d(1),w=null)},d(M){M&&$(e),w&&w.d(),_=!1,N()}}}function kt(s){let e,n,t,l,o,a,c,i,u=!s[5]&&s[4]&&ze(s);return{c(){e=d("div"),n=d("input"),t=g(),l=d("button"),l.textContent="search",o=g(),u&&u.c(),a=de(),m(n,"placeholder","Search people..."),m(n,"class","svelte-z915me"),m(l,"class","material-icons svelte-z915me"),m(e,"class","searchOuter svelte-z915me")},m(f,v){b(f,e,v),r(e,n),s[7](n),r(e,t),r(e,l),b(f,o,v),u&&u.m(f,v),b(f,a,v),c||(i=[J(n,"focus",s[6]),J(n,"blur",s[6]),J(n,"input",s[6])],c=!0)},p(f,[v]){!f[5]&&f[4]?u?u.p(f,v):(u=ze(f),u.c(),u.m(a.parentNode,a)):u&&(u.d(1),u=null)},i:Y,o:Y,d(f){f&&$(e),s[7](null),f&&$(o),u&&u.d(f),f&&$(a),c=!1,ke(i)}}}function Ct(s,e,n){let t,l,o,a=[],c="",i=!1;Xe(()=>{n(1,l=t.offsetLeft-5),n(2,o=t.offsetTop+30)});async function u(){n(4,c=t.value),n(3,a=await mt(t.value)),console.log(a),n(5,i=document.activeElement!=t)}function f(_){Ce[_?"unshift":"push"](()=>{t=_,n(0,t)})}return[t,l,o,a,c,i,u,f,_=>{n(0,t.value="",t),$e(_.item.isEmployee?"teacher":"student",_.item.code)}]}class wt extends te{constructor(e){super();le(this,e,Ct,kt,ne,{})}}function qe(s,e,n){const t=s.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function Le(s){let e,n=s[2].icon+"",t,l,o;function a(){return s[1](s[2],s[3],s[4])}return{c(){e=d("button"),t=h(n),m(e,"class","material-icons svelte-1rc72z2"),U(e,"active",s[2].value)},m(c,i){b(c,e,i),r(e,t),l||(o=J(e,"click",a),l=!0)},p(c,i){s=c,i&1&&n!==(n=s[2].icon+"")&&I(t,n),i&1&&U(e,"active",s[2].value)},d(c){c&&$(e),l=!1,o()}}}function St(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=Le(qe(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,o){for(let a=0;a<t.length;a+=1)t[a].m(l,o);b(l,e,o)},p(l,[o]){if(o&1){n=l[0];let a;for(a=0;a<n.length;a+=1){const c=qe(l,n,a);t[a]?t[a].p(c,o):(t[a]=Le(c),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:Y,o:Y,d(l){ue(t,l),l&&$(e)}}}function Mt(s,e,n){const t=[{icon:"people",value:!0,event:o=>{be.set(o)}}];return be.set(!0),[t,(o,a,c)=>{n(0,a[c].value=!o.value,t),o.event(o.value)}]}class yt extends te{constructor(e){super();le(this,e,Mt,St,ne,{})}}function Tt(s){let e,n,t,l,o,a,c,i,u,f,v,_,N,w,p,M,j,A=s[0].firstName+"",L,ee,W=(s[0].prefix||"")+"",H,G,K=s[0].lastName+"",V,q,O,X,E,B;return o=new wt({}),u=new yt({}),N=new $t({}),{c(){e=d("div"),n=d("div"),n.textContent=`Zermelo Hub | ${ie}`,t=g(),l=d("div"),se(o.$$.fragment),a=g(),c=d("div"),i=g(),se(u.$$.fragment),f=g(),v=d("div"),_=g(),se(N.$$.fragment),w=g(),p=d("div"),M=g(),j=d("p"),L=h(A),ee=g(),H=h(W),G=g(),V=h(K),q=g(),O=d("span"),O.textContent="account_circle",X=g(),E=d("div"),m(n,"class","header svelte-ejn9ls"),m(c,"class","sep svelte-ejn9ls"),m(v,"class","sep svelte-ejn9ls"),m(p,"class","sep svelte-ejn9ls"),m(j,"class","svelte-ejn9ls"),m(O,"class","material-icons svelte-ejn9ls"),m(l,"class","right svelte-ejn9ls"),m(e,"class","tb svelte-ejn9ls"),m(E,"class","accent svelte-ejn9ls")},m(T,Q){b(T,e,Q),r(e,n),r(e,t),r(e,l),ae(o,l,null),r(l,a),r(l,c),r(l,i),ae(u,l,null),r(l,f),r(l,v),r(l,_),ae(N,l,null),r(l,w),r(l,p),r(l,M),r(l,j),r(j,L),r(j,ee),r(j,H),r(j,G),r(j,V),r(l,q),r(l,O),b(T,X,Q),b(T,E,Q),B=!0},p(T,[Q]){(!B||Q&1)&&A!==(A=T[0].firstName+"")&&I(L,A),(!B||Q&1)&&W!==(W=(T[0].prefix||"")+"")&&I(H,W),(!B||Q&1)&&K!==(K=T[0].lastName+"")&&I(V,K)},i(T){B||(P(o.$$.fragment,T),P(u.$$.fragment,T),P(N.$$.fragment,T),B=!0)},o(T){F(o.$$.fragment,T),F(u.$$.fragment,T),F(N.$$.fragment,T),B=!1},d(T){T&&$(e),oe(o),oe(u),oe(N),T&&$(X),T&&$(E)}}}function Nt(s,e,n){let t;return ve.subscribe(l=>{n(0,t=l[0])}),[t]}class Dt extends te{constructor(e){super();le(this,e,Nt,Tt,ne,{})}}function Re(s,e,n){const t=s.slice();return t[9]=e[n],t}function Ye(s,e,n){const t=s.slice();return t[12]=e[n],t}function Ue(s){let e,n=(s[12].prefix||"")+"",t,l,o=s[12].lastName+"",a,c,i,u=s[12].code.toUpperCase()+"",f,v,_,N;function w(){return s[7](s[12])}return{c(){e=d("button"),t=h(n),l=g(),a=h(o),c=g(),i=d("span"),f=h(u),v=g(),m(i,"class","right svelte-e4axfn"),m(e,"class","svelte-e4axfn")},m(p,M){b(p,e,M),r(e,t),r(e,l),r(e,a),r(e,c),r(e,i),r(i,f),r(e,v),_||(N=J(e,"click",w),_=!0)},p(p,M){s=p,M&2&&n!==(n=(s[12].prefix||"")+"")&&I(t,n),M&2&&o!==(o=s[12].lastName+"")&&I(a,o),M&2&&u!==(u=s[12].code.toUpperCase()+"")&&I(f,u)},d(p){p&&$(e),_=!1,N()}}}function Ee(s){let e,n=s[9].firstName+"",t,l,o=(s[9].prefix||"")+"",a,c,i=s[9].lastName+"",u,f,v,_=(s[9].class||"...")+"",N,w,p,M;function j(){return s[8](s[9])}return{c(){e=d("button"),t=h(n),l=g(),a=h(o),c=g(),u=h(i),f=g(),v=d("span"),N=h(_),w=g(),m(v,"class","right svelte-e4axfn"),m(e,"class","svelte-e4axfn")},m(A,L){b(A,e,L),r(e,t),r(e,l),r(e,a),r(e,c),r(e,u),r(e,f),r(e,v),r(v,N),r(e,w),p||(M=J(e,"click",j),p=!0)},p(A,L){s=A,L&1&&n!==(n=s[9].firstName+"")&&I(t,n),L&1&&o!==(o=(s[9].prefix||"")+"")&&I(a,o),L&1&&i!==(i=s[9].lastName+"")&&I(u,i),L&1&&_!==(_=(s[9].class||"...")+"")&&I(N,_)},d(A){A&&$(e),p=!1,M()}}}function jt(s){let e,n,t,l,o=s[2]?"less":"more",a,c,i,u,f,v=s[1].length+"",_,N,w,p,M,j,A,L,ee=s[3]?"less":"more",W,H,G,K,V,q=s[0].length+"",O,X,E,B,T,Q,C=s[1],D=[];for(let y=0;y<C.length;y+=1)D[y]=Ue(Ye(s,C,y));let z=s[0],R=[];for(let y=0;y<z.length;y+=1)R[y]=Ee(Re(s,z,y));return{c(){e=d("div"),n=d("h3"),t=d("button"),l=h("expand_"),a=h(o),c=g(),i=d("span"),i.textContent="Teachers",u=g(),f=d("span"),_=h(v),N=h("\xA0\xA0"),w=g(),p=d("div");for(let y=0;y<D.length;y+=1)D[y].c();M=g(),j=d("h3"),A=d("button"),L=h("expand_"),W=h(ee),H=g(),G=d("span"),G.textContent="Students",K=g(),V=d("span"),O=h(q),X=h("\xA0\xA0"),E=g(),B=d("div");for(let y=0;y<R.length;y+=1)R[y].c();m(t,"class","material-icons svelte-e4axfn"),m(i,"class","svelte-e4axfn"),m(f,"class","right svelte-e4axfn"),m(n,"class","svelte-e4axfn"),m(p,"class","svelte-e4axfn"),U(p,"hidden",!s[2]),m(A,"class","material-icons svelte-e4axfn"),m(G,"class","svelte-e4axfn"),m(V,"class","right svelte-e4axfn"),m(j,"class","svelte-e4axfn"),m(B,"class","svelte-e4axfn"),U(B,"hidden",!s[3]),m(e,"class","sidebar svelte-e4axfn"),U(e,"hidden",!s[4])},m(y,S){b(y,e,S),r(e,n),r(n,t),r(t,l),r(t,a),r(n,c),r(n,i),r(n,u),r(n,f),r(f,_),r(f,N),r(e,w),r(e,p);for(let k=0;k<D.length;k+=1)D[k].m(p,null);r(e,M),r(e,j),r(j,A),r(A,L),r(A,W),r(j,H),r(j,G),r(j,K),r(j,V),r(V,O),r(V,X),r(e,E),r(e,B);for(let k=0;k<R.length;k+=1)R[k].m(B,null);T||(Q=[J(t,"click",s[5]),J(A,"click",s[6])],T=!0)},p(y,[S]){if(S&4&&o!==(o=y[2]?"less":"more")&&I(a,o),S&2&&v!==(v=y[1].length+"")&&I(_,v),S&2){C=y[1];let k;for(k=0;k<C.length;k+=1){const ge=Ye(y,C,k);D[k]?D[k].p(ge,S):(D[k]=Ue(ge),D[k].c(),D[k].m(p,null))}for(;k<D.length;k+=1)D[k].d(1);D.length=C.length}if(S&4&&U(p,"hidden",!y[2]),S&8&&ee!==(ee=y[3]?"less":"more")&&I(W,ee),S&1&&q!==(q=y[0].length+"")&&I(O,q),S&1){z=y[0];let k;for(k=0;k<z.length;k+=1){const ge=Re(y,z,k);R[k]?R[k].p(ge,S):(R[k]=Ee(ge),R[k].c(),R[k].m(B,null))}for(;k<R.length;k+=1)R[k].d(1);R.length=z.length}S&8&&U(B,"hidden",!y[3]),S&16&&U(e,"hidden",!y[4])},i:Y,o:Y,d(y){y&&$(e),ue(D,y),ue(R,y),T=!1,ke(Q)}}}function It(s,e,n){let t=[],l=[],o=!1,a=!1,c=!0;re.subscribe(async _=>{if(_==!0){n(0,t=(await nt()).response.data),n(1,l=(await st()).response.data),t.length>0&&n(0,t=Se(t,"firstName")),l.length>0&&n(1,l=Se(l,"lastName"));for(let N=0;N<t.length;N++)n(0,t[N].class=await dt(t[N].code),t)}});function i(){n(2,o=!o)}function u(){n(3,a=!a)}return be.subscribe(_=>n(4,c=_)),[t,l,o,a,c,i,u,_=>{$e("teacher",_.code)},_=>{$e("student",_.code)}]}class zt extends te{constructor(e){super();le(this,e,It,jt,ne,{})}}function We(s){let e,n,t=s[0].subjects.toString().toUpperCase()+"",l,o,a,c,i,u=s[0].locations+"",f,v,_,N,w,p=s[0].teachers.length>1?"s":"",M,j,A=s[0].teachers.toString().toUpperCase()+"",L,ee,W,H,G,K=x(s[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"",V,q,O,X,E,B=s[0].classes.length>1?"s":"",T,Q,C=(s[0].classes.length?s[0].classes:"Unknown")+"",D,z,R,y=s[0].changeWarning&&Oe(s);return{c(){e=d("h3"),n=h("Information for "),l=h(t),o=g(),a=d("p"),c=d("b"),c.textContent="Location",i=h(": "),f=h(u),v=g(),_=d("p"),N=d("b"),w=h("Teacher"),M=h(p),j=h(": "),L=h(A),ee=g(),W=d("p"),H=d("b"),H.textContent="Timestamp",G=h(": "),V=h(K),q=g(),O=d("p"),X=d("b"),E=h("Group"),T=h(B),Q=h(": "),D=h(C),z=g(),y&&y.c(),R=de(),m(e,"class","svelte-n2aqc6"),m(a,"class","svelte-n2aqc6"),m(_,"class","svelte-n2aqc6"),m(W,"class","svelte-n2aqc6"),m(O,"class","svelte-n2aqc6")},m(S,k){b(S,e,k),r(e,n),r(e,l),b(S,o,k),b(S,a,k),r(a,c),r(a,i),r(a,f),b(S,v,k),b(S,_,k),r(_,N),r(N,w),r(N,M),r(_,j),r(_,L),b(S,ee,k),b(S,W,k),r(W,H),r(W,G),r(W,V),b(S,q,k),b(S,O,k),r(O,X),r(X,E),r(X,T),r(O,Q),r(O,D),b(S,z,k),y&&y.m(S,k),b(S,R,k)},p(S,k){k&1&&t!==(t=S[0].subjects.toString().toUpperCase()+"")&&I(l,t),k&1&&u!==(u=S[0].locations+"")&&I(f,u),k&1&&p!==(p=S[0].teachers.length>1?"s":"")&&I(M,p),k&1&&A!==(A=S[0].teachers.toString().toUpperCase()+"")&&I(L,A),k&1&&K!==(K=x(S[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"")&&I(V,K),k&1&&B!==(B=S[0].classes.length>1?"s":"")&&I(T,B),k&1&&C!==(C=(S[0].classes.length?S[0].classes:"Unknown")+"")&&I(D,C),S[0].changeWarning?y?y.p(S,k):(y=Oe(S),y.c(),y.m(R.parentNode,R)):y&&(y.d(1),y=null)},d(S){S&&$(e),S&&$(o),S&&$(a),S&&$(v),S&&$(_),S&&$(ee),S&&$(W),S&&$(q),S&&$(O),S&&$(z),y&&y.d(S),S&&$(R)}}}function Oe(s){let e,n,t,l,o,a,c=s[0].changeWarning+"",i;return{c(){e=d("hr"),n=g(),t=d("p"),l=d("b"),l.textContent="Warning",o=h(":"),a=d("br"),i=h(c),m(e,"class","svelte-n2aqc6"),m(t,"class","svelte-n2aqc6")},m(u,f){b(u,e,f),b(u,n,f),b(u,t,f),r(t,l),r(t,o),r(t,a),r(t,i)},p(u,f){f&1&&c!==(c=u[0].changeWarning+"")&&I(i,c)},d(u){u&&$(e),u&&$(n),u&&$(t)}}}function Bt(s){let e,n,t,l,o,a,c,i=s[0]&&We(s);return{c(){e=d("div"),n=g(),t=d("div"),l=d("button"),l.textContent="close",o=g(),i&&i.c(),m(e,"class","shade svelte-n2aqc6"),U(e,"hidden",!s[1]),m(l,"class","material-icons svelte-n2aqc6"),m(t,"class","dialog svelte-n2aqc6"),U(t,"hidden",!s[1])},m(u,f){b(u,e,f),b(u,n,f),b(u,t,f),r(t,l),r(t,o),i&&i.m(t,null),a||(c=[J(e,"click",s[2]),J(l,"click",s[2])],a=!0)},p(u,[f]){f&2&&U(e,"hidden",!u[1]),u[0]?i?i.p(u,f):(i=We(u),i.c(),i.m(t,null)):i&&(i.d(1),i=null),f&2&&U(t,"hidden",!u[1])},i:Y,o:Y,d(u){u&&$(e),u&&$(n),u&&$(t),i&&i.d(),a=!1,ke(c)}}}function At(s,e,n){x.extend(Me),x.extend(ye),x.extend(Te);let t,l;tt.subscribe(a=>n(0,t=a)),we.subscribe(a=>n(1,l=a));function o(){we.set(!1)}return[t,l,o]}class qt extends te{constructor(e){super();le(this,e,At,Bt,ne,{})}}function Lt(s){let e,n=s[0].subjects[0]+"",t,l,o=s[0].locations+"",a,c,i,u,f,v=(s[0].classes||"")+"",_,N,w;return{c(){e=d("div"),t=h(n),l=g(),a=h(o),c=d("br"),i=d("br"),u=g(),f=d("p"),_=h(v),m(f,"class","classes svelte-koep3s"),m(e,"class","appointment svelte-koep3s"),Z(e,"left",10+(s[0].startMin-440)*2+"px"),Z(e,"width",(s[0].endMin-s[0].startMin)*2-2+"px"),Z(e,"top",52+s[0].rowNr*80-80+"px"),U(e,"cancelled",s[0].cancelled),U(e,"changed",s[0].teacherChanged||s[0].timeChanged||s[0].locationChanged)},m(p,M){b(p,e,M),r(e,t),r(e,l),r(e,a),r(e,c),r(e,i),r(e,u),r(e,f),r(f,_),N||(w=J(e,"click",s[1]),N=!0)},p(p,[M]){M&1&&n!==(n=p[0].subjects[0]+"")&&I(t,n),M&1&&o!==(o=p[0].locations+"")&&I(a,o),M&1&&v!==(v=(p[0].classes||"")+"")&&I(_,v),M&1&&Z(e,"left",10+(p[0].startMin-440)*2+"px"),M&1&&Z(e,"width",(p[0].endMin-p[0].startMin)*2-2+"px"),M&1&&Z(e,"top",52+p[0].rowNr*80-80+"px"),M&1&&U(e,"cancelled",p[0].cancelled),M&1&&U(e,"changed",p[0].teacherChanged||p[0].timeChanged||p[0].locationChanged)},i:Y,o:Y,d(p){p&&$(e),N=!1,w()}}}function Rt(s,e,n){let{appointment:t}=e;function l(){tt.set(t),we.set(!0)}return s.$$set=o=>{"appointment"in o&&n(0,t=o.appointment)},[t,l]}class Yt extends te{constructor(e){super();le(this,e,Rt,Lt,ne,{appointment:0})}}function Pe(s,e,n){const t=s.slice();return t[1]=e[n],t}function He(s){let e,n=s[1].d+"",t,l;return{c(){e=d("div"),t=h(n),l=g(),m(e,"class","appointment svelte-1cul09l"),Z(e,"left","10px"),Z(e,"width","80px"),Z(e,"top",10+80*s[1].i-40+"px")},m(o,a){b(o,e,a),r(e,t),r(e,l)},p:Y,d(o){o&&$(e)}}}function Ut(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=He(Pe(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,o){for(let a=0;a<t.length;a+=1)t[a].m(l,o);b(l,e,o)},p(l,[o]){if(o&1){n=l[0];let a;for(a=0;a<n.length;a+=1){const c=Pe(l,n,a);t[a]?t[a].p(c,o):(t[a]=He(c),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:Y,o:Y,d(l){ue(t,l),l&&$(e)}}}function Et(s){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class Wt extends te{constructor(e){super();le(this,e,Et,Ut,ne,{})}}function Ze(s,e,n){const t=s.slice();return t[1]=e[n],t}function Fe(s){let e,n=s[1].start.h.toString().padStart(2,"0")+"",t,l,o=s[1].start.m.toString().padStart(2,"0")+"",a,c,i=s[1].end.h.toString().padStart(2,"0")+"",u,f,v=s[1].end.m.toString().padStart(2,"0")+"",_,N;return{c(){e=d("div"),t=h(n),l=h(":"),a=h(o),c=h(" - "),u=h(i),f=h(":"),_=h(v),N=g(),m(e,"class","appointment svelte-1vchu3d"),Z(e,"left",10+(s[1].startMin-440)*2+"px"),Z(e,"width",(s[1].endMin-s[1].startMin)*2-2+"px"),Z(e,"height","40px"),Z(e,"top","10px")},m(w,p){b(w,e,p),r(e,t),r(e,l),r(e,a),r(e,c),r(e,u),r(e,f),r(e,_),r(e,N)},p:Y,d(w){w&&$(e)}}}function Ot(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=Fe(Ze(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,o){for(let a=0;a<t.length;a+=1)t[a].m(l,o);b(l,e,o)},p(l,[o]){if(o&1){n=l[0];let a;for(a=0;a<n.length;a+=1){const c=Ze(l,n,a);t[a]?t[a].p(c,o):(t[a]=Fe(c),t[a].c(),t[a].m(e.parentNode,e))}for(;a<t.length;a+=1)t[a].d(1);t.length=n.length}},i:Y,o:Y,d(l){ue(t,l),l&&$(e)}}}function Pt(s){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}}]]}class Ht extends te{constructor(e){super();le(this,e,Pt,Ot,ne,{})}}function Ge(s,e,n){const t=s.slice();return t[8]=e[n],t}function Ke(s){let e;return{c(){e=h("(Current)")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function Zt(s){let e;return{c(){e=h("Loading...")},m(n,t){b(n,e,t)},p:Y,d(n){n&&$(e)}}}function Ft(s){let e;function n(o,a){return o[1].id?Kt:Gt}let t=n(s),l=t(s);return{c(){l.c(),e=de()},m(o,a){l.m(o,a),b(o,e,a)},p(o,a){t===(t=n(o))&&l?l.p(o,a):(l.d(1),l=t(o),l&&(l.c(),l.m(e.parentNode,e)))},d(o){l.d(o),o&&$(e)}}}function Gt(s){let e;return{c(){e=h("No schedule selected.")},m(n,t){b(n,e,t)},p:Y,d(n){n&&$(e)}}}function Kt(s){let e,n=s[1].type+"",t,l,o=s[1].id.toUpperCase()+"",a;return{c(){e=h("Schedule for "),t=h(n),l=g(),a=h(o)},m(c,i){b(c,e,i),b(c,t,i),b(c,l,i),b(c,a,i)},p(c,i){i&2&&n!==(n=c[1].type+"")&&I(t,n),i&2&&o!==(o=c[1].id.toUpperCase()+"")&&I(a,o)},d(c){c&&$(e),c&&$(t),c&&$(l),c&&$(a)}}}function Ve(s){let e,n;return e=new Yt({props:{appointment:s[8]}}),{c(){se(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},p(t,l){const o={};l&1&&(o.appointment=t[8]),e.$set(o)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){oe(e,t)}}}function Vt(s){let e,n,t,l,o,a=x().week()-2+s[3]+"",c,i,u,f,v,_,N,w,p,M,j,A,L,ee,W,H,G,K,V,q=!s[3]&&Ke();function O(C,D){return C[2]?Zt:Ft}let X=O(s),E=X(s);j=new Wt({}),L=new Ht({});let B=s[0],T=[];for(let C=0;C<B.length;C+=1)T[C]=Ve(Ge(s,B,C));const Q=C=>F(T[C],1,1,()=>{T[C]=null});return H=new qt({}),{c(){e=d("h3"),n=d("button"),n.textContent="arrow_back_ios_new",t=g(),l=d("span"),o=h("Week: "),c=h(a),i=g(),q&&q.c(),u=g(),f=d("button"),f.textContent="arrow_forward_ios",v=g(),_=d("div"),N=g(),w=d("h2"),E.c(),p=g(),M=d("div"),se(j.$$.fragment),A=g(),se(L.$$.fragment),ee=g();for(let C=0;C<T.length;C+=1)T[C].c();W=g(),se(H.$$.fragment),m(n,"class","material-icons svelte-1bjp9lh"),m(l,"class","svelte-1bjp9lh"),m(f,"class","material-icons svelte-1bjp9lh"),m(_,"class","sep svelte-1bjp9lh"),m(e,"class","svelte-1bjp9lh"),m(w,"class","svelte-1bjp9lh"),m(M,"class","grid svelte-1bjp9lh")},m(C,D){b(C,e,D),r(e,n),r(e,t),r(e,l),r(l,o),r(l,c),r(l,i),q&&q.m(l,null),r(e,u),r(e,f),r(e,v),r(e,_),b(C,N,D),b(C,w,D),E.m(w,null),b(C,p,D),b(C,M,D),ae(j,M,null),r(M,A),ae(L,M,null),r(M,ee);for(let z=0;z<T.length;z+=1)T[z].m(M,null);r(M,W),ae(H,M,null),G=!0,K||(V=[J(n,"click",s[4]),J(f,"click",s[5])],K=!0)},p(C,[D]){if((!G||D&8)&&a!==(a=x().week()-2+C[3]+"")&&I(c,a),C[3]?q&&(q.d(1),q=null):q||(q=Ke(),q.c(),q.m(l,null)),X===(X=O(C))&&E?E.p(C,D):(E.d(1),E=X(C),E&&(E.c(),E.m(w,null))),D&1){B=C[0];let z;for(z=0;z<B.length;z+=1){const R=Ge(C,B,z);T[z]?(T[z].p(R,D),P(T[z],1)):(T[z]=Ve(R),T[z].c(),P(T[z],1),T[z].m(M,W))}for(Je(),z=B.length;z<T.length;z+=1)Q(z);Qe()}},i(C){if(!G){P(j.$$.fragment,C),P(L.$$.fragment,C);for(let D=0;D<B.length;D+=1)P(T[D]);P(H.$$.fragment,C),G=!0}},o(C){F(j.$$.fragment,C),F(L.$$.fragment,C),T=T.filter(Boolean);for(let D=0;D<T.length;D+=1)F(T[D]);F(H.$$.fragment,C),G=!1},d(C){C&&$(e),q&&q.d(),C&&$(N),C&&$(w),E.d(),C&&$(p),C&&$(M),oe(j),oe(L),ue(T,C),oe(H),K=!1,ke(V)}}}function Xt(s,e,n){x.extend(Me),x.extend(ye),x.extend(Te);let t=[],l=[],o={id:""},a=!1,c=0;et.subscribe(v=>{v&&(n(1,o=v),i(v.type,v.id))});async function i(v,_){n(2,a=!0),console.log(v,_);let N;v=="student"?N=await pt(_,c):N=await ft(_),t=Se(N.response.data,"start"),n(0,l=[]),console.log(t);for(let w=0;w<t.length;w++){const p=t[w];console.log(p);const M=new Date(p.start*1e3).getDay()-new Date(pe(ce.prev)).getDay()+2;l.push({rowNr:M,startMin:new Date(p.start*1e3).getHours()*60+new Date(p.start*1e3).getMinutes(),endMin:new Date(p.end*1e3).getHours()*60+new Date(p.end*1e3).getMinutes(),slotName:p.startTimeSlotName,locations:p.locations,teachers:p.teachers,subjects:p.subjects,cancelled:p.cancelled,changeWarning:p.changeDescription,teacherChanged:p.teacherChanged,locationChanged:p.locationChanged,timeChanged:p.timeChanged,start:{h:new Date(p.start*1e3).getHours(),m:new Date(p.start*1e3).getMinutes()},end:{h:new Date(p.end*1e3).getHours(),m:new Date(p.end*1e3).getMinutes()},classes:p.groups,startTimeStamp:p.start,endTimeStamp:p.end})}n(2,a=!1)}function u(){n(3,c-=1),i(o.type,o.id)}function f(){n(3,c+=1),i(o.type,o.id)}return[l,o,a,c,u,f,i]}class Jt extends te{constructor(e){super();le(this,e,Xt,Vt,ne,{openSched:6})}get openSched(){return this.$$.ctx[6]}}function Qt(s){let e,n,t;return n=new Jt({}),{c(){e=d("div"),se(n.$$.fragment),m(e,"class","content svelte-1nic1ov"),U(e,"noRightBar",s[0])},m(l,o){b(l,e,o),ae(n,e,null),t=!0},p(l,[o]){o&1&&U(e,"noRightBar",l[0])},i(l){t||(P(n.$$.fragment,l),t=!0)},o(l){F(n.$$.fragment,l),t=!1},d(l){l&&$(e),oe(n)}}}function xt(s,e,n){let t;return be.subscribe(l=>n(0,t=!l)),[t]}class el extends te{constructor(e){super();le(this,e,xt,Qt,ne,{})}}function tl(s){let e,n,t,l,o,a,c;return n=new el({}),l=new zt({}),a=new Dt({}),{c(){e=d("div"),se(n.$$.fragment),t=g(),se(l.$$.fragment),o=g(),se(a.$$.fragment),m(e,"class","bg svelte-36otyo")},m(i,u){b(i,e,u),ae(n,e,null),r(e,t),ae(l,e,null),r(e,o),ae(a,e,null),c=!0},p:Y,i(i){c||(P(n.$$.fragment,i),P(l.$$.fragment,i),P(a.$$.fragment,i),c=!0)},o(i){F(n.$$.fragment,i),F(l.$$.fragment,i),F(a.$$.fragment,i),c=!1},d(i){i&&$(e),oe(n),oe(l),oe(a)}}}class ll extends te{constructor(e){super();le(this,e,null,tl,ne,{})}}function nl(s){let e,n;return e=new gt({}),{c(){se(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){oe(e,t)}}}function sl(s){let e,n;return e=new ll({}),{c(){se(e.$$.fragment)},m(t,l){ae(e,t,l),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){oe(e,t)}}}function al(s){let e,n,t,l;const o=[sl,nl],a=[];function c(i,u){return i[0]?0:1}return n=c(s),t=a[n]=o[n](s),{c(){e=d("div"),t.c()},m(i,u){b(i,e,u),a[n].m(e,null),l=!0},p(i,[u]){let f=n;n=c(i),n!==f&&(Je(),F(a[f],1,1,()=>{a[f]=null}),Qe(),t=a[n],t||(t=a[n]=o[n](i),t.c()),P(t,1),t.m(e,null))},i(i){l||(P(t),l=!0)},o(i){F(t),l=!1},d(i){i&&$(e),a[n].d()}}}function ol(s,e,n){let t;return re.subscribe(l=>{n(0,t=l)}),Xe(async()=>{await lt()}),[t]}class rl extends te{constructor(e){super();le(this,e,ol,al,ne,{})}}new rl({target:document.getElementById("app")});
