import{w as _e,d as le,a as Ne,b as Me,c as De,g as ve,F as ot,S as Q,i as x,s as ee,e as p,f as b,h as m,t as z,j as k,k as r,l as q,n as U,m as C,o as we,p as v,q as de,r as fe,u as K,v as T,x as ke,y as Ce,z as ne,A as se,B as H,C as V,D as oe,E as Be,G as xe,H as et}from"./vendor.58f3c43f.js";const at=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function l(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=l(s);fetch(s.href,a)}};at();const tt="1201",rt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",it="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Te=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),be=_e(),me=_e(!0),lt=_e();let Se=_e(!1);const nt=_e();le.extend(Ne);le.extend(Me);le.extend(De);async function he(n,e,l,t=!0,s){if(ve(ae)||s){const a={headers:{Authorization:`Bearer ${n}`},method:"GET"},o=await await fetch(`https://${e}.zportal.nl/api/v3/${l}`,s?{}:a);return t?o.json():o.text()}return t?{}:"{}"}async function ct(n,e){const l={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${n}`,l)).json()}let ae=_e(!1),ce,ie;async function st(n,e){if(localStorage.getItem("accessToken")){ce=localStorage.getItem("accessToken"),ie=localStorage.getItem("school");const l=await(await fetch(`https://${ie}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ce}`}})).json();return ae.set(l.response.status==200),ae?(console.log("Zermelo login succeeded from stored access token"),be.set(l.response.data)):console.log("Zermelo login failed from stored access token: server returned "+l.response.status),ve(ae)}if(!n||!e)return console.log("Zermelo login failed!"),console.error(n,e),!1;try{const l=await ct(e,n);l.access_token&&(localStorage.setItem("accessToken",l.access_token),localStorage.setItem("school",n),ae.set(!0),be.set((await(await fetch(`https://${ie}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ce}`}})).json()).response.data)),ve(ae)&&console.log("Zermelo login succeeded from provided data")}catch{ae.set(!1)}return ae}function ut(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),ae.set(!1)}async function Ie(){return await he(ce,ie,`${rt}${tt}`)}async function je(){return await he(ce,ie,`${it}${tt}`)}async function ft(n,e=0){const l=pe(ue.prev)+601200*e,t=pe(ue.next)+601200*e;return await he(ce,ie,`appointments?start=${l}&end=${t}&teachers=${n}&fields=${Te.get("teacherSchedule")}`,!0)}async function pt(n,e=0){const l=pe(ue.prev)+601200*e,t=pe(ue.next)+601200*e;return await he(ce,ie,`appointments?user=${n}&start=${l}&end=${t}&fields=${Te.get("studentSchedule")}`,!0)}async function dt(n){const e=pe(ue.prev),l=pe(ue.next),t=await he(ce,ie,`appointments?valid=true&start=${e}&end=${l}&fields=${Te.get("getStudentClassAppointments")}&possibleStudents=${n}`,!0);let s;const a=t.response.data;for(let o=0;o<a.length;o++)if(a[o].groupsInDepartments.length>0&&a[o].subjects.length>0){if(a[o].subjects[0]=="mtr"){s=a[o].groupsInDepartments[0];break}continue}return(await he(ce,ie,`groupindepartments?id=${s}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function pe(n){let e;return n==ue.prev?e=le().weekday(-7).unix():e=le().weekday(0).unix(),e}async function mt(n){const e=Array.prototype.concat((await je()).response.data,(await Ie()).response.data),l={includeScore:!0,keys:["firstName","lastName","code"]};return new ot(e,l).search(n)}async function ht(n){const e=(await Ie()).response.data;for(let l=0;l<e.length;l++)if(e[l].code==n)return e[l];return{}}async function _t(n){const e=(await je()).response.data;for(let l=0;l<e.length;l++)if(e[l].code==n)return e[l];return{}}function ye(n,e){return n.sort(function(l,t){var s=l[e],a=t[e];return s<a?-1:s>a?1:0})}var ue=(n=>(n[n.prev=0]="prev",n[n.next=1]="next",n))(ue||{});function gt(n){let e,l,t,s,a,o,c,i,u,f,$,h,_;return{c(){e=p("div"),l=p("div"),t=p("h1"),t.textContent="Login",s=b(),a=p("p"),a.textContent="Provide the requested information to continue to Zermelo.",o=b(),c=p("input"),i=b(),u=p("input"),f=b(),$=p("button"),$.textContent="Login",m(t,"class","svelte-1swo36e"),m(a,"class","svelte-1swo36e"),m(c,"placeholder","schoolname"),m(c,"class","svelte-1swo36e"),z(c,"error",n[2]),m(u,"placeholder","pairing code"),m(u,"type","number"),m(u,"class","svelte-1swo36e"),z(u,"error",n[2]),m($,"class","svelte-1swo36e"),m(l,"class","centered svelte-1swo36e"),m(e,"class","svelte-1swo36e")},m(g,d){k(g,e,d),r(e,l),r(l,t),r(l,s),r(l,a),r(l,o),r(l,c),n[4](c),r(l,i),r(l,u),n[5](u),r(l,f),r(l,$),h||(_=q($,"click",n[3]),h=!0)},p(g,[d]){d&4&&z(c,"error",g[2]),d&4&&z(u,"error",g[2])},i:U,o:U,d(g){g&&C(e),n[4](null),n[5](null),h=!1,_()}}}function vt(n,e,l){let t,s,a;async function o(){if(!t.value||!s.value){c();return}await st(t.value,s.value),ve(ae)?window.location.reload():c()}function c(){l(2,a=!0),setTimeout(()=>{l(2,a=!1)},3e3)}function i(f){we[f?"unshift":"push"](()=>{t=f,l(0,t)})}function u(f){we[f?"unshift":"push"](()=>{s=f,l(1,s)})}return[t,s,a,o,i,u]}class bt extends Q{constructor(e){super();x(this,e,vt,gt,ee,{})}}function $e(n,e){lt.set({type:n,id:e})}function Le(n,e,l){const t=n.slice();return t[1]=e[l],t}function Ae(n){let e,l=n[1].icon+"",t,s,a,o,c;return{c(){e=p("button"),t=v(l),s=b(),m(e,"class","material-icons svelte-10ub0dz"),m(e,"title",a=n[1].caption)},m(i,u){k(i,e,u),r(e,t),r(e,s),o||(c=q(e,"click",n[1].action),o=!0)},p(i,u){n=i},d(i){i&&C(e),o=!1,c()}}}function $t(n){let e,l=n[0],t=[];for(let s=0;s<l.length;s+=1)t[s]=Ae(Le(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);k(s,e,a)},p(s,[a]){if(a&1){l=s[0];let o;for(o=0;o<l.length;o+=1){const c=Le(s,l,o);t[o]?t[o].p(c,a):(t[o]=Ae(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:U,o:U,d(s){fe(t,s),s&&C(e)}}}function kt(n){return[[{icon:"logout",action:()=>{ut()},caption:"Logout"},{icon:"calendar_today",action:()=>{$e("student",ve(be)[0].code)},caption:"Show own calendar"},{icon:"people",action:()=>{me.set(!0)},caption:"Open user sidebar"}]]}class Ct extends Q{constructor(e){super();x(this,e,kt,$t,ee,{})}}function ze(n,e,l){const t=n.slice();return t[10]=e[l],t}function Re(n){let e,l,t,s=n[3],a=[];for(let o=0;o<s.length;o+=1)a[o]=Ue(ze(n,s,o));return{c(){e=p("div");for(let o=0;o<a.length;o+=1)a[o].c();m(e,"class","searchResults svelte-z915me"),K(e,"top",n[2]+"px"),K(e,"left",n[1]+"px")},m(o,c){k(o,e,c);for(let i=0;i<a.length;i+=1)a[i].m(e,null);l||(t=q(e,"click",n[9]),l=!0)},p(o,c){if(c&9){s=o[3];let i;for(i=0;i<s.length;i+=1){const u=ze(o,s,i);a[i]?a[i].p(u,c):(a[i]=Ue(u),a[i].c(),a[i].m(e,null))}for(;i<a.length;i+=1)a[i].d(1);a.length=s.length}c&4&&K(e,"top",o[2]+"px"),c&2&&K(e,"left",o[1]+"px")},d(o){o&&C(e),fe(a,o),l=!1,t()}}}function Ye(n){let e,l=n[10].item.code.toUpperCase()+"",t,s;return{c(){e=v("("),t=v(l),s=v(")")},m(a,o){k(a,e,o),k(a,t,o),k(a,s,o)},p(a,o){o&8&&l!==(l=a[10].item.code.toUpperCase()+"")&&T(t,l)},d(a){a&&C(e),a&&C(t),a&&C(s)}}}function Ue(n){let e,l=(n[10].item.firstName||"")+"",t,s,a=(n[10].item.prefix||"")+"",o,c,i=(n[10].item.lastName||"")+"",u,f,$,h,_,g=n[10].item.isEmployee&&Ye(n);function d(){return n[8](n[10])}return{c(){e=p("button"),t=v(l),s=b(),o=v(a),c=b(),u=v(i),f=b(),g&&g.c(),$=b(),m(e,"class","svelte-z915me")},m(w,j){k(w,e,j),r(e,t),r(e,s),r(e,o),r(e,c),r(e,u),r(e,f),g&&g.m(e,null),r(e,$),h||(_=q(e,"click",d),h=!0)},p(w,j){n=w,j&8&&l!==(l=(n[10].item.firstName||"")+"")&&T(t,l),j&8&&a!==(a=(n[10].item.prefix||"")+"")&&T(o,a),j&8&&i!==(i=(n[10].item.lastName||"")+"")&&T(u,i),n[10].item.isEmployee?g?g.p(n,j):(g=Ye(n),g.c(),g.m(e,$)):g&&(g.d(1),g=null)},d(w){w&&C(e),g&&g.d(),h=!1,_()}}}function wt(n){let e,l,t,s,a,o,c,i,u=!n[5]&&n[4]&&Re(n);return{c(){e=p("div"),l=p("input"),t=b(),s=p("button"),s.textContent="search",a=b(),u&&u.c(),o=de(),m(l,"placeholder","Search people..."),m(l,"class","svelte-z915me"),m(s,"class","material-icons svelte-z915me"),m(e,"class","searchOuter svelte-z915me")},m(f,$){k(f,e,$),r(e,l),n[7](l),r(e,t),r(e,s),k(f,a,$),u&&u.m(f,$),k(f,o,$),c||(i=[q(l,"focus",n[6]),q(l,"blur",n[6]),q(l,"input",n[6])],c=!0)},p(f,[$]){!f[5]&&f[4]?u?u.p(f,$):(u=Re(f),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:U,o:U,d(f){f&&C(e),n[7](null),f&&C(a),u&&u.d(f),f&&C(o),c=!1,ke(i)}}}function St(n,e,l){let t,s,a,o=[],c="",i=!1;Ce(()=>{l(1,s=t.offsetLeft-5),l(2,a=t.offsetTop+30)});async function u(){l(4,c=t.value),l(3,o=await mt(t.value)),l(5,i=document.activeElement!=t)}function f(_){we[_?"unshift":"push"](()=>{t=_,l(0,t)})}return[t,s,a,o,c,i,u,f,_=>{l(0,t.value="",t),$e(_.item.isEmployee?"teacher":"student",_.item.code)},()=>t.focus()]}class yt extends Q{constructor(e){super();x(this,e,St,wt,ee,{})}}function We(n,e,l){const t=n.slice();return t[2]=e[l],t[3]=e,t[4]=l,t}function Ee(n){let e,l=n[2].icon+"",t,s,a;function o(){return n[1](n[2],n[3],n[4])}return{c(){e=p("button"),t=v(l),m(e,"class","material-icons svelte-yojadn"),z(e,"active",n[2].value)},m(c,i){k(c,e,i),r(e,t),s||(a=q(e,"click",o),s=!0)},p(c,i){n=c,i&1&&l!==(l=n[2].icon+"")&&T(t,l),i&1&&z(e,"active",n[2].value)},d(c){c&&C(e),s=!1,a()}}}function Nt(n){let e,l=n[0],t=[];for(let s=0;s<l.length;s+=1)t[s]=Ee(We(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);k(s,e,a)},p(s,[a]){if(a&1){l=s[0];let o;for(o=0;o<l.length;o+=1){const c=We(s,l,o);t[o]?t[o].p(c,a):(t[o]=Ee(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:U,o:U,d(s){fe(t,s),s&&C(e)}}}function Mt(n,e,l){const t=[];return me.set(!0),[t,(a,o,c)=>{l(0,o[c].value=!a.value,t),a.event(a.value)}]}class Dt extends Q{constructor(e){super();x(this,e,Mt,Nt,ee,{})}}function Tt(n){let e,l,t,s,a,o,c,i,u,f,$,h,_,g,d,w=n[0].firstName+"",j,B,W=(n[0].prefix||"")+"",X,E,Z=n[0].lastName+"",J,te,F,G,L,R;return a=new yt({}),c=new Dt({}),$=new Ct({}),{c(){e=p("div"),l=p("div"),l.textContent=`Zermelo Hub | ${ie}`,t=b(),s=p("div"),ne(a.$$.fragment),o=b(),ne(c.$$.fragment),i=b(),u=p("div"),f=b(),ne($.$$.fragment),h=b(),_=p("div"),g=b(),d=p("p"),j=v(w),B=b(),X=v(W),E=b(),J=v(Z),te=b(),F=p("span"),F.textContent="account_circle",G=b(),L=p("div"),m(l,"class","header svelte-p811u5"),m(u,"class","sep svelte-p811u5"),m(_,"class","sep svelte-p811u5"),m(d,"class","svelte-p811u5"),m(F,"class","material-icons svelte-p811u5"),m(s,"class","right svelte-p811u5"),m(e,"class","tb svelte-p811u5"),m(L,"class","accent svelte-p811u5")},m(D,Y){k(D,e,Y),r(e,l),r(e,t),r(e,s),se(a,s,null),r(s,o),se(c,s,null),r(s,i),r(s,u),r(s,f),se($,s,null),r(s,h),r(s,_),r(s,g),r(s,d),r(d,j),r(d,B),r(d,X),r(d,E),r(d,J),r(s,te),r(s,F),k(D,G,Y),k(D,L,Y),R=!0},p(D,[Y]){(!R||Y&1)&&w!==(w=D[0].firstName+"")&&T(j,w),(!R||Y&1)&&W!==(W=(D[0].prefix||"")+"")&&T(X,W),(!R||Y&1)&&Z!==(Z=D[0].lastName+"")&&T(J,Z)},i(D){R||(H(a.$$.fragment,D),H(c.$$.fragment,D),H($.$$.fragment,D),R=!0)},o(D){V(a.$$.fragment,D),V(c.$$.fragment,D),V($.$$.fragment,D),R=!1},d(D){D&&C(e),oe(a),oe(c),oe($),D&&C(G),D&&C(L)}}}function It(n,e,l){let t;return be.subscribe(s=>{l(0,t=s[0])}),[t]}class jt extends Q{constructor(e){super();x(this,e,It,Tt,ee,{})}}function Oe(n,e,l){const t=n.slice();return t[9]=e[l],t}function Pe(n,e,l){const t=n.slice();return t[12]=e[l],t}function He(n){let e,l=(n[12].prefix||"")+"",t,s,a=n[12].lastName+"",o,c,i,u=n[12].code.toUpperCase()+"",f,$,h,_;function g(){return n[7](n[12])}return{c(){e=p("button"),t=v(l),s=b(),o=v(a),c=b(),i=p("span"),f=v(u),$=b(),m(i,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(d,w){k(d,e,w),r(e,t),r(e,s),r(e,o),r(e,c),r(e,i),r(i,f),r(e,$),h||(_=q(e,"click",g),h=!0)},p(d,w){n=d,w&2&&l!==(l=(n[12].prefix||"")+"")&&T(t,l),w&2&&a!==(a=n[12].lastName+"")&&T(o,a),w&2&&u!==(u=n[12].code.toUpperCase()+"")&&T(f,u)},d(d){d&&C(e),h=!1,_()}}}function qe(n){let e,l=n[9].firstName+"",t,s,a=(n[9].prefix||"")+"",o,c,i=n[9].lastName+"",u,f,$,h=(n[9].class||"...")+"",_,g,d,w;function j(){return n[8](n[9])}return{c(){e=p("button"),t=v(l),s=b(),o=v(a),c=b(),u=v(i),f=b(),$=p("span"),_=v(h),g=b(),m($,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(B,W){k(B,e,W),r(e,t),r(e,s),r(e,o),r(e,c),r(e,u),r(e,f),r(e,$),r($,_),r(e,g),d||(w=q(e,"click",j),d=!0)},p(B,W){n=B,W&1&&l!==(l=n[9].firstName+"")&&T(t,l),W&1&&a!==(a=(n[9].prefix||"")+"")&&T(o,a),W&1&&i!==(i=n[9].lastName+"")&&T(u,i),W&1&&h!==(h=(n[9].class||"...")+"")&&T(_,h)},d(B){B&&C(e),d=!1,w()}}}function Bt(n){let e,l,t,s,a=n[2]?"less":"more",o,c,i,u,f,$=n[1].length+"",h,_,g,d,w,j,B,W,X=n[3]?"less":"more",E,Z,J,te,F,G=n[0].length+"",L,R,D,Y,M,A,I=n[1],O=[];for(let N=0;N<I.length;N+=1)O[N]=He(Pe(n,I,N));let re=n[0],P=[];for(let N=0;N<re.length;N+=1)P[N]=qe(Oe(n,re,N));return{c(){e=p("div"),l=p("h3"),t=p("button"),s=v("expand_"),o=v(a),c=b(),i=p("span"),i.textContent="Teachers",u=b(),f=p("span"),h=v($),_=v("\xA0\xA0"),g=b(),d=p("div");for(let N=0;N<O.length;N+=1)O[N].c();w=b(),j=p("h3"),B=p("button"),W=v("expand_"),E=v(X),Z=b(),J=p("span"),J.textContent="Students",te=b(),F=p("span"),L=v(G),R=v("\xA0\xA0"),D=b(),Y=p("div");for(let N=0;N<P.length;N+=1)P[N].c();m(t,"class","material-icons svelte-dvgbtd"),m(i,"class","svelte-dvgbtd"),m(f,"class","right svelte-dvgbtd"),m(l,"class","svelte-dvgbtd"),m(d,"class","svelte-dvgbtd"),z(d,"hidden",!n[2]),m(B,"class","material-icons svelte-dvgbtd"),m(J,"class","svelte-dvgbtd"),m(F,"class","right svelte-dvgbtd"),m(j,"class","svelte-dvgbtd"),m(Y,"class","svelte-dvgbtd"),z(Y,"hidden",!n[3]),m(e,"class","sidebar svelte-dvgbtd"),z(e,"hidden",!n[4])},m(N,y){k(N,e,y),r(e,l),r(l,t),r(t,s),r(t,o),r(l,c),r(l,i),r(l,u),r(l,f),r(f,h),r(f,_),r(e,g),r(e,d);for(let S=0;S<O.length;S+=1)O[S].m(d,null);r(e,w),r(e,j),r(j,B),r(B,W),r(B,E),r(j,Z),r(j,J),r(j,te),r(j,F),r(F,L),r(F,R),r(e,D),r(e,Y);for(let S=0;S<P.length;S+=1)P[S].m(Y,null);M||(A=[q(t,"click",n[5]),q(B,"click",n[6])],M=!0)},p(N,[y]){if(y&4&&a!==(a=N[2]?"less":"more")&&T(o,a),y&2&&$!==($=N[1].length+"")&&T(h,$),y&2){I=N[1];let S;for(S=0;S<I.length;S+=1){const ge=Pe(N,I,S);O[S]?O[S].p(ge,y):(O[S]=He(ge),O[S].c(),O[S].m(d,null))}for(;S<O.length;S+=1)O[S].d(1);O.length=I.length}if(y&4&&z(d,"hidden",!N[2]),y&8&&X!==(X=N[3]?"less":"more")&&T(E,X),y&1&&G!==(G=N[0].length+"")&&T(L,G),y&1){re=N[0];let S;for(S=0;S<re.length;S+=1){const ge=Oe(N,re,S);P[S]?P[S].p(ge,y):(P[S]=qe(ge),P[S].c(),P[S].m(Y,null))}for(;S<P.length;S+=1)P[S].d(1);P.length=re.length}y&8&&z(Y,"hidden",!N[3]),y&16&&z(e,"hidden",!N[4])},i:U,o:U,d(N){N&&C(e),fe(O,N),fe(P,N),M=!1,ke(A)}}}function Lt(n,e,l){let t=[],s=[],a=!1,o=!1,c=!0;ae.subscribe(async h=>{if(h==!0){l(0,t=(await Ie()).response.data),l(1,s=(await je()).response.data),t.length>0&&l(0,t=ye(t,"firstName")),s.length>0&&l(1,s=ye(s,"lastName"));for(let _=0;_<t.length;_++)l(0,t[_].class=await dt(t[_].code),t)}});function i(){l(2,a=!a)}function u(){l(3,o=!o)}return Ce(()=>{me.set(!1)}),me.subscribe(h=>l(4,c=h)),[t,s,a,o,c,i,u,h=>{$e("teacher",h.code)},h=>{$e("student",h.code)}]}class At extends Q{constructor(e){super();x(this,e,Lt,Bt,ee,{})}}function zt(n){let e,l,t,s,a,o,c,i,u,f=(n[0].classes||"")+"",$,h,_;return{c(){e=p("div"),l=p("p"),t=p("b"),s=v(n[5]),a=b(),o=p("p"),c=v(n[6]),i=b(),u=p("p"),$=v(f),m(l,"class","svelte-8fvso2"),m(o,"class","svelte-8fvso2"),m(u,"class","classes svelte-8fvso2"),m(e,"class","appointment svelte-8fvso2"),K(e,"left",n[2]+"px"),K(e,"width",n[3]+"px"),K(e,"top",n[4]+"px"),z(e,"cancelled",n[0].cancelled),z(e,"changed",n[1])},m(g,d){k(g,e,d),r(e,l),r(l,t),r(t,s),r(e,a),r(e,o),r(o,c),r(e,i),r(e,u),r(u,$),h||(_=q(e,"click",n[7]),h=!0)},p(g,[d]){d&32&&T(s,g[5]),d&64&&T(c,g[6]),d&1&&f!==(f=(g[0].classes||"")+"")&&T($,f),d&4&&K(e,"left",g[2]+"px"),d&8&&K(e,"width",g[3]+"px"),d&16&&K(e,"top",g[4]+"px"),d&1&&z(e,"cancelled",g[0].cancelled),d&2&&z(e,"changed",g[1])},i:U,o:U,d(g){g&&C(e),h=!1,_()}}}function Rt(n,e,l){let{appointment:t}=e;function s(){nt.set(t),Se.set(!0)}let a,o,c,i,u,f;return Ce(()=>{l(1,a=t.teacherChanged||t.timeChanged||t.locationChanged),l(2,o=10+(t.startMin-440)*2),l(3,c=(t.endMin-t.startMin)*2-2),l(4,i=52+t.rowNr*80-80),l(5,u=`${t.subjects[0]||t.teachers.toString().toUpperCase()} - ${t.locations.length?t.locations:"0_00"}`),l(6,f=t.subjects[0]?t.teachers.toString().toUpperCase():"")}),n.$$set=$=>{"appointment"in $&&l(0,t=$.appointment)},[t,a,o,c,i,u,f,s]}class Yt extends Q{constructor(e){super();x(this,e,Rt,zt,ee,{appointment:0})}}function Ze(n,e,l){const t=n.slice();return t[1]=e[l],t}function Fe(n){let e,l=n[1].d+"",t,s;return{c(){e=p("div"),t=v(l),s=b(),m(e,"class","appointment svelte-1k8j453"),K(e,"left","10px"),K(e,"width","80px"),K(e,"top",10+80*n[1].i-40+"px"),z(e,"today",new Date().getDay()==n[1].i)},m(a,o){k(a,e,o),r(e,t),r(e,s)},p(a,o){o&1&&z(e,"today",new Date().getDay()==a[1].i)},d(a){a&&C(e)}}}function Ut(n){let e,l=n[0],t=[];for(let s=0;s<l.length;s+=1)t[s]=Fe(Ze(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);k(s,e,a)},p(s,[a]){if(a&1){l=s[0];let o;for(o=0;o<l.length;o+=1){const c=Ze(s,l,o);t[o]?t[o].p(c,a):(t[o]=Fe(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:U,o:U,d(s){fe(t,s),s&&C(e)}}}function Wt(n){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class Et extends Q{constructor(e){super();x(this,e,Wt,Ut,ee,{})}}function Ge(n,e,l){const t=n.slice();return t[1]=e[l],t}function Ke(n){let e,l=n[1].start.h.toString().padStart(2,"0")+"",t,s,a=n[1].start.m.toString().padStart(2,"0")+"",o,c,i=n[1].end.h.toString().padStart(2,"0")+"",u,f,$=n[1].end.m.toString().padStart(2,"0")+"",h,_;return{c(){e=p("div"),t=v(l),s=v(":"),o=v(a),c=v(" - "),u=v(i),f=v(":"),h=v($),_=b(),m(e,"class","appointment svelte-yc4ag7"),K(e,"left",10+(n[1].startMin-440)*2+"px"),K(e,"width",(n[1].endMin-n[1].startMin)*2-2+"px"),K(e,"height","40px"),K(e,"top","10px")},m(g,d){k(g,e,d),r(e,t),r(e,s),r(e,o),r(e,c),r(e,u),r(e,f),r(e,h),r(e,_)},p:U,d(g){g&&C(e)}}}function Ot(n){let e,l=n[0],t=[];for(let s=0;s<l.length;s+=1)t[s]=Ke(Ge(n,l,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=de()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);k(s,e,a)},p(s,[a]){if(a&1){l=s[0];let o;for(o=0;o<l.length;o+=1){const c=Ge(s,l,o);t[o]?t[o].p(c,a):(t[o]=Ke(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:U,o:U,d(s){fe(t,s),s&&C(e)}}}function Pt(n){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class Ht extends Q{constructor(e){super();x(this,e,Pt,Ot,ee,{})}}function Ve(n){let e,l,t=n[0].subjects.toString().toUpperCase()+"",s,a,o,c,i,u=n[0].locations+"",f,$,h,_,g,d=n[0].teachers.length>1?"s":"",w,j,B=n[0].teachers.toString().toUpperCase()+"",W,X,E,Z,J,te=le(n[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",F,G,L,R,D,Y=n[0].classes.length>1?"s":"",M,A,I=(n[0].classes.length?n[0].classes:"Unknown")+"",O,re,P,N=n[0].changeWarning&&Xe(n);return{c(){e=p("h3"),l=v("Information for "),s=v(t),a=b(),o=p("p"),c=p("b"),c.textContent="Location",i=v(": "),f=v(u),$=b(),h=p("p"),_=p("b"),g=v("Teacher"),w=v(d),j=v(": "),W=v(B),X=b(),E=p("p"),Z=p("b"),Z.textContent="Timestamp",J=v(": "),F=v(te),G=b(),L=p("p"),R=p("b"),D=v("Group"),M=v(Y),A=v(": "),O=v(I),re=b(),N&&N.c(),P=de(),m(e,"class","svelte-13l868e"),m(o,"class","svelte-13l868e"),m(h,"class","svelte-13l868e"),m(E,"class","svelte-13l868e"),m(L,"class","svelte-13l868e")},m(y,S){k(y,e,S),r(e,l),r(e,s),k(y,a,S),k(y,o,S),r(o,c),r(o,i),r(o,f),k(y,$,S),k(y,h,S),r(h,_),r(_,g),r(_,w),r(h,j),r(h,W),k(y,X,S),k(y,E,S),r(E,Z),r(E,J),r(E,F),k(y,G,S),k(y,L,S),r(L,R),r(R,D),r(R,M),r(L,A),r(L,O),k(y,re,S),N&&N.m(y,S),k(y,P,S)},p(y,S){S&1&&t!==(t=y[0].subjects.toString().toUpperCase()+"")&&T(s,t),S&1&&u!==(u=y[0].locations+"")&&T(f,u),S&1&&d!==(d=y[0].teachers.length>1?"s":"")&&T(w,d),S&1&&B!==(B=y[0].teachers.toString().toUpperCase()+"")&&T(W,B),S&1&&te!==(te=le(y[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&T(F,te),S&1&&Y!==(Y=y[0].classes.length>1?"s":"")&&T(M,Y),S&1&&I!==(I=(y[0].classes.length?y[0].classes:"Unknown")+"")&&T(O,I),y[0].changeWarning?N?N.p(y,S):(N=Xe(y),N.c(),N.m(P.parentNode,P)):N&&(N.d(1),N=null)},d(y){y&&C(e),y&&C(a),y&&C(o),y&&C($),y&&C(h),y&&C(X),y&&C(E),y&&C(G),y&&C(L),y&&C(re),N&&N.d(y),y&&C(P)}}}function Xe(n){let e,l,t,s,a,o,c=n[0].changeWarning+"",i;return{c(){e=p("hr"),l=b(),t=p("p"),s=p("b"),s.textContent="Warning",a=v(":"),o=p("br"),i=v(c),m(e,"class","svelte-13l868e"),m(t,"class","svelte-13l868e")},m(u,f){k(u,e,f),k(u,l,f),k(u,t,f),r(t,s),r(t,a),r(t,o),r(t,i)},p(u,f){f&1&&c!==(c=u[0].changeWarning+"")&&T(i,c)},d(u){u&&C(e),u&&C(l),u&&C(t)}}}function qt(n){let e,l,t,s,a,o,c,i=n[0]&&Ve(n);return{c(){e=p("div"),l=b(),t=p("div"),s=p("button"),s.textContent="close",a=b(),i&&i.c(),m(e,"class","shade svelte-13l868e"),z(e,"hidden",!n[1]),m(s,"class","material-icons svelte-13l868e"),m(t,"class","dialog svelte-13l868e"),z(t,"hidden",!n[1])},m(u,f){k(u,e,f),k(u,l,f),k(u,t,f),r(t,s),r(t,a),i&&i.m(t,null),o||(c=[q(e,"click",n[2]),q(s,"click",n[2])],o=!0)},p(u,[f]){f&2&&z(e,"hidden",!u[1]),u[0]?i?i.p(u,f):(i=Ve(u),i.c(),i.m(t,null)):i&&(i.d(1),i=null),f&2&&z(t,"hidden",!u[1])},i:U,o:U,d(u){u&&C(e),u&&C(l),u&&C(t),i&&i.d(),o=!1,ke(c)}}}function Zt(n,e,l){le.extend(Ne),le.extend(Me),le.extend(De);let t,s;nt.subscribe(o=>l(0,t=o)),Se.subscribe(o=>l(1,s=o));function a(){Se.set(!1)}return[t,s,a]}class Ft extends Q{constructor(e){super();x(this,e,Zt,qt,ee,{})}}function Je(n,e,l){const t=n.slice();return t[9]=e[l],t}function Gt(n){let e;return{c(){e=v("Loading...")},m(l,t){k(l,e,t)},p:U,d(l){l&&C(e)}}}function Kt(n){let e;function l(a,o){return a[1].id?Xt:Vt}let t=l(n),s=t(n);return{c(){s.c(),e=de()},m(a,o){s.m(a,o),k(a,e,o)},p(a,o){t===(t=l(a))&&s?s.p(a,o):(s.d(1),s=t(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&C(e)}}}function Vt(n){let e;return{c(){e=v("No schedule selected.")},m(l,t){k(l,e,t)},p:U,d(l){l&&C(e)}}}function Xt(n){let e,l=n[1].type+"",t,s,a;return{c(){e=v("Schedule for "),t=v(l),s=b(),a=v(n[4])},m(o,c){k(o,e,c),k(o,t,c),k(o,s,c),k(o,a,c)},p(o,c){c&2&&l!==(l=o[1].type+"")&&T(t,l),c&16&&T(a,o[4])},d(o){o&&C(e),o&&C(t),o&&C(s),o&&C(a)}}}function Qe(n){let e,l;return e=new Yt({props:{appointment:n[9]}}),{c(){ne(e.$$.fragment)},m(t,s){se(e,t,s),l=!0},p(t,s){const a={};s&1&&(a.appointment=t[9]),e.$set(a)},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Jt(n){let e,l,t,s,a,o=parseInt(Be().format("W"))+n[3]+"",c,i,u,f,$,h,_,g,d,w,j,B,W,X,E,Z,J,te;function F(M,A){return M[2]?Gt:Kt}let G=F(n),L=G(n);w=new Et({}),B=new Ht({});let R=n[0],D=[];for(let M=0;M<R.length;M+=1)D[M]=Qe(Je(n,R,M));const Y=M=>V(D[M],1,1,()=>{D[M]=null});return E=new Ft({}),{c(){e=p("h3"),l=p("button"),l.textContent="arrow_back_ios_new",t=b(),s=p("span"),a=v("Week: "),c=v(o),i=b(),u=p("button"),u.textContent="arrow_forward_ios",f=b(),$=p("div"),h=b(),_=p("h2"),L.c(),g=b(),d=p("div"),ne(w.$$.fragment),j=b(),ne(B.$$.fragment),W=b();for(let M=0;M<D.length;M+=1)D[M].c();X=b(),ne(E.$$.fragment),m(l,"class","material-icons svelte-1dkftb3"),m(s,"class","svelte-1dkftb3"),m(u,"class","material-icons svelte-1dkftb3"),m($,"class","sep svelte-1dkftb3"),m(e,"class","svelte-1dkftb3"),m(_,"class","svelte-1dkftb3"),m(d,"class","grid svelte-1dkftb3")},m(M,A){k(M,e,A),r(e,l),r(e,t),r(e,s),r(s,a),r(s,c),r(e,i),r(e,u),r(e,f),r(e,$),k(M,h,A),k(M,_,A),L.m(_,null),k(M,g,A),k(M,d,A),se(w,d,null),r(d,j),se(B,d,null),r(d,W);for(let I=0;I<D.length;I+=1)D[I].m(d,null);r(d,X),se(E,d,null),Z=!0,J||(te=[q(l,"click",n[5]),q(u,"click",n[6])],J=!0)},p(M,[A]){if((!Z||A&8)&&o!==(o=parseInt(Be().format("W"))+M[3]+"")&&T(c,o),G===(G=F(M))&&L?L.p(M,A):(L.d(1),L=G(M),L&&(L.c(),L.m(_,null))),A&1){R=M[0];let I;for(I=0;I<R.length;I+=1){const O=Je(M,R,I);D[I]?(D[I].p(O,A),H(D[I],1)):(D[I]=Qe(O),D[I].c(),H(D[I],1),D[I].m(d,X))}for(xe(),I=R.length;I<D.length;I+=1)Y(I);et()}},i(M){if(!Z){H(w.$$.fragment,M),H(B.$$.fragment,M);for(let A=0;A<R.length;A+=1)H(D[A]);H(E.$$.fragment,M),Z=!0}},o(M){V(w.$$.fragment,M),V(B.$$.fragment,M),D=D.filter(Boolean);for(let A=0;A<D.length;A+=1)V(D[A]);V(E.$$.fragment,M),Z=!1},d(M){M&&C(e),M&&C(h),M&&C(_),L.d(),M&&C(g),M&&C(d),oe(w),oe(B),fe(D,M),oe(E),J=!1,ke(te)}}}function Qt(n,e,l){le.extend(Ne),le.extend(Me),le.extend(De);let t=[],s=[],a={id:""},o=!1,c=0,i;lt.subscribe(async h=>{if(h){if(l(2,o=!0),l(1,a=h),u(h.type,h.id),h.type=="teacher"){const _=await _t(h.id);l(4,i=`${_.prefix||""} ${_.lastName||""} (${_.code})`)}else{const _=await ht(h.id);l(4,i=`${_.firstName||""} ${_.prefix||""} ${_.lastName||""} (${_.code})`)}l(2,o=!1)}});async function u(h,_){let g;l(0,s=[]),h=="student"?g=await pt(_,c+1):g=await ft(_,c+1),t=ye(g.response.data,"start"),l(0,s=[]);for(let d=0;d<t.length;d++){const w=t[d],j=new Date(w.start*1e3).getDay()-new Date(pe(ue.prev)).getDay()+2;s.push({rowNr:j,startMin:new Date(w.start*1e3).getHours()*60+new Date(w.start*1e3).getMinutes(),endMin:new Date(w.end*1e3).getHours()*60+new Date(w.end*1e3).getMinutes(),slotName:w.startTimeSlotName,locations:w.locations,teachers:w.teachers,subjects:w.subjects,cancelled:w.cancelled,changeWarning:w.changeDescription,teacherChanged:w.teacherChanged,locationChanged:w.locationChanged,timeChanged:w.timeChanged,start:{h:new Date(w.start*1e3).getHours(),m:new Date(w.start*1e3).getMinutes()},end:{h:new Date(w.end*1e3).getHours(),m:new Date(w.end*1e3).getMinutes()},classes:w.groups,startTimeStamp:w.start,endTimeStamp:w.end})}l(2,o=!1)}function f(){l(3,c-=1),u(a.type,a.id)}function $(){l(3,c+=1),u(a.type,a.id)}return[s,a,o,c,i,f,$,u]}class xt extends Q{constructor(e){super();x(this,e,Qt,Jt,ee,{openSched:7})}get openSched(){return this.$$.ctx[7]}}function el(n){let e,l,t,s,a;return l=new xt({}),{c(){e=p("div"),ne(l.$$.fragment),m(e,"class","content svelte-1v6jm7o"),z(e,"noRightBar",n[0])},m(o,c){k(o,e,c),se(l,e,null),t=!0,s||(a=q(e,"mousedown",n[1]),s=!0)},p(o,[c]){c&1&&z(e,"noRightBar",o[0])},i(o){t||(H(l.$$.fragment,o),t=!0)},o(o){V(l.$$.fragment,o),t=!1},d(o){o&&C(e),oe(l),s=!1,a()}}}function tl(n,e,l){let t;me.subscribe(a=>l(0,t=!a));function s(a){const o=a.composedPath();let c=!0;for(let i=0;i<o.length;i++){const u=o[i];if(u.classList&&u.classList.contains("sidebar")){c=!1;break}}c&&me.set(!1)}return[t,s]}class ll extends Q{constructor(e){super();x(this,e,tl,el,ee,{})}}function nl(n){let e,l,t,s,a,o,c;return l=new ll({}),s=new At({}),o=new jt({}),{c(){e=p("div"),ne(l.$$.fragment),t=b(),ne(s.$$.fragment),a=b(),ne(o.$$.fragment),m(e,"class","bg svelte-36otyo")},m(i,u){k(i,e,u),se(l,e,null),r(e,t),se(s,e,null),r(e,a),se(o,e,null),c=!0},p:U,i(i){c||(H(l.$$.fragment,i),H(s.$$.fragment,i),H(o.$$.fragment,i),c=!0)},o(i){V(l.$$.fragment,i),V(s.$$.fragment,i),V(o.$$.fragment,i),c=!1},d(i){i&&C(e),oe(l),oe(s),oe(o)}}}class sl extends Q{constructor(e){super();x(this,e,null,nl,ee,{})}}function ol(n){let e,l;return e=new bt({}),{c(){ne(e.$$.fragment)},m(t,s){se(e,t,s),l=!0},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function al(n){let e,l;return e=new sl({}),{c(){ne(e.$$.fragment)},m(t,s){se(e,t,s),l=!0},i(t){l||(H(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function rl(n){let e,l,t,s;const a=[al,ol],o=[];function c(i,u){return i[0]?0:1}return l=c(n),t=o[l]=a[l](n),{c(){e=p("div"),t.c()},m(i,u){k(i,e,u),o[l].m(e,null),s=!0},p(i,[u]){let f=l;l=c(i),l!==f&&(xe(),V(o[f],1,1,()=>{o[f]=null}),et(),t=o[l],t||(t=o[l]=a[l](i),t.c()),H(t,1),t.m(e,null))},i(i){s||(H(t),s=!0)},o(i){V(t),s=!1},d(i){i&&C(e),o[l].d()}}}function il(n,e,l){let t;return ae.subscribe(s=>{l(0,t=s)}),Ce(async()=>{await st()}),[t]}class cl extends Q{constructor(e){super();x(this,e,il,rl,ee,{})}}new cl({target:document.getElementById("app")});
