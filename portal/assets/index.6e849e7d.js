import{w as Me,d as K,a as Ye,b as He,c as Ae,g as ke,n as De,F as wt,S as se,i as le,s as ne,e as d,f as b,h as m,t as J,j as C,k as o,l as R,m as O,o as w,p as ye,q as Ie,r as y,u as Se,v as Ce,x as V,y as Y,z as Be,A as H,B as A,C as T,D as q,E as B,G as be,H as Te,I as je,R as ht,L as qe,J as kt,K as Ne}from"./vendor.9bbbbdc0.js";const yt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}};yt();const Ue="1201",St="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",Mt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ee=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["classSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),Le=Me(),Ge=Me(!0),_t=Me();let Oe=Me(!1);const $t=Me();let P="/portal";K.extend(Ye);K.extend(He);K.extend(Ae);async function ge(n,e,s,t=!0,l){if(ke(ae)||l){const a={headers:{Authorization:`Bearer ${n}`},method:"GET"},r=await await fetch(`https://${e}.zportal.nl/api/v3/${s}`,l?{}:a);return t?r.json():r.text()}return t?{}:"{}"}async function Dt(n,e){const s={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${n}`,s)).json()}let ae=Me(!1),de,fe;async function We(n,e){if(localStorage.getItem("accessToken")){de=localStorage.getItem("accessToken"),fe=localStorage.getItem("school");const s=await(await fetch(`https://${fe}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${de}`}})).json();return ae.set(s.response.status==200),ae?(console.log("Zermelo login succeeded from stored access token"),Le.set(s.response.data)):console.log("Zermelo login failed from stored access token: server returned "+s.response.status),ke(ae)}if(!n||!e)return console.log("Zermelo login failed!"),console.error(n,e),!1;try{const s=await Dt(e,n);s.access_token&&(localStorage.setItem("accessToken",s.access_token),localStorage.setItem("school",n),ae.set(!0),Le.set((await(await fetch(`https://${fe}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${de}`}})).json()).response.data)),ke(ae)&&console.log("Zermelo login succeeded from provided data")}catch{ae.set(!1)}return ke(ae)}function Nt(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),ae.set(!1),De(`${P}/login`)}async function Pe(){return await ge(de,fe,`${St}${Ue}`)}async function ze(){return await ge(de,fe,`${Mt}${Ue}`)}async function Tt(n,e=0){const s=$e(he.prev)+601200*e,t=$e(he.next)+601200*e;return await ge(de,fe,`appointments?start=${s}&end=${t}&teachers=${n}&fields=${Ee.get("teacherSchedule")}`,!0)}async function jt(n,e=0){const s=$e(he.prev)+601200*e,t=$e(he.next)+601200*e;return await ge(de,fe,`appointments?user=${n}&start=${s}&end=${t}&fields=${Ee.get("studentSchedule")}`,!0)}async function gt(n){const e=$e(he.prev),s=$e(he.next),t=await ge(de,fe,`appointments?valid=true&start=${e}&end=${s}&fields=${Ee.get("getStudentClassAppointments")}&possibleStudents=${n}`,!0);let l;const a=t.response.data;for(let r=0;r<a.length;r++)if(a[r].groupsInDepartments.length>0&&a[r].subjects.length>0){if(a[r].subjects[0]=="mtr"){l=a[r].groupsInDepartments[0];break}continue}return(await ge(de,fe,`groupindepartments?id=${l}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function $e(n){let e;return n==he.prev?e=K().weekday(-7).unix():e=K().weekday(0).unix(),e}async function qt(n){const e=Array.prototype.concat((await ze()).response.data,(await Pe()).response.data),s={includeScore:!0,keys:["firstName","lastName","code"]};return new wt(e,s).search(n)}async function It(n){const e=(await Pe()).response.data;for(let s=0;s<e.length;s++)if(e[s].code==n)return e[s];return{}}async function Lt(n){const e=(await ze()).response.data;for(let s=0;s<e.length;s++)if(e[s].code==n)return e[s];return{}}function ve(n,e){return n.sort(function(s,t){var l=s[e],a=t[e];return l<a?-1:l>a?1:0})}async function Wt(n,e){const s=$e(he.prev)+601200*e,t=$e(he.next)+601200*e;return await ge(de,fe,`appointments?valid=true&start=${s}&end=${t}&fields=${Ee.get("classSchedule")}&schoolInSchoolYear=${Ue}&containsStudentsFromGroupInDepartment=${n}`)}var he=(n=>(n[n.prev=0]="prev",n[n.next=1]="next",n))(he||{});function Yt(n){let e,s,t,l,a,r,i,p,f,h,_,$,c;return{c(){e=d("div"),s=d("div"),t=d("h1"),t.textContent="Login",l=b(),a=d("p"),a.textContent="Please provide login information to continue to Zermelo.",r=b(),i=d("input"),p=b(),f=d("input"),h=b(),_=d("button"),_.textContent="Login",m(t,"class","svelte-1w0gyqm"),m(a,"class","svelte-1w0gyqm"),m(i,"placeholder","schoolname"),m(i,"class","svelte-1w0gyqm"),J(i,"error",n[2]),m(f,"placeholder","pairing code"),m(f,"type","number"),m(f,"class","svelte-1w0gyqm"),J(f,"error",n[2]),m(_,"class","svelte-1w0gyqm"),m(s,"class","centered svelte-1w0gyqm"),m(e,"class","svelte-1w0gyqm")},m(u,k){C(u,e,k),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),n[4](i),o(s,p),o(s,f),n[5](f),o(s,h),o(s,_),$||(c=R(_,"click",n[3]),$=!0)},p(u,[k]){k&4&&J(i,"error",u[2]),k&4&&J(f,"error",u[2])},i:O,o:O,d(u){u&&w(e),n[4](null),n[5](null),$=!1,c()}}}function Ht(n,e,s){let t,l,a;ye(async()=>{await We()&&De(`${P}/login`)});async function r(){if(!t.value||!l.value){i();return}await We(t.value,l.value),ke(ae)?window.location.reload():i()}function i(){s(2,a=!0),setTimeout(()=>{s(2,a=!1)},3e3)}function p(h){Ie[h?"unshift":"push"](()=>{t=h,s(0,t)})}function f(h){Ie[h?"unshift":"push"](()=>{l=h,s(1,l)})}return[t,l,a,r,p,f]}class At extends se{constructor(e){super();le(this,e,Ht,Yt,ne,{})}}function Re(n,e){_t.set({type:n,id:e}),De(`${P}/schedule/people`)}function Ze(n,e,s){const t=n.slice();return t[1]=e[s],t}function Fe(n){let e,s=n[1].icon+"",t,l,a,r,i;return{c(){e=d("button"),t=y(s),l=b(),m(e,"class","material-icons svelte-10ub0dz"),m(e,"title",a=n[1].caption)},m(p,f){C(p,e,f),o(e,t),o(e,l),r||(i=R(e,"click",n[1].action),r=!0)},p(p,f){n=p},d(p){p&&w(e),r=!1,i()}}}function Bt(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=Fe(Ze(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=Se()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=Ze(l,s,r);t[r]?t[r].p(i,a):(t[r]=Fe(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:O,o:O,d(l){Ce(t,l),l&&w(e)}}}function Ut(n){return[[{icon:"logout",action:()=>{Nt()},caption:"Logout"},{icon:"calendar_today",action:()=>{Re("student",ke(Le)[0].code)},caption:"Show own calendar"}]]}class Et extends se{constructor(e){super();le(this,e,Ut,Bt,ne,{})}}function Ke(n,e,s){const t=n.slice();return t[10]=e[s],t}function Je(n){let e,s,t,l=n[3],a=[];for(let r=0;r<l.length;r+=1)a[r]=Qe(Ke(n,l,r));return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();m(e,"class","searchResults svelte-1ve9yp3"),V(e,"top",n[2]+"px"),V(e,"left",n[1]+"px")},m(r,i){C(r,e,i);for(let p=0;p<a.length;p+=1)a[p].m(e,null);s||(t=R(e,"click",n[9]),s=!0)},p(r,i){if(i&9){l=r[3];let p;for(p=0;p<l.length;p+=1){const f=Ke(r,l,p);a[p]?a[p].p(f,i):(a[p]=Qe(f),a[p].c(),a[p].m(e,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}i&4&&V(e,"top",r[2]+"px"),i&2&&V(e,"left",r[1]+"px")},d(r){r&&w(e),Ce(a,r),s=!1,t()}}}function Xe(n){let e,s=n[10].item.code.toUpperCase()+"",t,l;return{c(){e=y("("),t=y(s),l=y(")")},m(a,r){C(a,e,r),C(a,t,r),C(a,l,r)},p(a,r){r&8&&s!==(s=a[10].item.code.toUpperCase()+"")&&Y(t,s)},d(a){a&&w(e),a&&w(t),a&&w(l)}}}function Qe(n){let e,s=(n[10].item.firstName||"")+"",t,l,a=(n[10].item.prefix||"")+"",r,i,p=(n[10].item.lastName||"")+"",f,h,_,$,c,u=n[10].item.isEmployee&&Xe(n);function k(){return n[8](n[10])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),f=y(p),h=b(),u&&u.c(),_=b(),m(e,"class","svelte-1ve9yp3")},m(S,L){C(S,e,L),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),u&&u.m(e,null),o(e,_),$||(c=R(e,"click",k),$=!0)},p(S,L){n=S,L&8&&s!==(s=(n[10].item.firstName||"")+"")&&Y(t,s),L&8&&a!==(a=(n[10].item.prefix||"")+"")&&Y(r,a),L&8&&p!==(p=(n[10].item.lastName||"")+"")&&Y(f,p),n[10].item.isEmployee?u?u.p(n,L):(u=Xe(n),u.c(),u.m(e,_)):u&&(u.d(1),u=null)},d(S){S&&w(e),u&&u.d(),$=!1,c()}}}function Pt(n){let e,s,t,l,a,r,i,p=!n[5]&&n[4]&&Je(n);return{c(){e=d("input"),s=b(),t=d("button"),t.textContent="search",l=b(),p&&p.c(),a=Se(),m(e,"placeholder","Search people..."),m(e,"class","svelte-1ve9yp3"),m(t,"class","material-icons svelte-1ve9yp3")},m(f,h){C(f,e,h),n[7](e),C(f,s,h),C(f,t,h),C(f,l,h),p&&p.m(f,h),C(f,a,h),r||(i=[R(e,"focus",n[6]),R(e,"blur",n[6]),R(e,"input",n[6])],r=!0)},p(f,[h]){!f[5]&&f[4]?p?p.p(f,h):(p=Je(f),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},i:O,o:O,d(f){f&&w(e),n[7](null),f&&w(s),f&&w(t),f&&w(l),p&&p.d(f),f&&w(a),r=!1,Be(i)}}}function Rt(n,e,s){let t,l,a,r=[],i="",p=!1;ye(()=>{s(1,l=t.offsetLeft-5),s(2,a=t.offsetTop+30)});async function f(){s(4,i=t.value),s(3,r=await qt(t.value)),s(5,p=document.activeElement!=t)}function h(c){Ie[c?"unshift":"push"](()=>{t=c,s(0,t)})}return[t,l,a,r,i,p,f,h,c=>{s(0,t.value="",t),Re(c.item.isEmployee?"teacher":"student",c.item.code)},()=>t.focus()]}class Ot extends se{constructor(e){super();le(this,e,Rt,Pt,ne,{})}}function zt(n){let e,s,t,l,a,r,i,p,f,h=n[0].firstName+"",_,$,c=(n[0].prefix||"")+"",u,k,S=n[0].lastName+"",L,W,D,F,X,Q;return a=new Et({}),{c(){e=d("div"),s=d("div"),s.textContent=`Zermelo Hub | ${fe}`,t=b(),l=d("div"),H(a.$$.fragment),r=b(),i=d("div"),p=b(),f=d("p"),_=y(h),$=b(),u=y(c),k=b(),L=y(S),W=b(),D=d("span"),D.textContent="account_circle",F=b(),X=d("div"),m(s,"class","header svelte-1l29745"),m(i,"class","sep svelte-1l29745"),m(f,"class","svelte-1l29745"),m(D,"class","material-icons svelte-1l29745"),m(l,"class","right svelte-1l29745"),m(e,"class","tb svelte-1l29745"),m(X,"class","accent svelte-1l29745")},m(I,E){C(I,e,E),o(e,s),o(e,t),o(e,l),A(a,l,null),o(l,r),o(l,i),o(l,p),o(l,f),o(f,_),o(f,$),o(f,u),o(f,k),o(f,L),o(l,W),o(l,D),C(I,F,E),C(I,X,E),Q=!0},p(I,[E]){(!Q||E&1)&&h!==(h=I[0].firstName+"")&&Y(_,h),(!Q||E&1)&&c!==(c=(I[0].prefix||"")+"")&&Y(u,c),(!Q||E&1)&&S!==(S=I[0].lastName+"")&&Y(L,S)},i(I){Q||(T(a.$$.fragment,I),Q=!0)},o(I){q(a.$$.fragment,I),Q=!1},d(I){I&&w(e),B(a),I&&w(F),I&&w(X)}}}function Gt(n,e,s){let t;return Le.subscribe(l=>{s(0,t=l[0])}),[t]}class Zt extends se{constructor(e){super();le(this,e,Gt,zt,ne,{})}}function Ve(n){let e,s,t=(n[0].subjects.toString().toUpperCase()||"appointment")+"",l,a,r,i,p,f=(n[0].locations.length?n[0].locations:"None")+"",h,_,$,c,u,k=n[0].teachers.length>1?"s":"",S,L,W=n[0].teachers.join(" ").toUpperCase()+"",D,F,X,Q,I,E=K(n[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",z,j,ee,re,ue,oe=K(n[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",pe,ie,te,me,G,_e=n[0].classes.length>1?"s":"",ce,Z,x=(n[0].classes.length?n[0].classes:"Unknown")+"",N,we,g,M=n[0].changeWarning&&xe(n);return{c(){e=d("h3"),s=y("Information for "),l=y(t),a=b(),r=d("p"),i=d("b"),i.textContent="Location",p=y(": "),h=y(f),_=b(),$=d("p"),c=d("b"),u=y("Teacher"),S=y(k),L=y(": "),D=y(W),F=b(),X=d("p"),Q=d("b"),Q.textContent="Start",I=y(": "),z=y(E),j=b(),ee=d("p"),re=d("b"),re.textContent="End",ue=y(": "),pe=y(oe),ie=b(),te=d("p"),me=d("b"),G=y("Group"),ce=y(_e),Z=y(": "),N=y(x),we=b(),M&&M.c(),g=Se(),m(e,"class","svelte-t0yfsj"),m(i,"class","svelte-t0yfsj"),m(r,"class","svelte-t0yfsj"),m(c,"class","svelte-t0yfsj"),m($,"class","svelte-t0yfsj"),m(Q,"class","svelte-t0yfsj"),m(X,"class","svelte-t0yfsj"),m(re,"class","svelte-t0yfsj"),m(ee,"class","svelte-t0yfsj"),m(me,"class","svelte-t0yfsj"),m(te,"class","svelte-t0yfsj")},m(v,U){C(v,e,U),o(e,s),o(e,l),C(v,a,U),C(v,r,U),o(r,i),o(r,p),o(r,h),C(v,_,U),C(v,$,U),o($,c),o(c,u),o(c,S),o($,L),o($,D),C(v,F,U),C(v,X,U),o(X,Q),o(X,I),o(X,z),C(v,j,U),C(v,ee,U),o(ee,re),o(ee,ue),o(ee,pe),C(v,ie,U),C(v,te,U),o(te,me),o(me,G),o(me,ce),o(te,Z),o(te,N),C(v,we,U),M&&M.m(v,U),C(v,g,U)},p(v,U){U&1&&t!==(t=(v[0].subjects.toString().toUpperCase()||"appointment")+"")&&Y(l,t),U&1&&f!==(f=(v[0].locations.length?v[0].locations:"None")+"")&&Y(h,f),U&1&&k!==(k=v[0].teachers.length>1?"s":"")&&Y(S,k),U&1&&W!==(W=v[0].teachers.join(" ").toUpperCase()+"")&&Y(D,W),U&1&&E!==(E=K(v[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&Y(z,E),U&1&&oe!==(oe=K(v[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&Y(pe,oe),U&1&&_e!==(_e=v[0].classes.length>1?"s":"")&&Y(ce,_e),U&1&&x!==(x=(v[0].classes.length?v[0].classes:"Unknown")+"")&&Y(N,x),v[0].changeWarning?M?M.p(v,U):(M=xe(v),M.c(),M.m(g.parentNode,g)):M&&(M.d(1),M=null)},d(v){v&&w(e),v&&w(a),v&&w(r),v&&w(_),v&&w($),v&&w(F),v&&w(X),v&&w(j),v&&w(ee),v&&w(ie),v&&w(te),v&&w(we),M&&M.d(v),v&&w(g)}}}function xe(n){let e,s,t,l,a,r,i=n[0].changeWarning+"",p;return{c(){e=d("hr"),s=b(),t=d("p"),l=d("b"),l.textContent="Warning",a=y(":"),r=d("br"),p=y(i),m(e,"class","svelte-t0yfsj"),m(l,"class","svelte-t0yfsj"),m(r,"class","svelte-t0yfsj"),m(t,"class","svelte-t0yfsj")},m(f,h){C(f,e,h),C(f,s,h),C(f,t,h),o(t,l),o(t,a),o(t,r),o(t,p)},p(f,h){h&1&&i!==(i=f[0].changeWarning+"")&&Y(p,i)},d(f){f&&w(e),f&&w(s),f&&w(t)}}}function Ft(n){let e,s,t,l,a,r,i,p=n[0]&&Ve(n);return{c(){e=d("div"),s=b(),t=d("div"),l=d("button"),l.textContent="close",a=b(),p&&p.c(),m(e,"class","shade svelte-t0yfsj"),J(e,"hidden",!n[1]),m(l,"class","material-icons svelte-t0yfsj"),m(t,"class","dialog svelte-t0yfsj"),J(t,"hidden",!n[1])},m(f,h){C(f,e,h),C(f,s,h),C(f,t,h),o(t,l),o(t,a),p&&p.m(t,null),r||(i=[R(e,"click",n[2]),R(l,"click",n[2])],r=!0)},p(f,[h]){h&2&&J(e,"hidden",!f[1]),f[0]?p?p.p(f,h):(p=Ve(f),p.c(),p.m(t,null)):p&&(p.d(1),p=null),h&2&&J(t,"hidden",!f[1])},i:O,o:O,d(f){f&&w(e),f&&w(s),f&&w(t),p&&p.d(),r=!1,Be(i)}}}function Kt(n,e,s){K.extend(Ye),K.extend(He),K.extend(Ae);let t,l;$t.subscribe(r=>s(0,t=r)),Oe.subscribe(r=>s(1,l=r));function a(){Oe.set(!1)}return[t,l,a]}class Jt extends se{constructor(e){super();le(this,e,Kt,Ft,ne,{})}}function Xt(n){let e,s,t,l,a,r,i,p,f,h=(n[0].classes||"")+"",_,$,c;return{c(){e=d("div"),s=d("p"),t=d("b"),l=y(n[5]),a=b(),r=d("p"),i=y(n[6]),p=b(),f=d("p"),_=y(h),m(s,"class","svelte-qab7p0"),m(r,"class","svelte-qab7p0"),m(f,"class","classes svelte-qab7p0"),m(e,"class","appointment svelte-qab7p0"),V(e,"left",n[2]+"px"),V(e,"width",n[3]+"px"),V(e,"top",n[4]+"px"),J(e,"cancelled",n[0].cancelled),J(e,"changed",n[1])},m(u,k){C(u,e,k),o(e,s),o(s,t),o(t,l),o(e,a),o(e,r),o(r,i),o(e,p),o(e,f),o(f,_),$||(c=R(e,"click",n[7]),$=!0)},p(u,[k]){k&32&&Y(l,u[5]),k&64&&Y(i,u[6]),k&1&&h!==(h=(u[0].classes||"")+"")&&Y(_,h),k&4&&V(e,"left",u[2]+"px"),k&8&&V(e,"width",u[3]+"px"),k&16&&V(e,"top",u[4]+"px"),k&1&&J(e,"cancelled",u[0].cancelled),k&2&&J(e,"changed",u[1])},i:O,o:O,d(u){u&&w(e),$=!1,c()}}}function Qt(n,e,s){let{appointment:t}=e;function l(){$t.set(t),Oe.set(!0)}let a,r,i,p,f,h;return ye(()=>{s(1,a=t.teacherChanged||t.timeChanged||t.locationChanged),s(2,r=(t.startMin-440)*2),s(3,i=(t.endMin-t.startMin)*2-2),s(4,p=42+t.rowNr*80-80),s(5,f=`${t.subjects[0]||t.teachers.join(" ").toUpperCase()} - ${t.locations.length?t.locations:"0_00"}`),s(6,h=t.subjects[0]?t.teachers.join(" ").toUpperCase():"")}),n.$$set=_=>{"appointment"in _&&s(0,t=_.appointment)},[t,a,r,i,p,f,h,l]}class vt extends se{constructor(e){super();le(this,e,Qt,Xt,ne,{appointment:0})}}function et(n,e,s){const t=n.slice();return t[1]=e[s],t}function tt(n){let e,s=n[1].d+"",t,l;return{c(){e=d("div"),t=y(s),l=b(),m(e,"class","appointment svelte-14e4oll"),V(e,"left","0px"),V(e,"width","80px"),V(e,"top",2+80*n[1].i-40+"px"),J(e,"today",new Date().getDay()==n[1].i)},m(a,r){C(a,e,r),o(e,t),o(e,l)},p(a,r){r&1&&J(e,"today",new Date().getDay()==a[1].i)},d(a){a&&w(e)}}}function Vt(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=tt(et(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=Se()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=et(l,s,r);t[r]?t[r].p(i,a):(t[r]=tt(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:O,o:O,d(l){Ce(t,l),l&&w(e)}}}function xt(n){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class bt extends se{constructor(e){super();le(this,e,xt,Vt,ne,{})}}function st(n,e,s){const t=n.slice();return t[1]=e[s],t}function lt(n){let e,s=n[1].start.h.toString().padStart(2,"0")+"",t,l,a=n[1].start.m.toString().padStart(2,"0")+"",r,i,p=n[1].end.h.toString().padStart(2,"0")+"",f,h,_=n[1].end.m.toString().padStart(2,"0")+"",$,c;return{c(){e=d("div"),t=y(s),l=y(":"),r=y(a),i=y(" - "),f=y(p),h=y(":"),$=y(_),c=b(),m(e,"class","appointment svelte-jp6sc9"),V(e,"left",(n[1].startMin-440)*2+"px"),V(e,"width",(n[1].endMin-n[1].startMin)*2-2+"px"),V(e,"height","40px"),V(e,"top","0px")},m(u,k){C(u,e,k),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),o(e,$),o(e,c)},p:O,d(u){u&&w(e)}}}function es(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=lt(st(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=Se()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=st(l,s,r);t[r]?t[r].p(i,a):(t[r]=lt(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:O,o:O,d(l){Ce(t,l),l&&w(e)}}}function ts(n){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class Ct extends se{constructor(e){super();le(this,e,ts,es,ne,{})}}function nt(n,e,s){const t=n.slice();return t[12]=e[s],t}function ss(n){let e;return{c(){e=y("Loading...")},m(s,t){C(s,e,t)},p:O,d(s){s&&w(e)}}}function ls(n){let e;function s(a,r){return a[1].id?as:ns}let t=s(n),l=t(n);return{c(){l.c(),e=Se()},m(a,r){l.m(a,r),C(a,e,r)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){l.d(a),a&&w(e)}}}function ns(n){let e;return{c(){e=y("No schedule selected.")},m(s,t){C(s,e,t)},p:O,d(s){s&&w(e)}}}function as(n){let e=(n[4]||"Loading...")+"",s;return{c(){s=y(e)},m(t,l){C(t,s,l)},p(t,l){l&16&&e!==(e=(t[4]||"Loading...")+"")&&Y(s,e)},d(t){t&&w(s)}}}function at(n){let e,s;return e=new vt({props:{appointment:n[12]}}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},p(t,l){const a={};l&1&&(a.appointment=t[12]),e.$set(a)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function rs(n){let e,s,t,l,a,r,i,p,f,h,_,$,c,u,k=parseInt(be().format("W"))+n[3]+"",S,L,W,D,F,X,Q,I,E,z,j,ee,re,ue,oe,pe,ie,te,me,G;F=new Ot({});function _e(g,M){return g[2]?ss:ls}let ce=_e(n),Z=ce(n);ee=new bt({}),ue=new Ct({});let x=n[0],N=[];for(let g=0;g<x.length;g+=1)N[g]=at(nt(n,x,g));const we=g=>q(N[g],1,1,()=>{N[g]=null});return{c(){e=d("div"),s=d("h3"),t=d("button"),t.textContent="arrow_back_ios_new",l=b(),a=d("button"),a.textContent="date_range",r=b(),i=d("button"),i.textContent="arrow_forward_ios",p=b(),f=d("button"),f.textContent="list",h=b(),_=d("div"),$=b(),c=d("span"),u=y("Week "),S=y(k),L=b(),W=d("div"),D=b(),H(F.$$.fragment),X=b(),Q=d("div"),I=b(),E=d("h3"),Z.c(),z=b(),j=d("div"),H(ee.$$.fragment),re=b(),H(ue.$$.fragment),oe=b(),pe=d("div"),ie=b();for(let g=0;g<N.length;g+=1)N[g].c();m(t,"class","material-icons"),m(a,"class","material-icons"),m(i,"class","material-icons"),m(f,"class","material-icons"),m(_,"class","sep"),m(c,"class","week"),m(W,"class","sep"),m(Q,"class","sep"),m(e,"class","header"),m(pe,"class","timeline"),V(pe,"left",(n[5]-442)*2+"px"),m(j,"class","grid")},m(g,M){C(g,e,M),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),o(s,p),o(s,f),o(s,h),o(s,_),o(s,$),o(s,c),o(c,u),o(c,S),o(s,L),o(s,W),o(s,D),A(F,s,null),o(s,X),o(s,Q),o(e,I),o(e,E),Z.m(E,null),C(g,z,M),C(g,j,M),A(ee,j,null),o(j,re),A(ue,j,null),o(j,oe),o(j,pe),o(j,ie);for(let v=0;v<N.length;v+=1)N[v].m(j,null);te=!0,me||(G=[R(t,"click",n[6]),R(a,"click",n[8]),R(i,"click",n[7]),R(f,"click",n[10])],me=!0)},p(g,[M]){if((!te||M&8)&&k!==(k=parseInt(be().format("W"))+g[3]+"")&&Y(S,k),ce===(ce=_e(g))&&Z?Z.p(g,M):(Z.d(1),Z=ce(g),Z&&(Z.c(),Z.m(E,null))),(!te||M&32)&&V(pe,"left",(g[5]-442)*2+"px"),M&1){x=g[0];let v;for(v=0;v<x.length;v+=1){const U=nt(g,x,v);N[v]?(N[v].p(U,M),T(N[v],1)):(N[v]=at(U),N[v].c(),T(N[v],1),N[v].m(j,null))}for(Te(),v=x.length;v<N.length;v+=1)we(v);je()}},i(g){if(!te){T(F.$$.fragment,g),T(ee.$$.fragment,g),T(ue.$$.fragment,g);for(let M=0;M<x.length;M+=1)T(N[M]);te=!0}},o(g){q(F.$$.fragment,g),q(ee.$$.fragment,g),q(ue.$$.fragment,g),N=N.filter(Boolean);for(let M=0;M<N.length;M+=1)q(N[M]);te=!1},d(g){g&&w(e),B(F),Z.d(),g&&w(z),g&&w(j),B(ee),B(ue),Ce(N,g),me=!1,Be(G)}}}function os(n,e,s){K.extend(Ye),K.extend(He),K.extend(Ae);let t=[],l=[],a={id:""},r=!1,i=0,p;_t.subscribe(async k=>{if(k)if(s(2,r=!0),s(1,a=k),f(k.type,k.id),k.type=="teacher"){const S=await Lt(k.id);s(4,p=`${S.prefix||""} ${S.lastName||""} (${S.code.toUpperCase()})`),s(2,r=!1)}else{const S=await It(k.id);s(4,p=`${S.firstName||""} ${S.prefix||""} ${S.lastName||""} (${S.code.toUpperCase()})`),s(2,r=!1)}});async function f(k,S){let L;s(0,l=[]),k=="student"?L=await jt(S,i+1):L=await Tt(S,i+1),t=ve(L.response.data,"start"),s(0,l=[]);for(let W=0;W<t.length;W++){const D=t[W],F=new Date(D.start*1e3).getDay()-new Date($e(he.prev)).getDay()+2;l.push({rowNr:F,startMin:new Date(D.start*1e3).getHours()*60+new Date(D.start*1e3).getMinutes(),endMin:new Date(D.end*1e3).getHours()*60+new Date(D.end*1e3).getMinutes(),slotName:D.startTimeSlotName,locations:D.locations,teachers:D.teachers,subjects:D.subjects,cancelled:D.cancelled,changeWarning:D.changeDescription,teacherChanged:D.teacherChanged,locationChanged:D.locationChanged,timeChanged:D.timeChanged,start:{h:new Date(D.start*1e3).getHours(),m:new Date(D.start*1e3).getMinutes()},end:{h:new Date(D.end*1e3).getHours(),m:new Date(D.end*1e3).getMinutes()},classes:D.groups,startTimeStamp:D.start,endTimeStamp:D.end})}s(2,r=!1)}function h(){i+parseInt(be().format("W"))>1&&(s(3,i-=1),f(a.type,a.id))}function _(){i+parseInt(be().format("W"))<52&&(s(3,i+=1),f(a.type,a.id))}function $(){i!=0&&(s(3,i=0),f(a.type,a.id))}let c=0;return setInterval(()=>{s(5,c=60*parseInt(K().format("HH"))+parseInt(K().format("m")))},300),[l,a,r,i,p,c,h,_,$,f,()=>{De(`${P}/everyone`)}]}class is extends se{constructor(e){super();le(this,e,os,rs,ne,{openSched:9})}get openSched(){return this.$$.ctx[9]}}function cs(n){let e,s,t,l,a;return s=new is({}),{c(){e=d("div"),H(s.$$.fragment),m(e,"class","svelte-s8nf7d")},m(r,i){C(r,e,i),A(s,e,null),t=!0,l||(a=R(e,"mousedown",n[0]),l=!0)},p:O,i(r){t||(T(s.$$.fragment,r),t=!0)},o(r){q(s.$$.fragment,r),t=!1},d(r){r&&w(e),B(s),l=!1,a()}}}function fs(n){Ge.subscribe(s=>!s);function e(s){const t=s.composedPath();let l=!0;for(let a=0;a<t.length;a++){const r=t[a];if(r.classList&&r.classList.contains("sidebar")){l=!1;break}}l&&Ge.set(!1)}return[e]}class us extends se{constructor(e){super();le(this,e,fs,cs,ne,{})}}function ps(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-1qx5v5t">home</span> 
        <p class="svelte-1qx5v5t">Home</p>`,m(e,"class","home svelte-1qx5v5t"),J(e,"selected",n[1])},m(l,a){C(l,e,a),s||(t=R(e,"click",n[2]),s=!0)},p(l,a){a&2&&J(e,"selected",l[1])},d(l){l&&w(e),s=!1,t()}}}function ms(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-1qx5v5t">people</span> 
        <p class="svelte-1qx5v5t">People</p>`,m(e,"class","svelte-1qx5v5t"),J(e,"selected",n[0]==`${P}/schedule/people`)},m(l,a){C(l,e,a),s||(t=R(e,"click",n[2]),s=!0)},p(l,a){a&1&&J(e,"selected",l[0]==`${P}/schedule/people`)},d(l){l&&w(e),s=!1,t()}}}function ds(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-1qx5v5t">event</span> 
        <p class="svelte-1qx5v5t">Classes</p>`,m(e,"class","svelte-1qx5v5t"),J(e,"selected",n[0]==`${P}/schedule/classes`)},m(l,a){C(l,e,a),s||(t=R(e,"click",n[2]),s=!0)},p(l,a){a&1&&J(e,"selected",l[0]==`${P}/schedule/classes`)},d(l){l&&w(e),s=!1,t()}}}function hs(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-1qx5v5t">list</span> 
        <p class="svelte-1qx5v5t">List</p>`,m(e,"class","svelte-1qx5v5t"),J(e,"selected",n[0]==`${P}/everyone`)},m(l,a){C(l,e,a),s||(t=R(e,"click",n[2]),s=!0)},p(l,a){a&1&&J(e,"selected",l[0]==`${P}/everyone`)},d(l){l&&w(e),s=!1,t()}}}function _s(n){let e,s,t,l,a,r,i,p,f,h,_,$;return e=new qe({props:{to:P,$$slots:{default:[ps]},$$scope:{ctx:n}}}),a=new qe({props:{to:P+"/schedule/people",$$slots:{default:[ms]},$$scope:{ctx:n}}}),i=new qe({props:{to:P+"/schedule/classes",$$slots:{default:[ds]},$$scope:{ctx:n}}}),_=new qe({props:{to:P+"/everyone",$$slots:{default:[hs]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),s=b(),t=d("hr"),l=b(),H(a.$$.fragment),r=b(),H(i.$$.fragment),p=b(),f=d("hr"),h=b(),H(_.$$.fragment),m(t,"class","svelte-1qx5v5t"),m(f,"class","svelte-1qx5v5t")},m(c,u){A(e,c,u),C(c,s,u),C(c,t,u),C(c,l,u),A(a,c,u),C(c,r,u),A(i,c,u),C(c,p,u),C(c,f,u),C(c,h,u),A(_,c,u),$=!0},p(c,u){const k={};u&10&&(k.$$scope={dirty:u,ctx:c}),e.$set(k);const S={};u&9&&(S.$$scope={dirty:u,ctx:c}),a.$set(S);const L={};u&9&&(L.$$scope={dirty:u,ctx:c}),i.$set(L);const W={};u&9&&(W.$$scope={dirty:u,ctx:c}),_.$set(W)},i(c){$||(T(e.$$.fragment,c),T(a.$$.fragment,c),T(i.$$.fragment,c),T(_.$$.fragment,c),$=!0)},o(c){q(e.$$.fragment,c),q(a.$$.fragment,c),q(i.$$.fragment,c),q(_.$$.fragment,c),$=!1},d(c){B(e,c),c&&w(s),c&&w(t),c&&w(l),B(a,c),c&&w(r),B(i,c),c&&w(p),c&&w(f),c&&w(h),B(_,c)}}}function $s(n){let e,s,t;return s=new ht({props:{$$slots:{default:[_s]},$$scope:{ctx:n}}}),{c(){e=d("div"),H(s.$$.fragment),m(e,"class","sidebar svelte-1qx5v5t")},m(l,a){C(l,e,a),A(s,e,null),t=!0},p(l,[a]){const r={};a&11&&(r.$$scope={dirty:a,ctx:l}),s.$set(r)},i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){q(s.$$.fragment,l),t=!1},d(l){l&&w(e),B(s)}}}function gs(n,e,s){let t="",l=!1;function a(){s(0,t=location.pathname),s(1,l=t.startsWith(P)&&(t.length==P.length||t.length==P.length-1))}return ye(()=>{a(),setInterval(a,10)}),[t,l,a]}class vs extends se{constructor(e){super();le(this,e,gs,$s,ne,{})}}function rt(n,e,s){const t=n.slice();return t[2]=e[s],t}function ot(n){let e,s=n[2].firstName+"",t,l,a=(n[2].prefix||"")+"",r,i,p=n[2].lastName+"",f,h,_,$=n[2].code.toUpperCase()+"",c,u,k,S;function L(){return n[1](n[2])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),f=y(p),h=b(),_=d("span"),c=y($),u=b(),m(_,"class","right svelte-1x3rp31"),m(e,"class","svelte-1x3rp31")},m(W,D){C(W,e,D),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),o(e,_),o(_,c),o(e,u),k||(S=R(e,"click",L),k=!0)},p(W,D){n=W,D&1&&s!==(s=n[2].firstName+"")&&Y(t,s),D&1&&a!==(a=(n[2].prefix||"")+"")&&Y(r,a),D&1&&p!==(p=n[2].lastName+"")&&Y(f,p),D&1&&$!==($=n[2].code.toUpperCase()+"")&&Y(c,$)},d(W){W&&w(e),k=!1,S()}}}function bs(n){let e,s,t,l,a,r=n[0].length+"",i,p,f,h=n[0],_=[];for(let $=0;$<h.length;$+=1)_[$]=ot(rt(n,h,$));return{c(){e=d("div"),s=d("h3"),t=d("span"),t.textContent="Students",l=b(),a=d("span"),i=y(r),p=y("\xA0\xA0"),f=b();for(let $=0;$<_.length;$+=1)_[$].c();m(t,"class","svelte-1x3rp31"),m(a,"class","right svelte-1x3rp31"),m(s,"class","svelte-1x3rp31"),m(e,"class","svelte-1x3rp31")},m($,c){C($,e,c),o(e,s),o(s,t),o(s,l),o(s,a),o(a,i),o(a,p),o(e,f);for(let u=0;u<_.length;u+=1)_[u].m(e,null)},p($,[c]){if(c&1&&r!==(r=$[0].length+"")&&Y(i,r),c&1){h=$[0];let u;for(u=0;u<h.length;u+=1){const k=rt($,h,u);_[u]?_[u].p(k,c):(_[u]=ot(k),_[u].c(),_[u].m(e,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=h.length}},i:O,o:O,d($){$&&w(e),Ce(_,$)}}}function Cs(n,e,s){let t=[];return ae.subscribe(async a=>{if(a==!0){s(0,t=(await Pe()).response.data),t.length>0&&s(0,t=ve(t,"firstName")),t.length>0&&s(0,t=ve(t,"lastName"));for(let r=0;r<t.length;r++)s(0,t[r].class=await gt(t[r].code),t)}}),[t,a=>{Re("student",a.code)}]}class ws extends se{constructor(e){super();le(this,e,Cs,bs,ne,{})}}function it(n,e,s){const t=n.slice();return t[7]=e[s],t}function ct(n){let e,s=(n[7].prefix||"")+"",t,l,a=n[7].lastName+"",r,i,p,f=n[7].code.toUpperCase()+"",h,_,$,c;function u(){return n[1](n[7])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),p=d("span"),h=y(f),_=b(),m(p,"class","right svelte-1jwpn1u"),m(e,"class","svelte-1jwpn1u")},m(k,S){C(k,e,S),o(e,t),o(e,l),o(e,r),o(e,i),o(e,p),o(p,h),o(e,_),$||(c=R(e,"click",u),$=!0)},p(k,S){n=k,S&1&&s!==(s=(n[7].prefix||"")+"")&&Y(t,s),S&1&&a!==(a=n[7].lastName+"")&&Y(r,a),S&1&&f!==(f=n[7].code.toUpperCase()+"")&&Y(h,f)},d(k){k&&w(e),$=!1,c()}}}function ks(n){let e,s,t,l,a,r=n[0].length+"",i,p,f,h=n[0],_=[];for(let $=0;$<h.length;$+=1)_[$]=ct(it(n,h,$));return{c(){e=d("div"),s=d("h3"),t=d("span"),t.textContent="Teachers",l=b(),a=d("span"),i=y(r),p=y("\xA0\xA0"),f=b();for(let $=0;$<_.length;$+=1)_[$].c();m(t,"class","svelte-1jwpn1u"),m(a,"class","right svelte-1jwpn1u"),m(s,"class","svelte-1jwpn1u"),m(e,"class","svelte-1jwpn1u")},m($,c){C($,e,c),o(e,s),o(s,t),o(s,l),o(s,a),o(a,i),o(a,p),o(e,f);for(let u=0;u<_.length;u+=1)_[u].m(e,null)},p($,[c]){if(c&1&&r!==(r=$[0].length+"")&&Y(i,r),c&1){h=$[0];let u;for(u=0;u<h.length;u+=1){const k=it($,h,u);_[u]?_[u].p(k,c):(_[u]=ct(k),_[u].c(),_[u].m(e,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=h.length}},i:O,o:O,d($){$&&w(e),Ce(_,$)}}}function ys(n,e,s){let t=[],l=[];return ae.subscribe(async r=>{if(r==!0){t=(await Pe()).response.data,s(0,l=(await ze()).response.data),t.length>0&&(t=ve(t,"firstName")),l.length>0&&s(0,l=ve(l,"lastName"));for(let i=0;i<t.length;i++)t[i].class=await gt(t[i].code)}}),[l,r=>{Re("teacher",r.code)}]}class Ss extends se{constructor(e){super();le(this,e,ys,ks,ne,{})}}function Ms(n){let e,s,t,l;return e=new Ss({}),t=new ws({}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment)},m(a,r){A(e,a,r),C(a,s,r),A(t,a,r),l=!0},p:O,i(a){l||(T(e.$$.fragment,a),T(t.$$.fragment,a),l=!0)},o(a){q(e.$$.fragment,a),q(t.$$.fragment,a),l=!1},d(a){B(e,a),a&&w(s),B(t,a)}}}class Ds extends se{constructor(e){super();le(this,e,null,Ms,ne,{})}}function ft(n,e,s){const t=n.slice();return t[21]=e[s],t}function ut(n){let e,s,t,l,a={value:n[8],items:n[6]};return t=new kt({props:a}),n[15](t),t.$on("select",n[9]),{c(){e=d("div"),s=d("div"),H(t.$$.fragment),m(s,"class","svelte-qte5a2"),m(e,"class","select svelte-qte5a2")},m(r,i){C(r,e,i),o(e,s),A(t,s,null),l=!0},p(r,i){const p={};i&64&&(p.items=r[6]),t.$set(p)},i(r){l||(T(t.$$.fragment,r),l=!0)},o(r){q(t.$$.fragment,r),l=!1},d(r){r&&w(e),n[15](null),B(t)}}}function Ns(n){let e;return{c(){e=d("span"),e.textContent="Loading...",m(e,"class","svelte-qte5a2")},m(s,t){C(s,e,t)},p:O,d(s){s&&w(e)}}}function Ts(n){let e=(n[3]||"No schedule selected.")+"",s;return{c(){s=y(e)},m(t,l){C(t,s,l)},p(t,l){l&8&&e!==(e=(t[3]||"No schedule selected.")+"")&&Y(s,e)},d(t){t&&w(s)}}}function pt(n){let e,s;return e=new vt({props:{appointment:n[21]}}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},p(t,l){const a={};l&1&&(a.appointment=t[21]),e.$set(a)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function js(n){let e,s,t,l,a,r,i,p,f,h,_,$,c,u,k=parseInt(be().format("W"))+n[2]+"",S,L,W,D,F,X,Q,I,E,z,j,ee,re,ue,oe,pe,ie,te,me,G=n[4]&&ut(n);function _e(g,M){return g[1]?Ns:Ts}let ce=_e(n),Z=ce(n);j=new bt({}),re=new Ct({});let x=n[0],N=[];for(let g=0;g<x.length;g+=1)N[g]=pt(ft(n,x,g));const we=g=>q(N[g],1,1,()=>{N[g]=null});return{c(){e=d("div"),s=d("h3"),t=d("button"),t.textContent="arrow_back_ios_new",l=b(),a=d("button"),a.textContent="date_range",r=b(),i=d("button"),i.textContent="arrow_forward_ios",p=b(),f=d("button"),f.textContent="list",h=b(),_=d("div"),$=b(),c=d("span"),u=y("Week "),S=y(k),L=b(),W=d("div"),D=b(),G&&G.c(),F=b(),X=d("div"),Q=b(),I=d("h3"),Z.c(),E=b(),z=d("div"),H(j.$$.fragment),ee=b(),H(re.$$.fragment),ue=b(),oe=d("div"),pe=b();for(let g=0;g<N.length;g+=1)N[g].c();m(t,"class","material-icons svelte-qte5a2"),m(a,"class","material-icons svelte-qte5a2"),m(i,"class","material-icons svelte-qte5a2"),m(f,"class","material-icons svelte-qte5a2"),m(_,"class","sep svelte-qte5a2"),m(c,"class","week svelte-qte5a2"),m(W,"class","sep svelte-qte5a2"),m(X,"class","sep svelte-qte5a2"),m(s,"class","svelte-qte5a2"),m(I,"class","svelte-qte5a2"),m(e,"class","header svelte-qte5a2"),m(oe,"class","timeline svelte-qte5a2"),V(oe,"left",(n[7]-442)*2+"px"),m(z,"class","grid svelte-qte5a2")},m(g,M){C(g,e,M),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),o(s,p),o(s,f),o(s,h),o(s,_),o(s,$),o(s,c),o(c,u),o(c,S),o(s,L),o(s,W),o(s,D),G&&G.m(s,null),o(s,F),o(s,X),o(e,Q),o(e,I),Z.m(I,null),C(g,E,M),C(g,z,M),A(j,z,null),o(z,ee),A(re,z,null),o(z,ue),o(z,oe),o(z,pe);for(let v=0;v<N.length;v+=1)N[v].m(z,null);ie=!0,te||(me=[R(t,"click",n[10]),R(a,"click",n[12]),R(i,"click",n[11]),R(f,"click",n[14])],te=!0)},p(g,[M]){if((!ie||M&4)&&k!==(k=parseInt(be().format("W"))+g[2]+"")&&Y(S,k),g[4]?G?(G.p(g,M),M&16&&T(G,1)):(G=ut(g),G.c(),T(G,1),G.m(s,F)):G&&(Te(),q(G,1,1,()=>{G=null}),je()),ce===(ce=_e(g))&&Z?Z.p(g,M):(Z.d(1),Z=ce(g),Z&&(Z.c(),Z.m(I,null))),(!ie||M&128)&&V(oe,"left",(g[7]-442)*2+"px"),M&1){x=g[0];let v;for(v=0;v<x.length;v+=1){const U=ft(g,x,v);N[v]?(N[v].p(U,M),T(N[v],1)):(N[v]=pt(U),N[v].c(),T(N[v],1),N[v].m(z,null))}for(Te(),v=x.length;v<N.length;v+=1)we(v);je()}},i(g){if(!ie){T(G),T(j.$$.fragment,g),T(re.$$.fragment,g);for(let M=0;M<x.length;M+=1)T(N[M]);ie=!0}},o(g){q(G),q(j.$$.fragment,g),q(re.$$.fragment,g),N=N.filter(Boolean);for(let M=0;M<N.length;M+=1)q(N[M]);ie=!1},d(g){g&&w(e),G&&G.d(),Z.d(),g&&w(E),g&&w(z),B(j),B(re),Ce(N,g),te=!1,Be(me)}}}function qs(n,e,s){K.extend(Ye),K.extend(He),K.extend(Ae);let t=[],l=[],a={id:""},r=!1,i=0,p,f=[],h=[],_=!1,$,c,u=[];ye(async()=>{for(;!ke(ae););f=await ge(de,fe,`departmentsofbranches?fields=id%2Ccode&schoolInSchoolYear=${Ue}`,!0),f.response.data.forEach(async I=>{const E=(await ge(de,fe,`groupindepartments?fields=id%2Cname%2CisMentorGroup&isMentorOrMainGroup=true&departmentOfBranch=${I.id}`,!0)).response.data;h.push(...ve(E,"name"))}),setTimeout(()=>{s(6,u=[]),ve(h,"name").forEach(I=>{u.push({value:I.id,label:I.name})}),s(4,_=!0)},1e3)});function k(I){const E=I.detail;console.log(E),s(3,p="Schedule for "+I.detail.label),S(E.value)}async function S(I){let E;s(0,l=[]),E=await Wt(I,i+1),t=ve(E.response.data,"start"),s(0,l=[]);for(let z=0;z<t.length;z++){const j=t[z],ee=new Date(j.start*1e3).getDay()-new Date($e(he.prev)).getDay()+2;l.push({rowNr:ee,startMin:new Date(j.start*1e3).getHours()*60+new Date(j.start*1e3).getMinutes(),endMin:new Date(j.end*1e3).getHours()*60+new Date(j.end*1e3).getMinutes(),slotName:j.startTimeSlotName,locations:j.locations,teachers:j.teachers,subjects:j.subjects,cancelled:j.cancelled,changeWarning:j.changeDescription,teacherChanged:j.teacherChanged,locationChanged:j.locationChanged,timeChanged:j.timeChanged,start:{h:new Date(j.start*1e3).getHours(),m:new Date(j.start*1e3).getMinutes()},end:{h:new Date(j.end*1e3).getHours(),m:new Date(j.end*1e3).getMinutes()},classes:j.groups,startTimeStamp:j.start,endTimeStamp:j.end})}s(1,r=!1)}function L(){i+parseInt(be().format("W"))>1&&(s(2,i-=1),S(a.id))}function W(){i+parseInt(be().format("W"))<52&&(s(2,i+=1),S(a.id))}function D(){i!=0&&(s(2,i=0),S(a.id))}let F=0;setInterval(()=>{s(7,F=60*parseInt(K().format("HH"))+parseInt(K().format("m")))},300);const X=()=>{De(`${P}/everyone`)};function Q(I){Ie[I?"unshift":"push"](()=>{$=I,s(5,$)})}return[l,r,i,p,_,$,u,F,c,k,L,W,D,S,X,Q]}class Is extends se{constructor(e){super();le(this,e,qs,js,ne,{openSched:13})}get openSched(){return this.$$.ctx[13]}}function mt(n){let e,s;return e=new Is({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ls(n){let e,s,t=n[0]&&mt();return{c(){t&&t.c(),e=Se()},m(l,a){t&&t.m(l,a),C(l,e,a),s=!0},p(l,[a]){l[0]?t?a&1&&T(t,1):(t=mt(),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(Te(),q(t,1,1,()=>{t=null}),je())},i(l){s||(T(t),s=!0)},o(l){q(t),s=!1},d(l){t&&t.d(l),l&&w(e)}}}function Ws(n,e,s){let t;return ae.subscribe(l=>s(0,t=l)),[t]}class Ys extends se{constructor(e){super();le(this,e,Ws,Ls,ne,{})}}function dt(n){let e,s,t,l;return e=new vs({}),t=new Zt({}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment)},m(a,r){A(e,a,r),C(a,s,r),A(t,a,r),l=!0},i(a){l||(T(e.$$.fragment,a),T(t.$$.fragment,a),l=!0)},o(a){q(e.$$.fragment,a),q(t.$$.fragment,a),l=!1},d(a){B(e,a),a&&w(s),B(t,a)}}}function Hs(n){let e;return{c(){e=d("h1"),e.textContent="Home!",m(e,"class","svelte-1efnqlf")},m(s,t){C(s,e,t)},d(s){s&&w(e)}}}function As(n){let e,s;return e=new us({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Bs(n){let e,s;return e=new Ys({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Us(n){let e,s;return e=new Ds({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Es(n){let e,s;return e=new At({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){q(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ps(n){let e,s,t,l,a,r,i,p,f,h,_,$;return e=new Ne({props:{path:P,$$slots:{default:[Hs]},$$scope:{ctx:n}}}),t=new Ne({props:{path:P+"/schedule/people",$$slots:{default:[As]},$$scope:{ctx:n}}}),a=new Ne({props:{path:P+"/schedule/classes",$$slots:{default:[Bs]},$$scope:{ctx:n}}}),i=new Jt({}),f=new Ne({props:{path:P+"/everyone",$$slots:{default:[Us]},$$scope:{ctx:n}}}),_=new Ne({props:{path:P+"/login",$$slots:{default:[Es]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment),l=b(),H(a.$$.fragment),r=b(),H(i.$$.fragment),p=b(),H(f.$$.fragment),h=b(),H(_.$$.fragment)},m(c,u){A(e,c,u),C(c,s,u),A(t,c,u),C(c,l,u),A(a,c,u),C(c,r,u),A(i,c,u),C(c,p,u),A(f,c,u),C(c,h,u),A(_,c,u),$=!0},p(c,u){const k={};u&2&&(k.$$scope={dirty:u,ctx:c}),e.$set(k);const S={};u&2&&(S.$$scope={dirty:u,ctx:c}),t.$set(S);const L={};u&2&&(L.$$scope={dirty:u,ctx:c}),a.$set(L);const W={};u&2&&(W.$$scope={dirty:u,ctx:c}),f.$set(W);const D={};u&2&&(D.$$scope={dirty:u,ctx:c}),_.$set(D)},i(c){$||(T(e.$$.fragment,c),T(t.$$.fragment,c),T(a.$$.fragment,c),T(i.$$.fragment,c),T(f.$$.fragment,c),T(_.$$.fragment,c),$=!0)},o(c){q(e.$$.fragment,c),q(t.$$.fragment,c),q(a.$$.fragment,c),q(i.$$.fragment,c),q(f.$$.fragment,c),q(_.$$.fragment,c),$=!1},d(c){B(e,c),c&&w(s),B(t,c),c&&w(l),B(a,c),c&&w(r),B(i,c),c&&w(p),B(f,c),c&&w(h),B(_,c)}}}function Rs(n){let e,s,t,l,a,r=n[0]&&dt();return l=new ht({props:{$$slots:{default:[Ps]},$$scope:{ctx:n}}}),{c(){e=d("div"),s=d("div"),r&&r.c(),t=b(),H(l.$$.fragment),m(s,"class","content svelte-1efnqlf"),m(e,"class","bg svelte-1efnqlf")},m(i,p){C(i,e,p),o(e,s),r&&r.m(s,null),o(s,t),A(l,s,null),a=!0},p(i,[p]){i[0]?r?p&1&&T(r,1):(r=dt(),r.c(),T(r,1),r.m(s,t)):r&&(Te(),q(r,1,1,()=>{r=null}),je());const f={};p&2&&(f.$$scope={dirty:p,ctx:i}),l.$set(f)},i(i){a||(T(r),T(l.$$.fragment,i),a=!0)},o(i){q(r),q(l.$$.fragment,i),a=!1},d(i){i&&w(e),r&&r.d(),B(l)}}}function Os(n,e,s){let t=!1;return ye(async()=>{s(0,t=await We()),t?ae.set(!0):location.pathname!=`${P}/login`&&De(`${P}/login`)}),[t]}class zs extends se{constructor(e){super();le(this,e,Os,Rs,ne,{})}}function Gs(n){let e,s,t;return s=new zs({}),{c(){e=d("div"),H(s.$$.fragment)},m(l,a){C(l,e,a),A(s,e,null),t=!0},p:O,i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){q(s.$$.fragment,l),t=!1},d(l){l&&w(e),B(s)}}}function Zs(n){return ae.subscribe(e=>{}),ye(async()=>{await We()}),[]}class Fs extends se{constructor(e){super();le(this,e,Zs,Gs,ne,{})}}new Fs({target:document.getElementById("app")});
