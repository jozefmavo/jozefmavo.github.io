import{w as _e,d as x,a as ye,b as Me,c as Te,g as me,F as ot,S as te,i as le,s as ne,e as d,f as v,h as m,t as E,j as b,k as r,l as J,n as U,m as $,o as Ce,p as h,q as de,r as fe,u as Z,v as I,x as ke,y as Xe,z as se,A as oe,B as q,C as F,D as ae,E as Je,G as Qe}from"./vendor.5e678f43.js";const at=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(l){if(l.ep)return;l.ep=!0;const a=n(l);fetch(l.href,a)}};at();const xe="1201",rt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",it="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ne=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),ge=_e(),be=_e(!1),et=_e();let we=_e(!1);const tt=_e();x.extend(ye);x.extend(Me);x.extend(Te);async function he(s,e,n,t=!0,l){if(me(re)||l){const a={headers:{Authorization:`Bearer ${s}`},method:"GET"},o=await await fetch(`https://${e}.zportal.nl/api/v3/${n}`,l?{}:a);return t?o.json():o.text()}return t?{}:"{}"}async function ct(s,e){const n={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${s}`,n)).json()}let re=_e(!1),ce,ie;async function lt(s,e){if(localStorage.getItem("accessToken")){ce=localStorage.getItem("accessToken"),ie=localStorage.getItem("school");const n=await(await fetch(`https://${ie}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ce}`}})).json();return re.set(n.response.status==200),re?(console.log("Zermelo login succeeded from stored access token"),ge.set(n.response.data)):console.log("Zermelo login failed from stored access token: server returned "+n.response.status),me(re)}if(!s||!e)return console.log("Zermelo login failed!"),console.error(s,e),!1;try{const n=await ct(e,s);n.access_token&&(localStorage.setItem("accessToken",n.access_token),localStorage.setItem("school",s),re.set(!0),ge.set((await(await fetch(`https://${ie}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ce}`}})).json()).response.data)),me(re)&&console.log("Zermelo login succeeded from provided data")}catch{re.set(!1)}return re}function ut(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),re.set(!1)}async function nt(){return await he(ce,ie,`${rt}${xe}`)}async function st(){return await he(ce,ie,`${it}${xe}`)}async function ft(s){const e=new Date(pe(ue.prev)).getTime(),n=new Date(pe(ue.next)).getTime();return await he(ce,ie,`appointments?start=${e}&end=${n}&teachers=${s}&fields=${Ne.get("teacherSchedule")}`,!0)}async function pt(s,e=0){const n=new Date(pe(ue.prev)).getTime()+601200*e,t=new Date(pe(ue.next)).getTime()+601200*e;return await he(ce,ie,`appointments?user=${s}&start=${n}&end=${t}&fields=${Ne.get("studentSchedule")}`,!0)}async function dt(s){const e=new Date(pe(ue.prev)).getTime(),n=new Date(pe(ue.next)).getTime(),t=await he(ce,ie,`appointments?valid=true&start=${e}&end=${n}&fields=${Ne.get("getStudentClassAppointments")}&possibleStudents=${s}`,!0);let l;const a=t.response.data;for(let o=0;o<a.length;o++)if(a[o].groupsInDepartments.length>0&&a[o].subjects.length>0){if(a[o].subjects[0]=="mtr"){l=a[o].groupsInDepartments[0];break}continue}return(await he(ce,ie,`groupindepartments?id=${l}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function pe(s){let e;return s==ue.prev?e=x().weekday(-7).unix():e=x().weekday(0).unix(),e}async function mt(s){const e=Array.prototype.concat((await st()).response.data,(await nt()).response.data),n={includeScore:!0,keys:["firstName","lastName","code"]};return new ot(e,n).search(s)}function Se(s,e){return s.sort(function(n,t){var l=n[e],a=t[e];return l<a?-1:l>a?1:0})}var ue=(s=>(s[s.prev=0]="prev",s[s.next=1]="next",s))(ue||{});function ht(s){let e,n,t,l,a,o,c,i,u,f,g,_,N;return{c(){e=d("div"),n=d("div"),t=d("h1"),t.textContent="Login",l=v(),a=d("p"),a.textContent="Provide the requested information to continue to Zermelo.",o=v(),c=d("input"),i=v(),u=d("input"),f=v(),g=d("button"),g.textContent="Login",m(t,"class","svelte-1swo36e"),m(a,"class","svelte-1swo36e"),m(c,"placeholder","schoolname"),m(c,"class","svelte-1swo36e"),E(c,"error",s[2]),m(u,"placeholder","pairing code"),m(u,"type","number"),m(u,"class","svelte-1swo36e"),E(u,"error",s[2]),m(g,"class","svelte-1swo36e"),m(n,"class","centered svelte-1swo36e"),m(e,"class","svelte-1swo36e")},m(w,p){b(w,e,p),r(e,n),r(n,t),r(n,l),r(n,a),r(n,o),r(n,c),s[4](c),r(n,i),r(n,u),s[5](u),r(n,f),r(n,g),_||(N=J(g,"click",s[3]),_=!0)},p(w,[p]){p&4&&E(c,"error",w[2]),p&4&&E(u,"error",w[2])},i:U,o:U,d(w){w&&$(e),s[4](null),s[5](null),_=!1,N()}}}function _t(s,e,n){let t,l,a;async function o(){if(!t.value||!l.value){c();return}await lt(t.value,l.value),me(re)?window.location.reload():c()}function c(){n(2,a=!0),setTimeout(()=>{n(2,a=!1)},3e3)}function i(f){Ce[f?"unshift":"push"](()=>{t=f,n(0,t)})}function u(f){Ce[f?"unshift":"push"](()=>{l=f,n(1,l)})}return[t,l,a,o,i,u]}class vt extends te{constructor(e){super();le(this,e,_t,ht,ne,{})}}function $e(s,e){et.set({type:s,id:e})}function De(s,e,n){const t=s.slice();return t[1]=e[n],t}function je(s){let e,n=s[1].icon+"",t,l,a,o,c;return{c(){e=d("button"),t=h(n),l=v(),m(e,"class","material-icons svelte-10ub0dz"),m(e,"title",a=s[1].caption)},m(i,u){b(i,e,u),r(e,t),r(e,l),o||(c=J(e,"click",s[1].action),o=!0)},p(i,u){s=i},d(i){i&&$(e),o=!1,c()}}}function gt(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=je(De(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,a){for(let o=0;o<t.length;o+=1)t[o].m(l,a);b(l,e,a)},p(l,[a]){if(a&1){n=l[0];let o;for(o=0;o<n.length;o+=1){const c=De(l,n,o);t[o]?t[o].p(c,a):(t[o]=je(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:U,o:U,d(l){fe(t,l),l&&$(e)}}}function bt(s){return[[{icon:"logout",action:()=>{ut()},caption:"Logout"},{icon:"calendar_today",action:()=>{console.log(me(ge)),$e("student",me(ge)[0].code)},caption:"Show own calendar"}]]}class $t extends te{constructor(e){super();le(this,e,bt,gt,ne,{})}}function Ie(s,e,n){const t=s.slice();return t[9]=e[n],t}function Be(s){let e,n=s[3],t=[];for(let l=0;l<n.length;l+=1)t[l]=Le(Ie(s,n,l));return{c(){e=d("div");for(let l=0;l<t.length;l+=1)t[l].c();m(e,"class","searchResults svelte-z915me"),Z(e,"top",s[2]+"px"),Z(e,"left",s[1]+"px")},m(l,a){b(l,e,a);for(let o=0;o<t.length;o+=1)t[o].m(e,null)},p(l,a){if(a&9){n=l[3];let o;for(o=0;o<n.length;o+=1){const c=Ie(l,n,o);t[o]?t[o].p(c,a):(t[o]=Le(c),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}a&4&&Z(e,"top",l[2]+"px"),a&2&&Z(e,"left",l[1]+"px")},d(l){l&&$(e),fe(t,l)}}}function Ae(s){let e,n=s[9].item.code.toUpperCase()+"",t,l;return{c(){e=h("("),t=h(n),l=h(")")},m(a,o){b(a,e,o),b(a,t,o),b(a,l,o)},p(a,o){o&8&&n!==(n=a[9].item.code.toUpperCase()+"")&&I(t,n)},d(a){a&&$(e),a&&$(t),a&&$(l)}}}function Le(s){let e,n=(s[9].item.firstName||"")+"",t,l,a=(s[9].item.prefix||"")+"",o,c,i=(s[9].item.lastName||"")+"",u,f,g,_,N,w=s[9].item.isEmployee&&Ae(s);function p(){return s[8](s[9])}return{c(){e=d("button"),t=h(n),l=v(),o=h(a),c=v(),u=h(i),f=v(),w&&w.c(),g=v(),m(e,"class","svelte-z915me")},m(y,j){b(y,e,j),r(e,t),r(e,l),r(e,o),r(e,c),r(e,u),r(e,f),w&&w.m(e,null),r(e,g),_||(N=J(e,"click",p),_=!0)},p(y,j){s=y,j&8&&n!==(n=(s[9].item.firstName||"")+"")&&I(t,n),j&8&&a!==(a=(s[9].item.prefix||"")+"")&&I(o,a),j&8&&i!==(i=(s[9].item.lastName||"")+"")&&I(u,i),s[9].item.isEmployee?w?w.p(s,j):(w=Ae(s),w.c(),w.m(e,g)):w&&(w.d(1),w=null)},d(y){y&&$(e),w&&w.d(),_=!1,N()}}}function kt(s){let e,n,t,l,a,o,c,i,u=!s[5]&&s[4]&&Be(s);return{c(){e=d("div"),n=d("input"),t=v(),l=d("button"),l.textContent="search",a=v(),u&&u.c(),o=de(),m(n,"placeholder","Search people..."),m(n,"class","svelte-z915me"),m(l,"class","material-icons svelte-z915me"),m(e,"class","searchOuter svelte-z915me")},m(f,g){b(f,e,g),r(e,n),s[7](n),r(e,t),r(e,l),b(f,a,g),u&&u.m(f,g),b(f,o,g),c||(i=[J(n,"focus",s[6]),J(n,"blur",s[6]),J(n,"input",s[6])],c=!0)},p(f,[g]){!f[5]&&f[4]?u?u.p(f,g):(u=Be(f),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:U,o:U,d(f){f&&$(e),s[7](null),f&&$(a),u&&u.d(f),f&&$(o),c=!1,ke(i)}}}function Ct(s,e,n){let t,l,a,o=[],c="",i=!1;Xe(()=>{n(1,l=t.offsetLeft-5),n(2,a=t.offsetTop+30)});async function u(){n(4,c=t.value),n(3,o=await mt(t.value)),console.log(o),n(5,i=document.activeElement!=t)}function f(_){Ce[_?"unshift":"push"](()=>{t=_,n(0,t)})}return[t,l,a,o,c,i,u,f,_=>{n(0,t.value="",t),$e(_.item.isEmployee?"teacher":"student",_.item.code)}]}class wt extends te{constructor(e){super();le(this,e,Ct,kt,ne,{})}}function ze(s,e,n){const t=s.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function Re(s){let e,n=s[2].icon+"",t,l,a;function o(){return s[1](s[2],s[3],s[4])}return{c(){e=d("button"),t=h(n),m(e,"class","material-icons svelte-yojadn"),E(e,"active",s[2].value)},m(c,i){b(c,e,i),r(e,t),l||(a=J(e,"click",o),l=!0)},p(c,i){s=c,i&1&&n!==(n=s[2].icon+"")&&I(t,n),i&1&&E(e,"active",s[2].value)},d(c){c&&$(e),l=!1,a()}}}function St(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=Re(ze(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,a){for(let o=0;o<t.length;o+=1)t[o].m(l,a);b(l,e,a)},p(l,[a]){if(a&1){n=l[0];let o;for(o=0;o<n.length;o+=1){const c=ze(l,n,o);t[o]?t[o].p(c,a):(t[o]=Re(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:U,o:U,d(l){fe(t,l),l&&$(e)}}}function yt(s,e,n){const t=[{icon:"people",value:!0,event:a=>{be.set(a)}}];return be.set(!0),[t,(a,o,c)=>{n(0,o[c].value=!a.value,t),a.event(a.value)}]}class Mt extends te{constructor(e){super();le(this,e,yt,St,ne,{})}}function Tt(s){let e,n,t,l,a,o,c,i,u,f,g,_,N,w,p,y,j,L=s[0].firstName+"",R,ee,O=(s[0].prefix||"")+"",H,G,K=s[0].lastName+"",V,z,P,X,W,A;return a=new wt({}),u=new Mt({}),N=new $t({}),{c(){e=d("div"),n=d("div"),n.textContent=`Zermelo Hub | ${ie}`,t=v(),l=d("div"),se(a.$$.fragment),o=v(),c=d("div"),i=v(),se(u.$$.fragment),f=v(),g=d("div"),_=v(),se(N.$$.fragment),w=v(),p=d("div"),y=v(),j=d("p"),R=h(L),ee=v(),H=h(O),G=v(),V=h(K),z=v(),P=d("span"),P.textContent="account_circle",X=v(),W=d("div"),m(n,"class","header svelte-p811u5"),m(c,"class","sep svelte-p811u5"),m(g,"class","sep svelte-p811u5"),m(p,"class","sep svelte-p811u5"),m(j,"class","svelte-p811u5"),m(P,"class","material-icons svelte-p811u5"),m(l,"class","right svelte-p811u5"),m(e,"class","tb svelte-p811u5"),m(W,"class","accent svelte-p811u5")},m(T,Q){b(T,e,Q),r(e,n),r(e,t),r(e,l),oe(a,l,null),r(l,o),r(l,c),r(l,i),oe(u,l,null),r(l,f),r(l,g),r(l,_),oe(N,l,null),r(l,w),r(l,p),r(l,y),r(l,j),r(j,R),r(j,ee),r(j,H),r(j,G),r(j,V),r(l,z),r(l,P),b(T,X,Q),b(T,W,Q),A=!0},p(T,[Q]){(!A||Q&1)&&L!==(L=T[0].firstName+"")&&I(R,L),(!A||Q&1)&&O!==(O=(T[0].prefix||"")+"")&&I(H,O),(!A||Q&1)&&K!==(K=T[0].lastName+"")&&I(V,K)},i(T){A||(q(a.$$.fragment,T),q(u.$$.fragment,T),q(N.$$.fragment,T),A=!0)},o(T){F(a.$$.fragment,T),F(u.$$.fragment,T),F(N.$$.fragment,T),A=!1},d(T){T&&$(e),ae(a),ae(u),ae(N),T&&$(X),T&&$(W)}}}function Nt(s,e,n){let t;return ge.subscribe(l=>{n(0,t=l[0])}),[t]}class Dt extends te{constructor(e){super();le(this,e,Nt,Tt,ne,{})}}function Ye(s,e,n){const t=s.slice();return t[9]=e[n],t}function Ue(s,e,n){const t=s.slice();return t[12]=e[n],t}function Ee(s){let e,n=(s[12].prefix||"")+"",t,l,a=s[12].lastName+"",o,c,i,u=s[12].code.toUpperCase()+"",f,g,_,N;function w(){return s[7](s[12])}return{c(){e=d("button"),t=h(n),l=v(),o=h(a),c=v(),i=d("span"),f=h(u),g=v(),m(i,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(p,y){b(p,e,y),r(e,t),r(e,l),r(e,o),r(e,c),r(e,i),r(i,f),r(e,g),_||(N=J(e,"click",w),_=!0)},p(p,y){s=p,y&2&&n!==(n=(s[12].prefix||"")+"")&&I(t,n),y&2&&a!==(a=s[12].lastName+"")&&I(o,a),y&2&&u!==(u=s[12].code.toUpperCase()+"")&&I(f,u)},d(p){p&&$(e),_=!1,N()}}}function We(s){let e,n=s[9].firstName+"",t,l,a=(s[9].prefix||"")+"",o,c,i=s[9].lastName+"",u,f,g,_=(s[9].class||"...")+"",N,w,p,y;function j(){return s[8](s[9])}return{c(){e=d("button"),t=h(n),l=v(),o=h(a),c=v(),u=h(i),f=v(),g=d("span"),N=h(_),w=v(),m(g,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(L,R){b(L,e,R),r(e,t),r(e,l),r(e,o),r(e,c),r(e,u),r(e,f),r(e,g),r(g,N),r(e,w),p||(y=J(e,"click",j),p=!0)},p(L,R){s=L,R&1&&n!==(n=s[9].firstName+"")&&I(t,n),R&1&&a!==(a=(s[9].prefix||"")+"")&&I(o,a),R&1&&i!==(i=s[9].lastName+"")&&I(u,i),R&1&&_!==(_=(s[9].class||"...")+"")&&I(N,_)},d(L){L&&$(e),p=!1,y()}}}function jt(s){let e,n,t,l,a=s[2]?"less":"more",o,c,i,u,f,g=s[1].length+"",_,N,w,p,y,j,L,R,ee=s[3]?"less":"more",O,H,G,K,V,z=s[0].length+"",P,X,W,A,T,Q,C=s[1],D=[];for(let M=0;M<C.length;M+=1)D[M]=Ee(Ue(s,C,M));let B=s[0],Y=[];for(let M=0;M<B.length;M+=1)Y[M]=We(Ye(s,B,M));return{c(){e=d("div"),n=d("h3"),t=d("button"),l=h("expand_"),o=h(a),c=v(),i=d("span"),i.textContent="Teachers",u=v(),f=d("span"),_=h(g),N=h("\xA0\xA0"),w=v(),p=d("div");for(let M=0;M<D.length;M+=1)D[M].c();y=v(),j=d("h3"),L=d("button"),R=h("expand_"),O=h(ee),H=v(),G=d("span"),G.textContent="Students",K=v(),V=d("span"),P=h(z),X=h("\xA0\xA0"),W=v(),A=d("div");for(let M=0;M<Y.length;M+=1)Y[M].c();m(t,"class","material-icons svelte-dvgbtd"),m(i,"class","svelte-dvgbtd"),m(f,"class","right svelte-dvgbtd"),m(n,"class","svelte-dvgbtd"),m(p,"class","svelte-dvgbtd"),E(p,"hidden",!s[2]),m(L,"class","material-icons svelte-dvgbtd"),m(G,"class","svelte-dvgbtd"),m(V,"class","right svelte-dvgbtd"),m(j,"class","svelte-dvgbtd"),m(A,"class","svelte-dvgbtd"),E(A,"hidden",!s[3]),m(e,"class","sidebar svelte-dvgbtd"),E(e,"hidden",!s[4])},m(M,S){b(M,e,S),r(e,n),r(n,t),r(t,l),r(t,o),r(n,c),r(n,i),r(n,u),r(n,f),r(f,_),r(f,N),r(e,w),r(e,p);for(let k=0;k<D.length;k+=1)D[k].m(p,null);r(e,y),r(e,j),r(j,L),r(L,R),r(L,O),r(j,H),r(j,G),r(j,K),r(j,V),r(V,P),r(V,X),r(e,W),r(e,A);for(let k=0;k<Y.length;k+=1)Y[k].m(A,null);T||(Q=[J(t,"click",s[5]),J(L,"click",s[6])],T=!0)},p(M,[S]){if(S&4&&a!==(a=M[2]?"less":"more")&&I(o,a),S&2&&g!==(g=M[1].length+"")&&I(_,g),S&2){C=M[1];let k;for(k=0;k<C.length;k+=1){const ve=Ue(M,C,k);D[k]?D[k].p(ve,S):(D[k]=Ee(ve),D[k].c(),D[k].m(p,null))}for(;k<D.length;k+=1)D[k].d(1);D.length=C.length}if(S&4&&E(p,"hidden",!M[2]),S&8&&ee!==(ee=M[3]?"less":"more")&&I(O,ee),S&1&&z!==(z=M[0].length+"")&&I(P,z),S&1){B=M[0];let k;for(k=0;k<B.length;k+=1){const ve=Ye(M,B,k);Y[k]?Y[k].p(ve,S):(Y[k]=We(ve),Y[k].c(),Y[k].m(A,null))}for(;k<Y.length;k+=1)Y[k].d(1);Y.length=B.length}S&8&&E(A,"hidden",!M[3]),S&16&&E(e,"hidden",!M[4])},i:U,o:U,d(M){M&&$(e),fe(D,M),fe(Y,M),T=!1,ke(Q)}}}function It(s,e,n){let t=[],l=[],a=!1,o=!1,c=!0;re.subscribe(async _=>{if(_==!0){n(0,t=(await nt()).response.data),n(1,l=(await st()).response.data),t.length>0&&n(0,t=Se(t,"firstName")),l.length>0&&n(1,l=Se(l,"lastName"));for(let N=0;N<t.length;N++)n(0,t[N].class=await dt(t[N].code),t)}});function i(){n(2,a=!a)}function u(){n(3,o=!o)}return be.subscribe(_=>n(4,c=_)),[t,l,a,o,c,i,u,_=>{$e("teacher",_.code)},_=>{$e("student",_.code)}]}class Bt extends te{constructor(e){super();le(this,e,It,jt,ne,{})}}function At(s){let e,n=s[0].subjects[0]+"",t,l,a=s[0].locations+"",o,c,i,u,f,g=(s[0].classes||"")+"",_,N,w;return{c(){e=d("div"),t=h(n),l=v(),o=h(a),c=d("br"),i=d("br"),u=v(),f=d("p"),_=h(g),m(f,"class","classes svelte-r1xfn2"),m(e,"class","appointment svelte-r1xfn2"),Z(e,"left",10+(s[0].startMin-440)*2+"px"),Z(e,"width",(s[0].endMin-s[0].startMin)*2-2+"px"),Z(e,"top",52+s[0].rowNr*80-80+"px"),E(e,"cancelled",s[0].cancelled),E(e,"changed",s[0].teacherChanged||s[0].timeChanged||s[0].locationChanged)},m(p,y){b(p,e,y),r(e,t),r(e,l),r(e,o),r(e,c),r(e,i),r(e,u),r(e,f),r(f,_),N||(w=J(e,"click",s[1]),N=!0)},p(p,[y]){y&1&&n!==(n=p[0].subjects[0]+"")&&I(t,n),y&1&&a!==(a=p[0].locations+"")&&I(o,a),y&1&&g!==(g=(p[0].classes||"")+"")&&I(_,g),y&1&&Z(e,"left",10+(p[0].startMin-440)*2+"px"),y&1&&Z(e,"width",(p[0].endMin-p[0].startMin)*2-2+"px"),y&1&&Z(e,"top",52+p[0].rowNr*80-80+"px"),y&1&&E(e,"cancelled",p[0].cancelled),y&1&&E(e,"changed",p[0].teacherChanged||p[0].timeChanged||p[0].locationChanged)},i:U,o:U,d(p){p&&$(e),N=!1,w()}}}function Lt(s,e,n){let{appointment:t}=e;function l(){tt.set(t),we.set(!0)}return s.$$set=a=>{"appointment"in a&&n(0,t=a.appointment)},[t,l]}class zt extends te{constructor(e){super();le(this,e,Lt,At,ne,{appointment:0})}}function Oe(s,e,n){const t=s.slice();return t[1]=e[n],t}function Pe(s){let e,n=s[1].d+"",t,l;return{c(){e=d("div"),t=h(n),l=v(),m(e,"class","appointment svelte-vvjiw7"),Z(e,"left","10px"),Z(e,"width","80px"),Z(e,"top",10+80*s[1].i-40+"px")},m(a,o){b(a,e,o),r(e,t),r(e,l)},p:U,d(a){a&&$(e)}}}function Rt(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=Pe(Oe(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,a){for(let o=0;o<t.length;o+=1)t[o].m(l,a);b(l,e,a)},p(l,[a]){if(a&1){n=l[0];let o;for(o=0;o<n.length;o+=1){const c=Oe(l,n,o);t[o]?t[o].p(c,a):(t[o]=Pe(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:U,o:U,d(l){fe(t,l),l&&$(e)}}}function Yt(s){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class Ut extends te{constructor(e){super();le(this,e,Yt,Rt,ne,{})}}function qe(s,e,n){const t=s.slice();return t[1]=e[n],t}function He(s){let e,n=s[1].start.h.toString().padStart(2,"0")+"",t,l,a=s[1].start.m.toString().padStart(2,"0")+"",o,c,i=s[1].end.h.toString().padStart(2,"0")+"",u,f,g=s[1].end.m.toString().padStart(2,"0")+"",_,N;return{c(){e=d("div"),t=h(n),l=h(":"),o=h(a),c=h(" - "),u=h(i),f=h(":"),_=h(g),N=v(),m(e,"class","appointment svelte-yc4ag7"),Z(e,"left",10+(s[1].startMin-440)*2+"px"),Z(e,"width",(s[1].endMin-s[1].startMin)*2-2+"px"),Z(e,"height","40px"),Z(e,"top","10px")},m(w,p){b(w,e,p),r(e,t),r(e,l),r(e,o),r(e,c),r(e,u),r(e,f),r(e,_),r(e,N)},p:U,d(w){w&&$(e)}}}function Et(s){let e,n=s[0],t=[];for(let l=0;l<n.length;l+=1)t[l]=He(qe(s,n,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=de()},m(l,a){for(let o=0;o<t.length;o+=1)t[o].m(l,a);b(l,e,a)},p(l,[a]){if(a&1){n=l[0];let o;for(o=0;o<n.length;o+=1){const c=qe(l,n,o);t[o]?t[o].p(c,a):(t[o]=He(c),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:U,o:U,d(l){fe(t,l),l&&$(e)}}}function Wt(s){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}}]]}class Ot extends te{constructor(e){super();le(this,e,Wt,Et,ne,{})}}function Ze(s){let e,n,t=s[0].subjects.toString().toUpperCase()+"",l,a,o,c,i,u=s[0].locations+"",f,g,_,N,w,p=s[0].teachers.length>1?"s":"",y,j,L=s[0].teachers.toString().toUpperCase()+"",R,ee,O,H,G,K=x(s[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"",V,z,P,X,W,A=s[0].classes.length>1?"s":"",T,Q,C=(s[0].classes.length?s[0].classes:"Unknown")+"",D,B,Y,M=s[0].changeWarning&&Fe(s);return{c(){e=d("h3"),n=h("Information for "),l=h(t),a=v(),o=d("p"),c=d("b"),c.textContent="Location",i=h(": "),f=h(u),g=v(),_=d("p"),N=d("b"),w=h("Teacher"),y=h(p),j=h(": "),R=h(L),ee=v(),O=d("p"),H=d("b"),H.textContent="Timestamp",G=h(": "),V=h(K),z=v(),P=d("p"),X=d("b"),W=h("Group"),T=h(A),Q=h(": "),D=h(C),B=v(),M&&M.c(),Y=de(),m(e,"class","svelte-13l868e"),m(o,"class","svelte-13l868e"),m(_,"class","svelte-13l868e"),m(O,"class","svelte-13l868e"),m(P,"class","svelte-13l868e")},m(S,k){b(S,e,k),r(e,n),r(e,l),b(S,a,k),b(S,o,k),r(o,c),r(o,i),r(o,f),b(S,g,k),b(S,_,k),r(_,N),r(N,w),r(N,y),r(_,j),r(_,R),b(S,ee,k),b(S,O,k),r(O,H),r(O,G),r(O,V),b(S,z,k),b(S,P,k),r(P,X),r(X,W),r(X,T),r(P,Q),r(P,D),b(S,B,k),M&&M.m(S,k),b(S,Y,k)},p(S,k){k&1&&t!==(t=S[0].subjects.toString().toUpperCase()+"")&&I(l,t),k&1&&u!==(u=S[0].locations+"")&&I(f,u),k&1&&p!==(p=S[0].teachers.length>1?"s":"")&&I(y,p),k&1&&L!==(L=S[0].teachers.toString().toUpperCase()+"")&&I(R,L),k&1&&K!==(K=x(S[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"")&&I(V,K),k&1&&A!==(A=S[0].classes.length>1?"s":"")&&I(T,A),k&1&&C!==(C=(S[0].classes.length?S[0].classes:"Unknown")+"")&&I(D,C),S[0].changeWarning?M?M.p(S,k):(M=Fe(S),M.c(),M.m(Y.parentNode,Y)):M&&(M.d(1),M=null)},d(S){S&&$(e),S&&$(a),S&&$(o),S&&$(g),S&&$(_),S&&$(ee),S&&$(O),S&&$(z),S&&$(P),S&&$(B),M&&M.d(S),S&&$(Y)}}}function Fe(s){let e,n,t,l,a,o,c=s[0].changeWarning+"",i;return{c(){e=d("hr"),n=v(),t=d("p"),l=d("b"),l.textContent="Warning",a=h(":"),o=d("br"),i=h(c),m(e,"class","svelte-13l868e"),m(t,"class","svelte-13l868e")},m(u,f){b(u,e,f),b(u,n,f),b(u,t,f),r(t,l),r(t,a),r(t,o),r(t,i)},p(u,f){f&1&&c!==(c=u[0].changeWarning+"")&&I(i,c)},d(u){u&&$(e),u&&$(n),u&&$(t)}}}function Pt(s){let e,n,t,l,a,o,c,i=s[0]&&Ze(s);return{c(){e=d("div"),n=v(),t=d("div"),l=d("button"),l.textContent="close",a=v(),i&&i.c(),m(e,"class","shade svelte-13l868e"),E(e,"hidden",!s[1]),m(l,"class","material-icons svelte-13l868e"),m(t,"class","dialog svelte-13l868e"),E(t,"hidden",!s[1])},m(u,f){b(u,e,f),b(u,n,f),b(u,t,f),r(t,l),r(t,a),i&&i.m(t,null),o||(c=[J(e,"click",s[2]),J(l,"click",s[2])],o=!0)},p(u,[f]){f&2&&E(e,"hidden",!u[1]),u[0]?i?i.p(u,f):(i=Ze(u),i.c(),i.m(t,null)):i&&(i.d(1),i=null),f&2&&E(t,"hidden",!u[1])},i:U,o:U,d(u){u&&$(e),u&&$(n),u&&$(t),i&&i.d(),o=!1,ke(c)}}}function qt(s,e,n){x.extend(ye),x.extend(Me),x.extend(Te);let t,l;tt.subscribe(o=>n(0,t=o)),we.subscribe(o=>n(1,l=o));function a(){we.set(!1)}return[t,l,a]}class Ht extends te{constructor(e){super();le(this,e,qt,Pt,ne,{})}}function Ge(s,e,n){const t=s.slice();return t[8]=e[n],t}function Ke(s){let e;return{c(){e=h("(Current)")},m(n,t){b(n,e,t)},d(n){n&&$(e)}}}function Zt(s){let e;return{c(){e=h("Loading...")},m(n,t){b(n,e,t)},p:U,d(n){n&&$(e)}}}function Ft(s){let e;function n(a,o){return a[1].id?Kt:Gt}let t=n(s),l=t(s);return{c(){l.c(),e=de()},m(a,o){l.m(a,o),b(a,e,o)},p(a,o){t===(t=n(a))&&l?l.p(a,o):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){l.d(a),a&&$(e)}}}function Gt(s){let e;return{c(){e=h("No schedule selected.")},m(n,t){b(n,e,t)},p:U,d(n){n&&$(e)}}}function Kt(s){let e,n=s[1].type+"",t,l,a=s[1].id.toUpperCase()+"",o;return{c(){e=h("Schedule for "),t=h(n),l=v(),o=h(a)},m(c,i){b(c,e,i),b(c,t,i),b(c,l,i),b(c,o,i)},p(c,i){i&2&&n!==(n=c[1].type+"")&&I(t,n),i&2&&a!==(a=c[1].id.toUpperCase()+"")&&I(o,a)},d(c){c&&$(e),c&&$(t),c&&$(l),c&&$(o)}}}function Ve(s){let e,n;return e=new zt({props:{appointment:s[8]}}),{c(){se(e.$$.fragment)},m(t,l){oe(e,t,l),n=!0},p(t,l){const a={};l&1&&(a.appointment=t[8]),e.$set(a)},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function Vt(s){let e,n,t,l,a,o=x().week()-2+s[3]+"",c,i,u,f,g,_,N,w,p,y,j,L,R,ee,O,H,G,K,V,z=!s[3]&&Ke();function P(C,D){return C[2]?Zt:Ft}let X=P(s),W=X(s);j=new Ut({}),R=new Ot({});let A=s[0],T=[];for(let C=0;C<A.length;C+=1)T[C]=Ve(Ge(s,A,C));const Q=C=>F(T[C],1,1,()=>{T[C]=null});return H=new Ht({}),{c(){e=d("h3"),n=d("button"),n.textContent="arrow_back_ios_new",t=v(),l=d("span"),a=h("Week: "),c=h(o),i=v(),z&&z.c(),u=v(),f=d("button"),f.textContent="arrow_forward_ios",g=v(),_=d("div"),N=v(),w=d("h2"),W.c(),p=v(),y=d("div"),se(j.$$.fragment),L=v(),se(R.$$.fragment),ee=v();for(let C=0;C<T.length;C+=1)T[C].c();O=v(),se(H.$$.fragment),m(n,"class","material-icons svelte-xvv2jv"),m(l,"class","svelte-xvv2jv"),m(f,"class","material-icons svelte-xvv2jv"),m(_,"class","sep svelte-xvv2jv"),m(e,"class","svelte-xvv2jv"),m(w,"class","svelte-xvv2jv"),m(y,"class","grid svelte-xvv2jv")},m(C,D){b(C,e,D),r(e,n),r(e,t),r(e,l),r(l,a),r(l,c),r(l,i),z&&z.m(l,null),r(e,u),r(e,f),r(e,g),r(e,_),b(C,N,D),b(C,w,D),W.m(w,null),b(C,p,D),b(C,y,D),oe(j,y,null),r(y,L),oe(R,y,null),r(y,ee);for(let B=0;B<T.length;B+=1)T[B].m(y,null);r(y,O),oe(H,y,null),G=!0,K||(V=[J(n,"click",s[4]),J(f,"click",s[5])],K=!0)},p(C,[D]){if((!G||D&8)&&o!==(o=x().week()-2+C[3]+"")&&I(c,o),C[3]?z&&(z.d(1),z=null):z||(z=Ke(),z.c(),z.m(l,null)),X===(X=P(C))&&W?W.p(C,D):(W.d(1),W=X(C),W&&(W.c(),W.m(w,null))),D&1){A=C[0];let B;for(B=0;B<A.length;B+=1){const Y=Ge(C,A,B);T[B]?(T[B].p(Y,D),q(T[B],1)):(T[B]=Ve(Y),T[B].c(),q(T[B],1),T[B].m(y,O))}for(Je(),B=A.length;B<T.length;B+=1)Q(B);Qe()}},i(C){if(!G){q(j.$$.fragment,C),q(R.$$.fragment,C);for(let D=0;D<A.length;D+=1)q(T[D]);q(H.$$.fragment,C),G=!0}},o(C){F(j.$$.fragment,C),F(R.$$.fragment,C),T=T.filter(Boolean);for(let D=0;D<T.length;D+=1)F(T[D]);F(H.$$.fragment,C),G=!1},d(C){C&&$(e),z&&z.d(),C&&$(N),C&&$(w),W.d(),C&&$(p),C&&$(y),ae(j),ae(R),fe(T,C),ae(H),K=!1,ke(V)}}}function Xt(s,e,n){x.extend(ye),x.extend(Me),x.extend(Te);let t=[],l=[],a={id:""},o=!1,c=0;et.subscribe(g=>{g&&(n(1,a=g),i(g.type,g.id))});async function i(g,_){n(2,o=!0),console.log(g,_);let N;g=="student"?N=await pt(_,c):N=await ft(_),t=Se(N.response.data,"start"),n(0,l=[]),console.log(t);for(let w=0;w<t.length;w++){const p=t[w];console.log(p);const y=new Date(p.start*1e3).getDay()-new Date(pe(ue.prev)).getDay()+2;l.push({rowNr:y,startMin:new Date(p.start*1e3).getHours()*60+new Date(p.start*1e3).getMinutes(),endMin:new Date(p.end*1e3).getHours()*60+new Date(p.end*1e3).getMinutes(),slotName:p.startTimeSlotName,locations:p.locations,teachers:p.teachers,subjects:p.subjects,cancelled:p.cancelled,changeWarning:p.changeDescription,teacherChanged:p.teacherChanged,locationChanged:p.locationChanged,timeChanged:p.timeChanged,start:{h:new Date(p.start*1e3).getHours(),m:new Date(p.start*1e3).getMinutes()},end:{h:new Date(p.end*1e3).getHours(),m:new Date(p.end*1e3).getMinutes()},classes:p.groups,startTimeStamp:p.start,endTimeStamp:p.end})}n(2,o=!1)}function u(){n(3,c-=1),i(a.type,a.id)}function f(){n(3,c+=1),i(a.type,a.id)}return[l,a,o,c,u,f,i]}class Jt extends te{constructor(e){super();le(this,e,Xt,Vt,ne,{openSched:6})}get openSched(){return this.$$.ctx[6]}}function Qt(s){let e,n,t;return n=new Jt({}),{c(){e=d("div"),se(n.$$.fragment),m(e,"class","content svelte-1nic1ov"),E(e,"noRightBar",s[0])},m(l,a){b(l,e,a),oe(n,e,null),t=!0},p(l,[a]){a&1&&E(e,"noRightBar",l[0])},i(l){t||(q(n.$$.fragment,l),t=!0)},o(l){F(n.$$.fragment,l),t=!1},d(l){l&&$(e),ae(n)}}}function xt(s,e,n){let t;return be.subscribe(l=>n(0,t=!l)),[t]}class el extends te{constructor(e){super();le(this,e,xt,Qt,ne,{})}}function tl(s){let e,n,t,l,a,o,c;return n=new el({}),l=new Bt({}),o=new Dt({}),{c(){e=d("div"),se(n.$$.fragment),t=v(),se(l.$$.fragment),a=v(),se(o.$$.fragment),m(e,"class","bg svelte-36otyo")},m(i,u){b(i,e,u),oe(n,e,null),r(e,t),oe(l,e,null),r(e,a),oe(o,e,null),c=!0},p:U,i(i){c||(q(n.$$.fragment,i),q(l.$$.fragment,i),q(o.$$.fragment,i),c=!0)},o(i){F(n.$$.fragment,i),F(l.$$.fragment,i),F(o.$$.fragment,i),c=!1},d(i){i&&$(e),ae(n),ae(l),ae(o)}}}class ll extends te{constructor(e){super();le(this,e,null,tl,ne,{})}}function nl(s){let e,n;return e=new vt({}),{c(){se(e.$$.fragment)},m(t,l){oe(e,t,l),n=!0},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function sl(s){let e,n;return e=new ll({}),{c(){se(e.$$.fragment)},m(t,l){oe(e,t,l),n=!0},i(t){n||(q(e.$$.fragment,t),n=!0)},o(t){F(e.$$.fragment,t),n=!1},d(t){ae(e,t)}}}function ol(s){let e,n,t,l;const a=[sl,nl],o=[];function c(i,u){return i[0]?0:1}return n=c(s),t=o[n]=a[n](s),{c(){e=d("div"),t.c()},m(i,u){b(i,e,u),o[n].m(e,null),l=!0},p(i,[u]){let f=n;n=c(i),n!==f&&(Je(),F(o[f],1,1,()=>{o[f]=null}),Qe(),t=o[n],t||(t=o[n]=a[n](i),t.c()),q(t,1),t.m(e,null))},i(i){l||(q(t),l=!0)},o(i){F(t),l=!1},d(i){i&&$(e),o[n].d()}}}function al(s,e,n){let t;return re.subscribe(l=>{n(0,t=l)}),Xe(async()=>{await lt()}),[t]}class rl extends te{constructor(e){super();le(this,e,al,ol,ne,{})}}new rl({target:document.getElementById("app")});
