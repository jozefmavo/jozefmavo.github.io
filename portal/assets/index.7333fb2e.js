import{w as Ne,S as G,i as Z,s as K,e as p,a as v,b as d,t as X,c as C,d as o,l as x,n as W,f as w,o as Te,g as Re,h as Se,j as S,k as ae,m as E,p as we,q as ke,r as ve,u as ht,v as O,x as z,y as T,z as P,A as R,B as Me,C as De,D as Fe,E as q,F as We,G as He,H as Ye,I as gt,J as _t}from"./vendor.e0e76b5d.js";const wt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};wt();const ue=new URLSearchParams(location.search),Ae="1201",kt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",yt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Oe=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["classSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),je=Ne(),St=Ne(!0),qe=Ne();let Ie=Ne(!1);const $t=Ne(),Be=Ne();function Mt(l){let e,n,t,s,a,r,i,u,c,h,_,m,k;return{c(){e=p("div"),n=p("div"),t=p("h1"),t.textContent="Login",s=v(),a=p("p"),a.textContent="Please provide login information to continue to Zermelo.",r=v(),i=p("input"),u=v(),c=p("input"),h=v(),_=p("button"),_.textContent="Login",d(t,"class","svelte-1w0gyqm"),d(a,"class","svelte-1w0gyqm"),d(i,"placeholder","schoolname"),d(i,"class","svelte-1w0gyqm"),X(i,"error",l[2]),d(c,"placeholder","pairing code"),d(c,"type","number"),d(c,"class","svelte-1w0gyqm"),X(c,"error",l[2]),d(_,"class","svelte-1w0gyqm"),d(n,"class","centered svelte-1w0gyqm"),d(e,"class","svelte-1w0gyqm")},m(f,$){C(f,e,$),o(e,n),o(n,t),o(n,s),o(n,a),o(n,r),o(n,i),l[4](i),o(n,u),o(n,c),l[5](c),o(n,h),o(n,_),m||(k=x(_,"click",l[3]),m=!0)},p(f,[$]){$&4&&X(i,"error",f[2]),$&4&&X(c,"error",f[2])},i:W,o:W,d(f){f&&w(e),l[4](null),l[5](null),m=!1,k()}}}function Dt(l,e,n){let t,s,a;Te(async()=>{console.log("login loaded!"),await Pe()&&pe("HomePage")});async function r(){if(!t.value||!s.value){i();return}console.debug("Logging in:"),await Pe(t.value,s.value),Se(ee)?window.location.reload():i()}function i(){n(2,a=!0),setTimeout(()=>{n(2,a=!1)},3e3)}function u(h){Re[h?"unshift":"push"](()=>{t=h,n(0,t)})}function c(h){Re[h?"unshift":"push"](()=>{s=h,n(1,s)})}return[t,s,a,r,u,c]}class Nt extends G{constructor(e){super();Z(this,e,Dt,Mt,K,{})}}function Tt(l){let e,n,t,s,a,r,i,u,c,h=(l[0].classes||"")+"",_,m,k;return{c(){e=p("div"),n=p("p"),t=p("b"),s=S(l[6]),a=v(),r=p("p"),i=S(l[7]),u=v(),c=p("p"),_=S(h),d(n,"class","svelte-15r6w55"),d(r,"class","svelte-15r6w55"),d(c,"class","classes svelte-15r6w55"),d(e,"class","appointment svelte-15r6w55"),ae(e,"left",l[3]+"px"),ae(e,"width",l[4]+"px"),ae(e,"top",l[5]+"px"),X(e,"cancelled",l[0].cancelled),X(e,"changed",l[1]),X(e,"newTime",l[2])},m(f,$){C(f,e,$),o(e,n),o(n,t),o(t,s),o(e,a),o(e,r),o(r,i),o(e,u),o(e,c),o(c,_),m||(k=x(e,"click",l[8]),m=!0)},p(f,[$]){$&64&&E(s,f[6]),$&128&&E(i,f[7]),$&1&&h!==(h=(f[0].classes||"")+"")&&E(_,h),$&8&&ae(e,"left",f[3]+"px"),$&16&&ae(e,"width",f[4]+"px"),$&32&&ae(e,"top",f[5]+"px"),$&1&&X(e,"cancelled",f[0].cancelled),$&2&&X(e,"changed",f[1]),$&4&&X(e,"newTime",f[2])},i:W,o:W,d(f){f&&w(e),m=!1,k()}}}function jt(l,e,n){let{appointment:t}=e;function s(){$t.set(t),Ie.set(!0)}let a,r=!1,i,u,c,h,_;return Te(()=>{n(1,a=t.teacherChanged||t.locationChanged),n(2,r=t.timeChanged),n(3,i=(t.startMin-440)*2),n(4,u=(t.endMin-t.startMin)*2-2),n(5,c=42+t.rowNr*80-80),n(6,h=`${t.subjects[0]||t.teachers.join(" ").toUpperCase()} - ${t.locations.length?t.locations:"0_00"}`),n(7,_=t.subjects[0]?t.teachers.join(" ").toUpperCase():"")}),l.$$set=m=>{"appointment"in m&&n(0,t=m.appointment)},[t,a,r,i,u,c,h,_,s]}class vt extends G{constructor(e){super();Z(this,e,jt,Tt,K,{appointment:0})}}function Ge(l,e,n){const t=l.slice();return t[1]=e[n],t}function Ze(l){let e,n=l[1].d+"",t,s;return{c(){e=p("div"),t=S(n),s=v(),d(e,"class","appointment svelte-j46pnt"),ae(e,"left","0px"),ae(e,"width","80px"),ae(e,"top",2+80*l[1].i-40+"px"),X(e,"today",new Date().getDay()==l[1].i)},m(a,r){C(a,e,r),o(e,t),o(e,s)},p(a,r){r&1&&X(e,"today",new Date().getDay()==a[1].i)},d(a){a&&w(e)}}}function It(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=Ze(Ge(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=we()},m(s,a){for(let r=0;r<t.length;r+=1)t[r].m(s,a);C(s,e,a)},p(s,[a]){if(a&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const i=Ge(s,n,r);t[r]?t[r].p(i,a):(t[r]=Ze(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:W,o:W,d(s){ke(t,s),s&&w(e)}}}function Lt(l){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class bt extends G{constructor(e){super();Z(this,e,Lt,It,K,{})}}function Ke(l,e,n){const t=l.slice();return t[1]=e[n],t}function Je(l){let e,n=l[1].start.h.toString().padStart(2,"0")+"",t,s,a=l[1].start.m.toString().padStart(2,"0")+"",r,i,u=l[1].end.h.toString().padStart(2,"0")+"",c,h,_=l[1].end.m.toString().padStart(2,"0")+"",m,k;return{c(){e=p("div"),t=S(n),s=S(":"),r=S(a),i=S(" - "),c=S(u),h=S(":"),m=S(_),k=v(),d(e,"class","appointment svelte-198yggw"),ae(e,"left",(l[1].startMin-440)*2+"px"),ae(e,"width",(l[1].endMin-l[1].startMin)*2-2+"px"),ae(e,"height","40px"),ae(e,"top","0px")},m(f,$){C(f,e,$),o(e,t),o(e,s),o(e,r),o(e,i),o(e,c),o(e,h),o(e,m),o(e,k)},p:W,d(f){f&&w(e)}}}function Pt(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=Je(Ke(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=we()},m(s,a){for(let r=0;r<t.length;r+=1)t[r].m(s,a);C(s,e,a)},p(s,[a]){if(a&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const i=Ke(s,n,r);t[r]?t[r].p(i,a):(t[r]=Je(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:W,o:W,d(s){ke(t,s),s&&w(e)}}}function Wt(l){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class Ct extends G{constructor(e){super();Z(this,e,Wt,Pt,K,{})}}const Ht=new Map([["groupindepartments",["id","name","isMentorGroup"]],["departmentsofbranches",["id","code"]]]);function Qe(l){return(Ht.get(l)||[]).join("%2C")}function Ve(l,e,n){const t=l.slice();return t[18]=e[n],t}function Yt(l){let e;return{c(){e=p("span"),e.textContent="Loading..."},m(n,t){C(n,e,t)},p:W,d(n){n&&w(e)}}}function At(l){let e=(l[3]||"No schedule selected.")+"",n;return{c(){n=S(e)},m(t,s){C(t,n,s)},p(t,s){s&8&&e!==(e=(t[3]||"No schedule selected.")+"")&&E(n,e)},d(t){t&&w(n)}}}function Xe(l){let e,n;return e=new vt({props:{appointment:l[18]}}),{c(){O(e.$$.fragment)},m(t,s){z(e,t,s),n=!0},p(t,s){const a={};s&1&&(a.appointment=t[18]),e.$set(a)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function Bt(l){let e,n,t,s,a,r,i,u,c,h,_,m,k,f,$=parseInt(ve().format("W"))+l[2]+"",L,F,Y,y,H,I,j,ie,re,oe,le,A,J,ge,Q,he,te,ne,ce;I=new ht({props:{value:l[5],items:l[4]}}),I.$on("select",l[6]);function _e(g,D){return g[1]?Yt:At}let se=_e(l),U=se(l);J=new bt({}),Q=new Ct({});let V=l[0],M=[];for(let g=0;g<V.length;g+=1)M[g]=Xe(Ve(l,V,g));const ye=g=>P(M[g],1,1,()=>{M[g]=null});return{c(){e=p("div"),n=p("h3"),t=p("button"),t.textContent="arrow_back_ios_new",s=v(),a=p("button"),a.textContent="date_range",r=v(),i=p("button"),i.textContent="arrow_forward_ios",u=v(),c=p("button"),c.textContent="list",h=v(),_=p("div"),m=v(),k=p("span"),f=S("Week "),L=S($),F=v(),Y=p("div"),y=v(),H=p("div"),O(I.$$.fragment),j=v(),ie=p("div"),re=v(),oe=p("h3"),U.c(),le=v(),A=p("div"),O(J.$$.fragment),ge=v(),O(Q.$$.fragment),he=v();for(let g=0;g<M.length;g+=1)M[g].c();d(t,"class","material-icons"),d(a,"class","material-icons"),d(i,"class","material-icons"),d(c,"class","material-icons"),d(_,"class","sep"),d(k,"class","week"),d(Y,"class","sep"),d(H,"class","select-holder"),d(ie,"class","sep"),d(e,"class","header"),d(A,"class","grid")},m(g,D){C(g,e,D),o(e,n),o(n,t),o(n,s),o(n,a),o(n,r),o(n,i),o(n,u),o(n,c),o(n,h),o(n,_),o(n,m),o(n,k),o(k,f),o(k,L),o(n,F),o(n,Y),o(n,y),o(n,H),z(I,H,null),o(n,j),o(n,ie),o(e,re),o(e,oe),U.m(oe,null),C(g,le,D),C(g,A,D),z(J,A,null),o(A,ge),z(Q,A,null),o(A,he);for(let N=0;N<M.length;N+=1)M[N].m(A,null);te=!0,ne||(ce=[x(t,"click",l[7]),x(a,"click",l[9]),x(i,"click",l[8]),x(c,"click",l[11])],ne=!0)},p(g,[D]){(!te||D&4)&&$!==($=parseInt(ve().format("W"))+g[2]+"")&&E(L,$);const N={};if(D&16&&(N.items=g[4]),I.$set(N),se===(se=_e(g))&&U?U.p(g,D):(U.d(1),U=se(g),U&&(U.c(),U.m(oe,null))),D&1){V=g[0];let b;for(b=0;b<V.length;b+=1){const B=Ve(g,V,b);M[b]?(M[b].p(B,D),T(M[b],1)):(M[b]=Xe(B),M[b].c(),T(M[b],1),M[b].m(A,null))}for(Me(),b=V.length;b<M.length;b+=1)ye(b);De()}},i(g){if(!te){T(I.$$.fragment,g),T(J.$$.fragment,g),T(Q.$$.fragment,g);for(let D=0;D<V.length;D+=1)T(M[D]);te=!0}},o(g){P(I.$$.fragment,g),P(J.$$.fragment,g),P(Q.$$.fragment,g),M=M.filter(Boolean);for(let D=0;D<M.length;D+=1)P(M[D]);te=!1},d(g){g&&w(e),R(I),U.d(),g&&w(le),g&&w(A),R(J),R(Q),ke(M,g),ne=!1,Fe(ce)}}}function Et(l,e,n){q.extend(We),q.extend(He),q.extend(Ye);let t=[],s=[],a={id:""},r=!1,i=0,u,c=[],h=[],_,m=[];Te(async()=>{c=await be(de,fe,`departmentsofbranches?fields=${Qe("departmentsofbranches")}&schoolInSchoolYear=${Ae}`,!0),c.response.data.forEach(async y=>{const H=(await be(de,fe,`groupindepartments?fields=${Qe("groupindepartments")}&isMentorOrMainGroup=true&departmentOfBranch=${y.id}`,!0)).response.data;h.push(...$e(H,"name"))}),setTimeout(()=>{n(4,m=[]),$e(h,"name").forEach(y=>{m.push({value:y.id,label:y.name})})},350)});function k(y){const H=y.detail;n(3,u="Schedule for "+y.detail.label),f(H.value)}async function f(y){let H;n(0,s=[]),H=await kn(y,i+1),t=$e(H.response.data,"start"),n(0,s=[]),a={id:y};for(let I=0;I<t.length;I++){const j=t[I],ie=new Date(j.start*1e3).getDay()-new Date(Ce(me.prev)).getDay()+2;s.push({rowNr:ie,startMin:new Date(j.start*1e3).getHours()*60+new Date(j.start*1e3).getMinutes(),endMin:new Date(j.end*1e3).getHours()*60+new Date(j.end*1e3).getMinutes(),slotName:j.startTimeSlotName,locations:j.locations,teachers:j.teachers,subjects:j.subjects,cancelled:j.cancelled,changeWarning:j.changeDescription,teacherChanged:j.teacherChanged,locationChanged:j.locationChanged,timeChanged:j.timeChanged,start:{h:new Date(j.start*1e3).getHours(),m:new Date(j.start*1e3).getMinutes()},end:{h:new Date(j.end*1e3).getHours(),m:new Date(j.end*1e3).getMinutes()},classes:j.groups,startTimeStamp:j.start,endTimeStamp:j.end})}n(1,r=!1)}function $(){i+parseInt(ve().format("W"))>1&&(n(2,i-=1),f(a.id))}function L(){i+parseInt(ve().format("W"))<52&&(n(2,i+=1),f(a.id))}function F(){i!=0&&(n(2,i=0),f(a.id))}return setInterval(()=>{60*parseInt(q().format("HH"))+parseInt(q().format("m"))},300),[s,r,i,u,m,_,k,$,L,F,f,()=>{pe("EveryonePage")}]}class Ut extends G{constructor(e){super();Z(this,e,Et,Bt,K,{openSched:10})}get openSched(){return this.$$.ctx[10]}}function xe(l){let e,n;return e=new Ut({}),{c(){O(e.$$.fragment)},m(t,s){z(e,t,s),n=!0},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function qt(l){let e,n,t=l[0]&&xe();return{c(){t&&t.c(),e=we()},m(s,a){t&&t.m(s,a),C(s,e,a),n=!0},p(s,[a]){s[0]?t?a&1&&T(t,1):(t=xe(),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(Me(),P(t,1,1,()=>{t=null}),De())},i(s){n||(T(t),n=!0)},o(s){P(t),n=!1},d(s){t&&t.d(s),s&&w(e)}}}function Ft(l,e,n){let t;return ee.subscribe(s=>n(0,t=s)),[t]}class Ot extends G{constructor(e){super();Z(this,e,Ft,qt,K,{})}}function Ee(l,e){qe.set({type:l,id:e}),pe("SchedulePeople")}function et(l,e,n){const t=l.slice();return t[2]=e[n],t}function tt(l){let e,n=l[2].firstName+"",t,s,a=(l[2].prefix||"")+"",r,i,u=l[2].lastName+"",c,h,_,m=l[2].code.toUpperCase()+"",k,f,$,L;function F(){return l[1](l[2])}return{c(){e=p("button"),t=S(n),s=v(),r=S(a),i=v(),c=S(u),h=v(),_=p("span"),k=S(m),f=v(),d(_,"class","right svelte-x03emp"),d(e,"class","svelte-x03emp")},m(Y,y){C(Y,e,y),o(e,t),o(e,s),o(e,r),o(e,i),o(e,c),o(e,h),o(e,_),o(_,k),o(e,f),$||(L=x(e,"click",F),$=!0)},p(Y,y){l=Y,y&1&&n!==(n=l[2].firstName+"")&&E(t,n),y&1&&a!==(a=(l[2].prefix||"")+"")&&E(r,a),y&1&&u!==(u=l[2].lastName+"")&&E(c,u),y&1&&m!==(m=l[2].code.toUpperCase()+"")&&E(k,m)},d(Y){Y&&w(e),$=!1,L()}}}function zt(l){let e,n,t,s,a,r=l[0].length+"",i,u,c,h=l[0],_=[];for(let m=0;m<h.length;m+=1)_[m]=tt(et(l,h,m));return{c(){e=p("div"),n=p("h3"),t=p("span"),t.textContent="Students",s=v(),a=p("span"),i=S(r),u=S("\xA0\xA0"),c=v();for(let m=0;m<_.length;m+=1)_[m].c();d(t,"class","svelte-x03emp"),d(a,"class","right svelte-x03emp"),d(n,"class","svelte-x03emp"),d(e,"class","svelte-x03emp")},m(m,k){C(m,e,k),o(e,n),o(n,t),o(n,s),o(n,a),o(a,i),o(a,u),o(e,c);for(let f=0;f<_.length;f+=1)_[f].m(e,null)},p(m,[k]){if(k&1&&r!==(r=m[0].length+"")&&E(i,r),k&1){h=m[0];let f;for(f=0;f<h.length;f+=1){const $=et(m,h,f);_[f]?_[f].p($,k):(_[f]=tt($),_[f].c(),_[f].m(e,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=h.length}},i:W,o:W,d(m){m&&w(e),ke(_,m)}}}function Rt(l,e,n){let t=[];return ee.subscribe(async a=>{if(a==!0){n(0,t=(await Ue()).response.data),t.length>0&&n(0,t=$e(t,"firstName")),t.length>0&&n(0,t=$e(t,"lastName"));for(let r=0;r<t.length;r++);}}),[t,a=>{Ee("student",a.code)}]}class Gt extends G{constructor(e){super();Z(this,e,Rt,zt,K,{})}}function nt(l,e,n){const t=l.slice();return t[7]=e[n],t}function st(l){let e,n=(l[7].prefix||"")+"",t,s,a=l[7].lastName+"",r,i,u,c=l[7].code.toUpperCase()+"",h,_,m,k;function f(){return l[1](l[7])}return{c(){e=p("button"),t=S(n),s=v(),r=S(a),i=v(),u=p("span"),h=S(c),_=v(),d(u,"class","right svelte-uj3r1s"),d(e,"class","svelte-uj3r1s")},m($,L){C($,e,L),o(e,t),o(e,s),o(e,r),o(e,i),o(e,u),o(u,h),o(e,_),m||(k=x(e,"click",f),m=!0)},p($,L){l=$,L&1&&n!==(n=(l[7].prefix||"")+"")&&E(t,n),L&1&&a!==(a=l[7].lastName+"")&&E(r,a),L&1&&c!==(c=l[7].code.toUpperCase()+"")&&E(h,c)},d($){$&&w(e),m=!1,k()}}}function Zt(l){let e,n,t,s,a,r=l[0].length+"",i,u,c,h=l[0],_=[];for(let m=0;m<h.length;m+=1)_[m]=st(nt(l,h,m));return{c(){e=p("div"),n=p("h3"),t=p("span"),t.textContent="Teachers",s=v(),a=p("span"),i=S(r),u=S("\xA0\xA0"),c=v();for(let m=0;m<_.length;m+=1)_[m].c();d(t,"class","svelte-uj3r1s"),d(a,"class","right svelte-uj3r1s"),d(n,"class","svelte-uj3r1s"),d(e,"class","svelte-uj3r1s")},m(m,k){C(m,e,k),o(e,n),o(n,t),o(n,s),o(n,a),o(a,i),o(a,u),o(e,c);for(let f=0;f<_.length;f+=1)_[f].m(e,null)},p(m,[k]){if(k&1&&r!==(r=m[0].length+"")&&E(i,r),k&1){h=m[0];let f;for(f=0;f<h.length;f+=1){const $=nt(m,h,f);_[f]?_[f].p($,k):(_[f]=st($),_[f].c(),_[f].m(e,null))}for(;f<_.length;f+=1)_[f].d(1);_.length=h.length}},i:W,o:W,d(m){m&&w(e),ke(_,m)}}}function Kt(l,e,n){let t=[],s=[];return ee.subscribe(async r=>{if(r==!0){t=(await Ue()).response.data,n(0,s=(await ze()).response.data),t.length>0&&(t=$e(t,"firstName")),s.length>0&&n(0,s=$e(s,"lastName"));for(let i=0;i<t.length;i++);}}),[s,r=>{Ee("teacher",r.code)}]}class Jt extends G{constructor(e){super();Z(this,e,Kt,Zt,K,{})}}function Qt(l){let e,n,t,s;return e=new Jt({}),t=new Gt({}),{c(){O(e.$$.fragment),n=v(),O(t.$$.fragment)},m(a,r){z(e,a,r),C(a,n,r),z(t,a,r),s=!0},p:W,i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),s=!1},d(a){R(e,a),a&&w(n),R(t,a)}}}class Vt extends G{constructor(e){super();Z(this,e,null,Qt,K,{})}}function Xt(l){let e;return{c(){e=p("h1"),e.textContent="Home!"},m(n,t){C(n,e,t)},p:W,i:W,o:W,d(n){n&&w(e)}}}class xt extends G{constructor(e){super();Z(this,e,null,Xt,K,{})}}function en(l){let e,n,t,s,a,r;return{c(){e=p("div"),n=p("h1"),n.textContent="404",t=v(),s=p("button"),s.textContent="Home",d(e,"class","content svelte-onfw5")},m(i,u){C(i,e,u),o(e,n),o(e,t),o(e,s),a||(r=x(s,"click",l[0]),a=!0)},p:W,i:W,o:W,d(i){i&&w(e),a=!1,r()}}}function tn(l){function e(){pe("HomePage")}return[e]}class nn extends G{constructor(e){super();Z(this,e,tn,en,K,{})}}function lt(l){let e,n,t;return n=new ht({props:{value:l[1],items:l[0]}}),n.$on("select",l[2]),{c(){e=p("div"),O(n.$$.fragment),d(e,"class","select-holder")},m(s,a){C(s,e,a),z(n,e,null),t=!0},p(s,a){const r={};a&1&&(r.items=s[0]),n.$set(r)},i(s){t||(T(n.$$.fragment,s),t=!0)},o(s){P(n.$$.fragment,s),t=!1},d(s){s&&w(e),R(n)}}}function sn(l){let e,n,t=l[0]&&lt(l);return{c(){t&&t.c(),e=we()},m(s,a){t&&t.m(s,a),C(s,e,a),n=!0},p(s,[a]){s[0]?t?(t.p(s,a),a&1&&T(t,1)):(t=lt(s),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(Me(),P(t,1,1,()=>{t=null}),De())},i(s){n||(T(t),n=!0)},o(s){P(t),n=!1},d(s){t&&t.d(s),s&&w(e)}}}function ln(l,e,n){let t,s=[];Te(r);function a(i){const u=i.detail.value,c=u.code;status="Schedule for "+i.label,console.log(i,u,c),Ee(u.isEmployee?"teacher":"student",c)}async function r(){const i=Array.prototype.concat((await ze()).response.data,(await Ue()).response.data);console.table(i),n(0,s=[]);for(let u=0;u<i.length;u++){const[c,h,_,m]=[i[u].firstName||"",i[u].prefix||"",i[u].lastName||"",i[u].code||""];s.push({label:`${c} ${h} ${_}`+(i[u].isEmployee?` (${m.toUpperCase()})`:""),value:i[u]})}}return Be.subscribe(r),[s,t,a]}class an extends G{constructor(e){super();Z(this,e,ln,sn,K,{})}}function at(l,e,n){const t=l.slice();return t[12]=e[n],t}function rn(l){let e;return{c(){e=S("Loading...")},m(n,t){C(n,e,t)},p:W,d(n){n&&w(e)}}}function on(l){let e;function n(a,r){return a[1].id?un:cn}let t=n(l),s=t(l);return{c(){s.c(),e=we()},m(a,r){s.m(a,r),C(a,e,r)},p(a,r){t===(t=n(a))&&s?s.p(a,r):(s.d(1),s=t(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&w(e)}}}function cn(l){let e;return{c(){e=S("No schedule selected.")},m(n,t){C(n,e,t)},p:W,d(n){n&&w(e)}}}function un(l){let e=(l[4]||"Loading...")+"",n;return{c(){n=S(e)},m(t,s){C(t,n,s)},p(t,s){s&16&&e!==(e=(t[4]||"Loading...")+"")&&E(n,e)},d(t){t&&w(n)}}}function rt(l){let e,n;return e=new vt({props:{appointment:l[12]}}),{c(){O(e.$$.fragment)},m(t,s){z(e,t,s),n=!0},p(t,s){const a={};s&1&&(a.appointment=t[12]),e.$set(a)},i(t){n||(T(e.$$.fragment,t),n=!0)},o(t){P(e.$$.fragment,t),n=!1},d(t){R(e,t)}}}function fn(l){let e,n,t,s,a,r,i,u,c,h,_,m,k,f,$=parseInt(ve().format("W"))+l[3]+"",L,F,Y,y,H,I,j,ie,re,oe,le,A,J,ge,Q,he,te,ne,ce;H=new an({});function _e(g,D){return g[2]?rn:on}let se=_e(l),U=se(l);J=new bt({}),Q=new Ct({});let V=l[0],M=[];for(let g=0;g<V.length;g+=1)M[g]=rt(at(l,V,g));const ye=g=>P(M[g],1,1,()=>{M[g]=null});return{c(){e=p("div"),n=p("h3"),t=p("button"),t.textContent="arrow_back_ios_new",s=v(),a=p("button"),a.textContent="date_range",r=v(),i=p("button"),i.textContent="arrow_forward_ios",u=v(),c=p("button"),c.textContent="list",h=v(),_=p("div"),m=v(),k=p("span"),f=S("Week "),L=S($),F=v(),Y=p("div"),y=v(),O(H.$$.fragment),I=v(),j=p("div"),ie=v(),re=p("h3"),U.c(),oe=v(),le=p("div"),A=p("div"),O(J.$$.fragment),ge=v(),O(Q.$$.fragment),he=v();for(let g=0;g<M.length;g+=1)M[g].c();d(t,"class","material-icons"),d(a,"class","material-icons"),d(i,"class","material-icons"),d(c,"class","material-icons"),d(_,"class","sep"),d(k,"class","week"),d(Y,"class","sep"),d(j,"class","sep"),d(e,"class","header"),d(A,"class","grid"),d(le,"class","content")},m(g,D){C(g,e,D),o(e,n),o(n,t),o(n,s),o(n,a),o(n,r),o(n,i),o(n,u),o(n,c),o(n,h),o(n,_),o(n,m),o(n,k),o(k,f),o(k,L),o(n,F),o(n,Y),o(n,y),z(H,n,null),o(n,I),o(n,j),o(e,ie),o(e,re),U.m(re,null),C(g,oe,D),C(g,le,D),o(le,A),z(J,A,null),o(A,ge),z(Q,A,null),o(A,he);for(let N=0;N<M.length;N+=1)M[N].m(A,null);te=!0,ne||(ce=[x(t,"click",l[5]),x(a,"click",l[7]),x(i,"click",l[6]),x(c,"click",l[9])],ne=!0)},p(g,[D]){if((!te||D&8)&&$!==($=parseInt(ve().format("W"))+g[3]+"")&&E(L,$),se===(se=_e(g))&&U?U.p(g,D):(U.d(1),U=se(g),U&&(U.c(),U.m(re,null))),D&1){V=g[0];let N;for(N=0;N<V.length;N+=1){const b=at(g,V,N);M[N]?(M[N].p(b,D),T(M[N],1)):(M[N]=rt(b),M[N].c(),T(M[N],1),M[N].m(A,null))}for(Me(),N=V.length;N<M.length;N+=1)ye(N);De()}},i(g){if(!te){T(H.$$.fragment,g),T(J.$$.fragment,g),T(Q.$$.fragment,g);for(let D=0;D<V.length;D+=1)T(M[D]);te=!0}},o(g){P(H.$$.fragment,g),P(J.$$.fragment,g),P(Q.$$.fragment,g),M=M.filter(Boolean);for(let D=0;D<M.length;D+=1)P(M[D]);te=!1},d(g){g&&w(e),R(H),U.d(),g&&w(oe),g&&w(le),R(J),R(Q),ke(M,g),ne=!1,Fe(ce)}}}function pn(l,e,n){q.extend(We),q.extend(He),q.extend(Ye);let t=[],s=[],a={id:""},r=!1,i=0,u;qe.subscribe(async f=>{if(f)if(n(2,r=!0),n(1,a=f),c(f.type,f.id),f.type=="teacher"){const $=await wn(f.id);n(4,u=`${$.prefix||""} ${$.lastName||""} (${$.code.toUpperCase()})`),n(2,r=!1)}else{const $=await Cn(f.id);n(4,u=`${$.firstName||""} ${$.prefix||""} ${$.lastName||""} (${$.code.toUpperCase()})`),n(2,r=!1)}}),Te(()=>{const f=new URLSearchParams(location.search),$=f.get("person_id"),L=f.get("person_type");n(2,r=!1),console.error($,L,f.getAll("person")),$&&L&&(qe.set({type:L,id:$}),c(L,$,!0))});async function c(f,$,L=!0){let F;n(0,s=[]),f=="student"?F=await bn($,i+1):F=await vn($,i+1),L&&gt(`./?m=${ue.get("m")}&person_id=${$}&person_type=${f}`),ue.set("person_id",$),ue.set("person_type",f),console.log(F.response),t=$e(F.response.data,"start"),n(0,s=[]);for(let Y=0;Y<t.length;Y++){const y=t[Y],H=new Date(y.start*1e3).getDay()-new Date(Ce(me.prev)).getDay()+2;s.push({rowNr:H,startMin:new Date(y.start*1e3).getHours()*60+new Date(y.start*1e3).getMinutes(),endMin:new Date(y.end*1e3).getHours()*60+new Date(y.end*1e3).getMinutes(),slotName:y.startTimeSlotName,locations:y.locations,teachers:y.teachers,subjects:y.subjects,cancelled:y.cancelled,changeWarning:y.changeDescription,teacherChanged:y.teacherChanged,locationChanged:y.locationChanged,timeChanged:y.timeChanged,start:{h:new Date(y.start*1e3).getHours(),m:new Date(y.start*1e3).getMinutes()},end:{h:new Date(y.end*1e3).getHours(),m:new Date(y.end*1e3).getMinutes()},classes:y.groups,startTimeStamp:y.start,endTimeStamp:y.end})}n(2,r=!1)}function h(){i+parseInt(ve().format("W"))>1&&(n(3,i-=1),c(a.type,a.id))}function _(){i+parseInt(ve().format("W"))<52&&(n(3,i+=1),c(a.type,a.id))}function m(){i!=0&&(n(3,i=0),c(a.type,a.id))}return setInterval(()=>{60*parseInt(q().format("HH"))+parseInt(q().format("m"))},300),[s,a,r,i,u,h,_,m,c,()=>{pe("ListEveryone")}]}class dn extends G{constructor(e){super();Z(this,e,pn,fn,K,{openSched:8})}get openSched(){return this.$$.ctx[8]}}function mn(l){let e,n,t,s,a;return n=new dn({}),{c(){e=p("div"),O(n.$$.fragment),d(e,"class","svelte-za3vn1")},m(r,i){C(r,e,i),z(n,e,null),t=!0,s||(a=x(e,"mousedown",l[0]),s=!0)},p:W,i(r){t||(T(n.$$.fragment,r),t=!0)},o(r){P(n.$$.fragment,r),t=!1},d(r){r&&w(e),R(n),s=!1,a()}}}function hn(l){function e(n){const t=n.composedPath();let s=!0;for(let a=0;a<t.length;a++){const r=t[a];if(r.classList&&r.classList.contains("sidebar")){s=!1;break}}s&&St.set(!1)}return[e]}class gn extends G{constructor(e){super();Z(this,e,hn,mn,K,{})}}function pe(l){const e=Le.has(l);Be.set(Le.get(e?l:"PageNotFound")),ue.set("m",e?l:"PageNotFound");const n=ue.get("person_id")?`&person_id=${ue.get("person_id")}`:"",t=ue.get("person_type")?`&person_type=${ue.get("person_type")}`:"";ue.set("person_id",""),ue.set("class_id",""),gt(`./?m=${e?l:"PageNotFound"}${l=="SchedulePeople"?`${n}${t}`:""}`),Ie.set(!1)}const Le=new Map([["HomePage",{name:"Home",icon:"home",content:xt,sidebar:!0}],["SchedulePeople",{name:"People",icon:"people",content:gn,sidebar:!0}],["ScheduleClasses",{name:"Classes",icon:"event",content:Ot,sidebar:!0}],["ListEveryone",{name:"List",icon:"list",content:Vt,sidebar:!0}],["Login",{name:"Login",icon:"",content:Nt,sidebar:!1}],["PageNotFound",{name:"Page Not Found",icon:"",content:nn,sidebar:!1}]]);q.extend(We);q.extend(He);q.extend(Ye);async function be(l,e,n,t=!0,s,a){if(Se(ee)||s){const r={headers:{Authorization:`Bearer ${l}`},method:a?"POST":"GET"},i=await await fetch(`https://${e}.zportal.nl/api/v3/${n}`,s?{method:a?"POST":"GET"}:r);return t?i.json():i.text()}return t?{}:"{}"}async function _n(l,e){return await be(void 0,e,`oauth/token?grant_type=authorization_code&code=${l}`,!0,!0,!0)}let ee=Ne(!1),de,fe;async function Pe(l,e){if(localStorage.getItem("accessToken")){de=localStorage.getItem("accessToken"),fe=localStorage.getItem("school");const n=await(await fetch(`https://${fe}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${de}`}})).json();return ee.set(n.response.status==200),ee?(console.debug("Zermelo login succeeded from stored access token"),je.set(n.response.data)):console.log("Zermelo login failed from stored access token: server returned ",n.response),Se(ee)}if(!l||!e)return console.log("Zermelo login failed; school or bindcode invalid"),!1;try{const n=await _n(e,l);n.access_token&&(localStorage.setItem("accessToken",n.access_token),localStorage.setItem("school",l),ee.set(!0),je.set((await(await fetch(`https://${fe}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${de}`}})).json()).response.data)),Se(ee)&&console.log("Zermelo login succeeded from provided data",Se(ee))}catch{ee.set(!1)}return Se(ee)}function $n(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),ee.set(!1),pe("Login")}async function Ue(){return await be(de,fe,`${kt}${Ae}`)}async function ze(){return await be(de,fe,`${yt}${Ae}`)}async function vn(l,e=0){const n=Ce(me.prev)+601200*e,t=Ce(me.next)+601200*e;return await be(de,fe,`appointments?start=${n}&end=${t}&teachers=${l}&fields=${Oe.get("teacherSchedule")}`,!0)}async function bn(l,e=0){const n=Ce(me.prev)+601200*e,t=Ce(me.next)+601200*e;return await be(de,fe,`appointments?user=${l}&start=${n}&end=${t}&fields=${Oe.get("studentSchedule")}`,!0)}function Ce(l){let e;return l==me.prev?e=q().weekday(-7).unix():e=q().weekday(0).unix(),e}async function Cn(l){const e=(await Ue()).response.data;for(let n=0;n<e.length;n++)if(e[n].code==l)return e[n];return{}}async function wn(l){const e=(await ze()).response.data;for(let n=0;n<e.length;n++)if(e[n].code==l)return e[n];return{}}function $e(l,e){return l.sort(function(n,t){var s=n[e],a=t[e];return s<a?-1:s>a?1:0})}async function kn(l,e){const n=Ce(me.prev)+601200*e,t=Ce(me.next)+601200*e;return await be(de,fe,`appointments?valid=true&start=${n}&end=${t}&fields=${Oe.get("classSchedule")}&schoolInSchoolYear=${Ae}&containsStudentsFromGroupInDepartment=${l}`)}var me=(l=>(l[l.prev=0]="prev",l[l.next=1]="next",l))(me||{});function ot(l,e,n){const t=l.slice();return t[1]=e[n],t}function it(l){let e,n=l[1].icon+"",t,s,a,r,i;return{c(){e=p("button"),t=S(n),s=v(),d(e,"class","material-icons"),d(e,"title",a=l[1].caption)},m(u,c){C(u,e,c),o(e,t),o(e,s),r||(i=x(e,"click",l[1].action),r=!0)},p(u,c){l=u},d(u){u&&w(e),r=!1,i()}}}function yn(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=it(ot(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=we()},m(s,a){for(let r=0;r<t.length;r+=1)t[r].m(s,a);C(s,e,a)},p(s,[a]){if(a&1){n=s[0];let r;for(r=0;r<n.length;r+=1){const i=ot(s,n,r);t[r]?t[r].p(i,a):(t[r]=it(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:W,o:W,d(s){ke(t,s),s&&w(e)}}}function Sn(l){return[[{icon:"logout",action:()=>{$n()},caption:"Logout"},{icon:"calendar_today",action:()=>{Ee("student",Se(je)[0].code)},caption:"Show own calendar"}]]}class Mn extends G{constructor(e){super();Z(this,e,Sn,yn,K,{})}}function Dn(l){let e,n,t,s,a,r,i,u,c,h,_,m,k,f,$,L,F,Y=l[0].firstName+"",y,H;return h=new Mn({}),{c(){e=p("div"),n=p("div"),t=p("b"),t.textContent="Zermelo",s=v(),a=p("div"),r=v(),i=S(fe),u=v(),c=p("div"),O(h.$$.fragment),_=v(),m=p("div"),k=v(),f=p("div"),$=p("span"),$.textContent="person",L=v(),F=p("p"),y=S(Y),d(a,"class","sep"),d(n,"class","header"),d(m,"class","sep"),d($,"class","material-icons"),d(f,"class","userprofile"),d(c,"class","right"),d(e,"class","tb")},m(I,j){C(I,e,j),o(e,n),o(n,t),o(n,s),o(n,a),o(n,r),o(n,i),o(e,u),o(e,c),z(h,c,null),o(c,_),o(c,m),o(c,k),o(c,f),o(f,$),o(f,L),o(f,F),o(F,y),H=!0},p(I,[j]){(!H||j&1)&&Y!==(Y=I[0].firstName+"")&&E(y,Y)},i(I){H||(T(h.$$.fragment,I),H=!0)},o(I){P(h.$$.fragment,I),H=!1},d(I){I&&w(e),R(h)}}}function Nn(l,e,n){let t;return je.subscribe(s=>{n(0,t=s[0])}),[t]}class Tn extends G{constructor(e){super();Z(this,e,Nn,Dn,K,{})}}function ct(l,e,n){const t=l.slice();return t[2]=e[n][0],t[3]=e[n][1],t}function jn(l){let e,n,t=l[3].icon+"",s,a,r,i=l[3].name+"",u,c,h,_;function m(){return l[1](l[2])}return{c(){e=p("button"),n=p("span"),s=S(t),a=v(),r=p("p"),u=S(i),c=v(),d(n,"class","material-icons svelte-4mw4la"),d(r,"class","svelte-4mw4la"),d(e,"class","svelte-4mw4la"),X(e,"selected",l[0]&&l[0].name==l[3].name)},m(k,f){C(k,e,f),o(e,n),o(n,s),o(e,a),o(e,r),o(r,u),o(e,c),h||(_=x(e,"click",m),h=!0)},p(k,f){l=k,f&1&&X(e,"selected",l[0]&&l[0].name==l[3].name)},d(k){k&&w(e),h=!1,_()}}}function ut(l){let e,n=l[3].sidebar&&l[3]&&jn(l);return{c(){n&&n.c(),e=we()},m(t,s){n&&n.m(t,s),C(t,e,s)},p(t,s){t[3].sidebar&&t[3]&&n.p(t,s)},d(t){n&&n.d(t),t&&w(e)}}}function In(l){let e,n=[...Le],t=[];for(let s=0;s<n.length;s+=1)t[s]=ut(ct(l,n,s));return{c(){e=p("div");for(let s=0;s<t.length;s+=1)t[s].c();d(e,"class","sidebar svelte-4mw4la")},m(s,a){C(s,e,a);for(let r=0;r<t.length;r+=1)t[r].m(e,null)},p(s,[a]){if(a&1){n=[...Le];let r;for(r=0;r<n.length;r+=1){const i=ct(s,n,r);t[r]?t[r].p(i,a):(t[r]=ut(i),t[r].c(),t[r].m(e,null))}for(;r<t.length;r+=1)t[r].d(1);t.length=n.length}},i:W,o:W,d(s){s&&w(e),ke(t,s)}}}function Ln(l,e,n){let t;return _t(l,Be,a=>n(0,t=a)),[t,a=>pe(a)]}class Pn extends G{constructor(e){super();Z(this,e,Ln,In,K,{})}}function ft(l){let e,n,t=(l[0].subjects.toString().toUpperCase()||"appointment")+"",s,a,r,i,u,c=(l[0].locations.length?l[0].locations:"None")+"",h,_,m,k,f,$=l[0].teachers.length>1?"s":"",L,F,Y=l[0].teachers.join(" ").toUpperCase()+"",y,H,I,j,ie,re=q(l[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",oe,le,A,J,ge,Q=q(l[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",he,te,ne,ce,_e,se=l[0].classes.length>1?"s":"",U,V,M=(l[0].classes.length?l[0].classes:"Unknown")+"",ye,g,D,N=l[0].changeWarning&&pt(l);return{c(){e=p("h3"),n=S("Information for "),s=S(t),a=v(),r=p("p"),i=p("b"),i.textContent="Location",u=S(": "),h=S(c),_=v(),m=p("p"),k=p("b"),f=S("Teacher"),L=S($),F=S(": "),y=S(Y),H=v(),I=p("p"),j=p("b"),j.textContent="Start",ie=S(": "),oe=S(re),le=v(),A=p("p"),J=p("b"),J.textContent="End",ge=S(": "),he=S(Q),te=v(),ne=p("p"),ce=p("b"),_e=S("Group"),U=S(se),V=S(": "),ye=S(M),g=v(),N&&N.c(),D=we(),d(e,"class","svelte-t0yfsj"),d(i,"class","svelte-t0yfsj"),d(r,"class","svelte-t0yfsj"),d(k,"class","svelte-t0yfsj"),d(m,"class","svelte-t0yfsj"),d(j,"class","svelte-t0yfsj"),d(I,"class","svelte-t0yfsj"),d(J,"class","svelte-t0yfsj"),d(A,"class","svelte-t0yfsj"),d(ce,"class","svelte-t0yfsj"),d(ne,"class","svelte-t0yfsj")},m(b,B){C(b,e,B),o(e,n),o(e,s),C(b,a,B),C(b,r,B),o(r,i),o(r,u),o(r,h),C(b,_,B),C(b,m,B),o(m,k),o(k,f),o(k,L),o(m,F),o(m,y),C(b,H,B),C(b,I,B),o(I,j),o(I,ie),o(I,oe),C(b,le,B),C(b,A,B),o(A,J),o(A,ge),o(A,he),C(b,te,B),C(b,ne,B),o(ne,ce),o(ce,_e),o(ce,U),o(ne,V),o(ne,ye),C(b,g,B),N&&N.m(b,B),C(b,D,B)},p(b,B){B&1&&t!==(t=(b[0].subjects.toString().toUpperCase()||"appointment")+"")&&E(s,t),B&1&&c!==(c=(b[0].locations.length?b[0].locations:"None")+"")&&E(h,c),B&1&&$!==($=b[0].teachers.length>1?"s":"")&&E(L,$),B&1&&Y!==(Y=b[0].teachers.join(" ").toUpperCase()+"")&&E(y,Y),B&1&&re!==(re=q(b[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&E(oe,re),B&1&&Q!==(Q=q(b[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&E(he,Q),B&1&&se!==(se=b[0].classes.length>1?"s":"")&&E(U,se),B&1&&M!==(M=(b[0].classes.length?b[0].classes:"Unknown")+"")&&E(ye,M),b[0].changeWarning?N?N.p(b,B):(N=pt(b),N.c(),N.m(D.parentNode,D)):N&&(N.d(1),N=null)},d(b){b&&w(e),b&&w(a),b&&w(r),b&&w(_),b&&w(m),b&&w(H),b&&w(I),b&&w(le),b&&w(A),b&&w(te),b&&w(ne),b&&w(g),N&&N.d(b),b&&w(D)}}}function pt(l){let e,n,t,s,a,r,i=l[0].changeWarning+"",u;return{c(){e=p("hr"),n=v(),t=p("p"),s=p("b"),s.textContent="Warning",a=S(":"),r=p("br"),u=S(i),d(e,"class","svelte-t0yfsj"),d(s,"class","svelte-t0yfsj"),d(r,"class","svelte-t0yfsj"),d(t,"class","svelte-t0yfsj")},m(c,h){C(c,e,h),C(c,n,h),C(c,t,h),o(t,s),o(t,a),o(t,r),o(t,u)},p(c,h){h&1&&i!==(i=c[0].changeWarning+"")&&E(u,i)},d(c){c&&w(e),c&&w(n),c&&w(t)}}}function Wn(l){let e,n,t,s,a,r,i,u=l[0]&&ft(l);return{c(){e=p("div"),n=v(),t=p("div"),s=p("button"),s.textContent="close",a=v(),u&&u.c(),d(e,"class","shade svelte-t0yfsj"),X(e,"hidden",!l[1]),d(s,"class","material-icons svelte-t0yfsj"),d(t,"class","dialog svelte-t0yfsj"),X(t,"hidden",!l[1])},m(c,h){C(c,e,h),C(c,n,h),C(c,t,h),o(t,s),o(t,a),u&&u.m(t,null),r||(i=[x(e,"click",l[2]),x(s,"click",l[2])],r=!0)},p(c,[h]){h&2&&X(e,"hidden",!c[1]),c[0]?u?u.p(c,h):(u=ft(c),u.c(),u.m(t,null)):u&&(u.d(1),u=null),h&2&&X(t,"hidden",!c[1])},i:W,o:W,d(c){c&&w(e),c&&w(n),c&&w(t),u&&u.d(),r=!1,Fe(i)}}}function Hn(l,e,n){q.extend(We),q.extend(He),q.extend(Ye);let t,s;$t.subscribe(r=>n(0,t=r)),Ie.subscribe(r=>n(1,s=r));function a(){Ie.set(!1)}return[t,s,a]}class Yn extends G{constructor(e){super();Z(this,e,Hn,Wn,K,{})}}function dt(l){let e,n,t,s;return e=new Pn({}),t=new Tn({}),{c(){O(e.$$.fragment),n=v(),O(t.$$.fragment)},m(a,r){z(e,a,r),C(a,n,r),z(t,a,r),s=!0},i(a){s||(T(e.$$.fragment,a),T(t.$$.fragment,a),s=!0)},o(a){P(e.$$.fragment,a),P(t.$$.fragment,a),s=!1},d(a){R(e,a),a&&w(n),R(t,a)}}}function mt(l){let e,n,t,s,a;var r=l[1].content;function i(u){return{}}return r&&(n=new r(i())),s=new Yn({}),{c(){e=p("div"),n&&O(n.$$.fragment),t=v(),O(s.$$.fragment),d(e,"class","content-field svelte-13sqyd4")},m(u,c){C(u,e,c),n&&z(n,e,null),o(e,t),z(s,e,null),a=!0},p(u,c){if(r!==(r=u[1].content)){if(n){Me();const h=n;P(h.$$.fragment,1,0,()=>{R(h,1)}),De()}r?(n=new r(i()),O(n.$$.fragment),T(n.$$.fragment,1),z(n,e,t)):n=null}},i(u){a||(n&&T(n.$$.fragment,u),T(s.$$.fragment,u),a=!0)},o(u){n&&P(n.$$.fragment,u),P(s.$$.fragment,u),a=!1},d(u){u&&w(e),n&&R(n),R(s)}}}function An(l){let e,n,t,s,a=l[0]&&dt(),r=l[1]&&mt(l);return{c(){e=p("div"),n=p("div"),a&&a.c(),t=v(),r&&r.c(),d(n,"class","content svelte-13sqyd4"),d(e,"class","bg svelte-13sqyd4")},m(i,u){C(i,e,u),o(e,n),a&&a.m(n,null),o(n,t),r&&r.m(n,null),s=!0},p(i,[u]){i[0]?a?u&1&&T(a,1):(a=dt(),a.c(),T(a,1),a.m(n,t)):a&&(Me(),P(a,1,1,()=>{a=null}),De()),i[1]?r?(r.p(i,u),u&2&&T(r,1)):(r=mt(i),r.c(),T(r,1),r.m(n,null)):r&&(Me(),P(r,1,1,()=>{r=null}),De())},i(i){s||(T(a),T(r),s=!0)},o(i){P(a),P(r),s=!1},d(i){i&&w(e),a&&a.d(),r&&r.d()}}}function Bn(l,e,n){let t=!1,s;return Te(async()=>{n(0,t=await Pe()),t?(ee.set(!0),pe("HomePage")):pe("Login")}),Be.subscribe(a=>n(1,s=a)),[t,s]}class En extends G{constructor(e){super();Z(this,e,Bn,An,K,{})}}function Un(l){let e,n,t;return n=new En({}),{c(){e=p("div"),O(n.$$.fragment),d(e,"class","app")},m(s,a){C(s,e,a),z(n,e,null),t=!0},p:W,i(s){t||(T(n.$$.fragment,s),t=!0)},o(s){P(n.$$.fragment,s),t=!1},d(s){s&&w(e),R(n)}}}function qn(l,e,n){let t;return _t(l,ee,s=>n(0,t=s)),Te(async()=>{if(await Pe(),!t){pe("Login");return}const s=ue.get("m");pe(s||"HomePage")}),[]}class Fn extends G{constructor(e){super();Z(this,e,qn,Un,K,{})}}new Fn({target:document.getElementById("app")});
