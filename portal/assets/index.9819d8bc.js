import{w as $e,S as F,i as R,s as Z,e as d,a as b,b as v,t as j,c as w,d as i,l as z,n as I,f as S,o as he,g as Re,h as Ce,j as C,k as oe,m as M,p as _e,q as pe,r as ee,u as te,v as P,x as A,y as ne,z as ke,A as we,B as wt,C as Pe,D as Oe,E as Q,F as Ee,G as ze,H as Fe,I as vt,J as bt,K as Te}from"./vendor.4fa4e416.js";const St=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))t(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}};St();const ue=new URLSearchParams(location.search),$t="1201",yt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",Tt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ct=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["classSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),He=$e(),Me=$e(!0),We=$e();let Ye=$e(!1);const kt=$e(),Ie=$e();function Mt(l){let e,n,t,s,a,o,r,c,u,f,$,m,p;return{c(){e=d("div"),n=d("div"),t=d("h1"),t.textContent="Login",s=b(),a=d("p"),a.textContent="Please provide login information to continue to Zermelo.",o=b(),r=d("input"),c=b(),u=d("input"),f=b(),$=d("button"),$.textContent="Login",v(t,"class","svelte-101fr8u"),v(a,"class","svelte-101fr8u"),v(r,"placeholder","schoolname"),v(r,"class","svelte-101fr8u"),j(r,"error",l[2]),v(u,"placeholder","pairing code"),v(u,"type","number"),v(u,"class","svelte-101fr8u"),j(u,"error",l[2]),v($,"class","svelte-101fr8u"),v(n,"class","centered svelte-101fr8u"),v(e,"class","svelte-101fr8u")},m(g,h){w(g,e,h),i(e,n),i(n,t),i(n,s),i(n,a),i(n,o),i(n,r),l[4](r),i(n,c),i(n,u),l[5](u),i(n,f),i(n,$),m||(p=z($,"click",l[3]),m=!0)},p(g,[h]){h&4&&j(r,"error",g[2]),h&4&&j(u,"error",g[2])},i:I,o:I,d(g){g&&S(e),l[4](null),l[5](null),m=!1,p()}}}function Nt(l,e,n){let t,s,a;he(async()=>{await qe()&&me("HomePage")});async function o(){if(!t.value||!s.value){r();return}await qe(t.value,s.value),Ce(V)?window.location.reload():r()}function r(){n(2,a=!0),setTimeout(()=>{n(2,a=!1)},3e3)}function c(f){Re[f?"unshift":"push"](()=>{t=f,n(0,t)})}function u(f){Re[f?"unshift":"push"](()=>{s=f,n(1,s)})}return[t,s,a,o,c,u]}class Dt extends F{constructor(e){super();R(this,e,Nt,Mt,Z,{})}}function It(l){let e,n,t,s,a,o,r,c;return{c(){e=d("div"),n=d("h3"),n.textContent="Jozefmavo Zermelo Portal",t=b(),s=d("p"),s.textContent="Click the button to go to the schedule.",a=b(),o=d("button"),o.textContent="Schedule",v(e,"class","homepage")},m(u,f){w(u,e,f),i(e,n),i(e,t),i(e,s),i(e,a),i(e,o),r||(c=z(o,"click",l[0]),r=!0)},p:I,i:I,o:I,d(u){u&&S(e),r=!1,c()}}}function Lt(l){function e(){me("SchedulePeople")}return[e]}class Pt extends F{constructor(e){super();R(this,e,Lt,It,Z,{})}}function Ht(l){let e,n,t,s,a,o,r,c;return{c(){e=d("div"),n=d("h1"),n.textContent="404",t=b(),s=d("p"),s.textContent="That page could not be found.",a=b(),o=d("button"),o.textContent="Home",v(o,"class","svelte-10ckbbi"),v(e,"class","content svelte-10ckbbi")},m(u,f){w(u,e,f),i(e,n),i(e,t),i(e,s),i(e,a),i(e,o),r||(c=z(o,"click",l[0]),r=!0)},p:I,i:I,o:I,d(u){u&&S(e),r=!1,c()}}}function Yt(l){function e(){me("HomePage")}return[e]}class jt extends F{constructor(e){super();R(this,e,Yt,Ht,Z,{})}}function qt(l){let e,n,t,s,a,o,r,c,u=(l[0].classes||"")+"",f,$,m;return{c(){e=d("div"),n=d("p"),t=C(l[6]),s=b(),a=d("p"),o=C(l[7]),r=b(),c=d("p"),f=C(u),v(c,"class","classes"),v(e,"class","appointment"),oe(e,"left",l[3]+"px"),oe(e,"width",l[4]+"px"),oe(e,"top",l[5]+"px"),j(e,"cancelled",l[0].cancelled),j(e,"changed",l[1]),j(e,"newTime",l[2])},m(p,g){w(p,e,g),i(e,n),i(n,t),i(e,s),i(e,a),i(a,o),i(e,r),i(e,c),i(c,f),$||(m=z(e,"click",l[8]),$=!0)},p(p,[g]){g&64&&M(t,p[6]),g&128&&M(o,p[7]),g&1&&u!==(u=(p[0].classes||"")+"")&&M(f,u),g&8&&oe(e,"left",p[3]+"px"),g&16&&oe(e,"width",p[4]+"px"),g&32&&oe(e,"top",p[5]+"px"),g&1&&j(e,"cancelled",p[0].cancelled),g&2&&j(e,"changed",p[1]),g&4&&j(e,"newTime",p[2])},i:I,o:I,d(p){p&&S(e),$=!1,m()}}}function At(l,e,n){let{appointment:t}=e;function s(){kt.set(t),Ye.set(!0)}let a,o=!1,r,c,u,f,$;return he(()=>{n(1,a=t.teacherChanged||t.locationChanged),n(2,o=t.timeChanged),n(3,r=(t.startMin-440)*2),n(4,c=(t.endMin-t.startMin)*2-2),n(5,u=42+t.rowNr*80-80),n(6,f=`${t.subjects[0]||t.teachers.join(" ").toUpperCase()} - ${t.locations.length?t.locations:"0_00"}`),n(7,$=t.subjects[0]?t.teachers.join(" ").toUpperCase():"")}),l.$$set=m=>{"appointment"in m&&n(0,t=m.appointment)},[t,a,o,r,c,u,f,$,s]}class Ut extends F{constructor(e){super();R(this,e,At,qt,Z,{appointment:0})}}function Ze(l,e,n){const t=l.slice();return t[1]=e[n],t}function Ge(l){let e,n=l[1].d+"",t,s;return{c(){e=d("div"),t=C(n),s=b(),v(e,"class","appointment leftrow"),oe(e,"left","0px"),oe(e,"width","80px"),oe(e,"top",2+80*l[1].i-40+"px"),j(e,"today",new Date().getDay()==l[1].i)},m(a,o){w(a,e,o),i(e,t),i(e,s)},p(a,o){o&1&&j(e,"today",new Date().getDay()==a[1].i)},d(a){a&&S(e)}}}function Bt(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=Ge(Ze(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=_e()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);w(s,e,a)},p(s,[a]){if(a&1){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=Ze(s,n,o);t[o]?t[o].p(r,a):(t[o]=Ge(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:I,o:I,d(s){pe(t,s),s&&S(e)}}}function Wt(l){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class Ot extends F{constructor(e){super();R(this,e,Wt,Bt,Z,{})}}function Ke(l,e,n){const t=l.slice();return t[1]=e[n],t}function Je(l){let e,n=l[1].start.h.toString().padStart(2,"0")+"",t,s,a=l[1].start.m.toString().padStart(2,"0")+"",o,r,c=l[1].end.h.toString().padStart(2,"0")+"",u,f,$=l[1].end.m.toString().padStart(2,"0")+"",m,p;return{c(){e=d("div"),t=C(n),s=C(":"),o=C(a),r=C(" - "),u=C(c),f=C(":"),m=C($),p=b(),v(e,"class","appointment timenote"),oe(e,"left",(l[1].startMin-440)*2+"px"),oe(e,"width",(l[1].endMin-l[1].startMin)*2-2+"px"),oe(e,"height","40px"),oe(e,"top","0px")},m(g,h){w(g,e,h),i(e,t),i(e,s),i(e,o),i(e,r),i(e,u),i(e,f),i(e,m),i(e,p)},p:I,d(g){g&&S(e)}}}function Et(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=Je(Ke(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=_e()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);w(s,e,a)},p(s,[a]){if(a&1){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=Ke(s,n,o);t[o]?t[o].p(r,a):(t[o]=Je(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:I,o:I,d(s){pe(t,s),s&&S(e)}}}function zt(l){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class Ft extends F{constructor(e){super();R(this,e,zt,Et,Z,{})}}function Se(l,e){We.set({type:l,id:e}),me("SchedulePeople")}function Qe(l){let e,n,t;return n=new wt({props:{value:l[1],items:l[0]}}),n.$on("select",l[2]),{c(){e=d("div"),ee(n.$$.fragment),v(e,"class","select-holder")},m(s,a){w(s,e,a),te(n,e,null),t=!0},p(s,a){const o={};a&1&&(o.items=s[0]),n.$set(o)},i(s){t||(P(n.$$.fragment,s),t=!0)},o(s){A(n.$$.fragment,s),t=!1},d(s){s&&S(e),ne(n)}}}function Rt(l){let e,n,t=l[0]&&Qe(l);return{c(){t&&t.c(),e=_e()},m(s,a){t&&t.m(s,a),w(s,e,a),n=!0},p(s,[a]){s[0]?t?(t.p(s,a),a&1&&P(t,1)):(t=Qe(s),t.c(),P(t,1),t.m(e.parentNode,e)):t&&(ke(),A(t,1,1,()=>{t=null}),we())},i(s){n||(P(t),n=!0)},o(s){A(t),n=!1},d(s){t&&t.d(s),s&&S(e)}}}function Zt(l,e,n){let t,s=[];he(o);function a(r){const c=r.detail.value,u=c.code;status="Schedule for "+r.label,Se(c.isEmployee?"teacher":"student",u)}async function o(){const r=Array.prototype.concat((await Ue()).response.data,(await Ae()).response.data);n(0,s=[]);for(let c=0;c<r.length;c++){const[u,f,$,m]=[r[c].firstName||"",r[c].prefix||"",r[c].lastName||"",r[c].code||""];s.push({label:`${u} ${f} ${$}`+(r[c].isEmployee?` (${m.toUpperCase()})`:""),value:r[c]})}}return Ie.subscribe(o),[s,t,a]}class Gt extends F{constructor(e){super();R(this,e,Zt,Rt,Z,{})}}function Kt(l){let e=[];for(let n=0;n<l.length;n++){const t=l[n],s=new Date(t.start*1e3).getDay()-new Date(Ne(be.prev)).getDay()+2;e.push({rowNr:s,startMin:new Date(t.start*1e3).getHours()*60+new Date(t.start*1e3).getMinutes(),endMin:new Date(t.end*1e3).getHours()*60+new Date(t.end*1e3).getMinutes(),slotName:t.startTimeSlotName,locations:t.locations,teachers:t.teachers,subjects:t.subjects,cancelled:t.cancelled,changeWarning:t.changeDescription,teacherChanged:t.teacherChanged,locationChanged:t.locationChanged,timeChanged:t.timeChanged,start:{h:new Date(t.start*1e3).getHours(),m:new Date(t.start*1e3).getMinutes()},end:{h:new Date(t.end*1e3).getHours(),m:new Date(t.end*1e3).getMinutes()},classes:t.groups,startTimeStamp:t.start,endTimeStamp:t.end})}return e}function Ve(l,e,n){const t=l.slice();return t[11]=e[n],t}function Jt(l){let e;return{c(){e=C("Loading...")},m(n,t){w(n,e,t)},p:I,d(n){n&&S(e)}}}function Qt(l){let e;function n(a,o){return a[1].id?Xt:Vt}let t=n(l),s=t(l);return{c(){s.c(),e=_e()},m(a,o){s.m(a,o),w(a,e,o)},p(a,o){t===(t=n(a))&&s?s.p(a,o):(s.d(1),s=t(a),s&&(s.c(),s.m(e.parentNode,e)))},d(a){s.d(a),a&&S(e)}}}function Vt(l){let e;return{c(){e=C("No schedule selected.")},m(n,t){w(n,e,t)},p:I,d(n){n&&S(e)}}}function Xt(l){let e=(l[4]||"Loading...")+"",n;return{c(){n=C(e)},m(t,s){w(t,n,s)},p(t,s){s&16&&e!==(e=(t[4]||"Loading...")+"")&&M(n,e)},d(t){t&&S(n)}}}function Xe(l){let e,n;return e=new Ut({props:{appointment:l[11]}}),{c(){ee(e.$$.fragment)},m(t,s){te(e,t,s),n=!0},p(t,s){const a={};s&1&&(a.appointment=t[11]),e.$set(a)},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){A(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function xt(l){let e,n,t,s,a,o,r=parseInt(Pe().format("W"))+l[3]+"",c,u,f,$,m,p,g,h,y,H,D,W,E,G,K,Y,J,ae,X,se,re,de,x;y=new Gt({});function fe(_,N){return _[2]?Jt:Qt}let ce=fe(l),U=ce(l);J=new Ot({}),X=new Ft({});let q=l[0],L=[];for(let _=0;_<q.length;_+=1)L[_]=Xe(Ve(l,q,_));const O=_=>A(L[_],1,1,()=>{L[_]=null});return{c(){e=d("div"),n=d("h3"),t=d("button"),t.textContent="arrow_back_ios_new",s=b(),a=d("span"),o=C("Week "),c=C(r),u=b(),f=d("button"),f.textContent="arrow_forward_ios",$=b(),m=d("button"),m.textContent="date_range",p=b(),g=d("div"),h=b(),ee(y.$$.fragment),H=b(),D=d("div"),W=b(),E=d("h3"),U.c(),G=b(),K=d("div"),Y=d("div"),ee(J.$$.fragment),ae=b(),ee(X.$$.fragment),se=b();for(let _=0;_<L.length;_+=1)L[_].c();v(t,"class","material-icons"),v(a,"class","week"),v(f,"class","material-icons"),v(m,"class","material-icons"),v(g,"class","sep"),v(D,"class","sep"),v(e,"class","header"),v(Y,"class","grid"),v(K,"class","content")},m(_,N){w(_,e,N),i(e,n),i(n,t),i(n,s),i(n,a),i(a,o),i(a,c),i(n,u),i(n,f),i(n,$),i(n,m),i(n,p),i(n,g),i(n,h),te(y,n,null),i(n,H),i(n,D),i(e,W),i(e,E),U.m(E,null),w(_,G,N),w(_,K,N),i(K,Y),te(J,Y,null),i(Y,ae),te(X,Y,null),i(Y,se);for(let k=0;k<L.length;k+=1)L[k].m(Y,null);re=!0,de||(x=[z(t,"click",l[5]),z(f,"click",l[6]),z(m,"click",l[7])],de=!0)},p(_,[N]){if((!re||N&8)&&r!==(r=parseInt(Pe().format("W"))+_[3]+"")&&M(c,r),ce===(ce=fe(_))&&U?U.p(_,N):(U.d(1),U=ce(_),U&&(U.c(),U.m(E,null))),N&1){q=_[0];let k;for(k=0;k<q.length;k+=1){const ie=Ve(_,q,k);L[k]?(L[k].p(ie,N),P(L[k],1)):(L[k]=Xe(ie),L[k].c(),P(L[k],1),L[k].m(Y,null))}for(ke(),k=q.length;k<L.length;k+=1)O(k);we()}},i(_){if(!re){P(y.$$.fragment,_),P(J.$$.fragment,_),P(X.$$.fragment,_);for(let N=0;N<q.length;N+=1)P(L[N]);re=!0}},o(_){A(y.$$.fragment,_),A(J.$$.fragment,_),A(X.$$.fragment,_),L=L.filter(Boolean);for(let N=0;N<L.length;N+=1)A(L[N]);re=!1},d(_){_&&S(e),ne(y),U.d(),_&&S(G),_&&S(K),ne(J),ne(X),pe(L,_),de=!1,Oe(x)}}}function en(l,e,n){Q.extend(Ee),Q.extend(ze),Q.extend(Fe);let t=[],s=[],a={id:""},o=!1,r=0,c;We.subscribe(async p=>{if(p){n(2,o=!0),n(1,a=p),u(p.type,p.id);const g=p.type=="teacher",h=await _n(p.id),y=await gn(p.id);let H=y.firstName||"",D=y.prefix||h.prefix||"",W=y.lastName||h.lastName,E=(y.code||h.code).toUpperCase();n(4,c=(g?"":`${H} `)+`${D} ${W} (${E})`),n(2,o=!1)}}),he(()=>{const p=new URLSearchParams(location.search),g=p.get("person_id"),h=p.get("person_type");n(2,o=!1),g&&h&&(We.set({type:h,id:g}),u(h,g,!0))});async function u(p,g,h=!0){let y;n(0,s=[]),p=="student"?y=await hn(g,r+1):y=await mn(g,r+1),h&&vt(`./?m=${ue.get("m")}&person_id=${g}&person_type=${p}`),ue.set("person_id",g),ue.set("person_type",p),t=De(y.response.data,"start"),n(0,s=Kt(t)),n(2,o=!1)}function f(){r+parseInt(Pe().format("W"))>1&&(n(3,r-=1),u(a.type,a.id))}function $(){r+parseInt(Pe().format("W"))<52&&(n(3,r+=1),u(a.type,a.id))}function m(){r!=0&&(n(3,r=0),u(a.type,a.id))}return setInterval(()=>{60*parseInt(Q().format("HH"))+parseInt(Q().format("m"))},300),[s,a,o,r,c,f,$,m,u]}class tn extends F{constructor(e){super();R(this,e,en,xt,Z,{openSched:8})}get openSched(){return this.$$.ctx[8]}}function nn(l){let e,n,t,s,a;return n=new tn({}),{c(){e=d("div"),ee(n.$$.fragment),v(e,"class","svelte-za3vn1")},m(o,r){w(o,e,r),te(n,e,null),t=!0,s||(a=z(e,"mousedown",l[0]),s=!0)},p:I,i(o){t||(P(n.$$.fragment,o),t=!0)},o(o){A(n.$$.fragment,o),t=!1},d(o){o&&S(e),ne(n),s=!1,a()}}}function ln(l){function e(n){const t=n.composedPath();let s=!0;for(let a=0;a<t.length;a++){const o=t[a];if(o.classList&&o.classList.contains("sidebar")){s=!1;break}}s&&Me.set(!1)}return[e]}class sn extends F{constructor(e){super();R(this,e,ln,nn,Z,{})}}function xe(l,e,n){const t=l.slice();return t[4]=e[n],t}function et(l){let e,n=l[4].firstName+"",t,s,a=(l[4].prefix||"")+"",o,r,c=l[4].lastName+"",u,f,$,m=l[4].code.toUpperCase()+"",p,g,h,y;return{c(){e=d("button"),t=C(n),s=b(),o=C(a),r=b(),u=C(c),f=b(),$=d("span"),p=C(m),g=b(),v($,"class","right")},m(H,D){w(H,e,D),i(e,t),i(e,s),i(e,o),i(e,r),i(e,u),i(e,f),i(e,$),i($,p),i(e,g),h||(y=z(e,"click",function(){bt(l[1](l[4].code))&&l[1](l[4].code).apply(this,arguments)}),h=!0)},p(H,D){l=H,D&1&&n!==(n=l[4].firstName+"")&&M(t,n),D&1&&a!==(a=(l[4].prefix||"")+"")&&M(o,a),D&1&&c!==(c=l[4].lastName+"")&&M(u,c),D&1&&m!==(m=l[4].code.toUpperCase()+"")&&M(p,m)},d(H){H&&S(e),h=!1,y()}}}function on(l){let e,n,t,s,a,o,r=l[0].length+"",c,u,f,$=l[0],m=[];for(let p=0;p<$.length;p+=1)m[p]=et(xe(l,$,p));return{c(){e=d("div"),n=d("h3"),t=d("span"),t.textContent="Students",s=b(),a=d("span"),o=C("("),c=C(r),u=C(")"),f=b();for(let p=0;p<m.length;p+=1)m[p].c();v(e,"class","studentlist")},m(p,g){w(p,e,g),i(e,n),i(n,t),i(n,s),i(n,a),i(a,o),i(a,c),i(a,u),i(e,f);for(let h=0;h<m.length;h+=1)m[h].m(e,null)},p(p,[g]){if(g&1&&r!==(r=p[0].length+"")&&M(c,r),g&3){$=p[0];let h;for(h=0;h<$.length;h+=1){const y=xe(p,$,h);m[h]?m[h].p(y,g):(m[h]=et(y),m[h].c(),m[h].m(e,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=$.length}},i:I,o:I,d(p){p&&S(e),pe(m,p)}}}function an(l,e,n){let t;Te(l,V,r=>n(2,t=r));let s=[];V.subscribe(r=>{r&&o()});function a(r){return function(){Se("student",r)}}he(async()=>{t&&o()});async function o(){n(0,s=(await Ae()).response.data),s.length>0&&n(0,s=De(s,"firstName"))}return[s,a]}class rn extends F{constructor(e){super();R(this,e,an,on,Z,{})}}function tt(l,e,n){const t=l.slice();return t[4]=e[n],t}function nt(l){let e,n=(l[4].prefix||"")+"",t,s,a=l[4].lastName+"",o,r,c,u=l[4].code.toUpperCase()+"",f,$,m,p;return{c(){e=d("button"),t=C(n),s=b(),o=C(a),r=b(),c=d("span"),f=C(u),$=b(),v(c,"class","right")},m(g,h){w(g,e,h),i(e,t),i(e,s),i(e,o),i(e,r),i(e,c),i(c,f),i(e,$),m||(p=z(e,"click",function(){bt(l[1](l[4].code))&&l[1](l[4].code).apply(this,arguments)}),m=!0)},p(g,h){l=g,h&1&&n!==(n=(l[4].prefix||"")+"")&&M(t,n),h&1&&a!==(a=l[4].lastName+"")&&M(o,a),h&1&&u!==(u=l[4].code.toUpperCase()+"")&&M(f,u)},d(g){g&&S(e),m=!1,p()}}}function cn(l){let e,n,t,s,a,o,r=l[0].length+"",c,u,f,$=l[0],m=[];for(let p=0;p<$.length;p+=1)m[p]=nt(tt(l,$,p));return{c(){e=d("div"),n=d("h3"),t=d("span"),t.textContent="Teachers",s=b(),a=d("span"),o=C("("),c=C(r),u=C(")"),f=b();for(let p=0;p<m.length;p+=1)m[p].c();v(e,"class","studentlist")},m(p,g){w(p,e,g),i(e,n),i(n,t),i(n,s),i(n,a),i(a,o),i(a,c),i(a,u),i(e,f);for(let h=0;h<m.length;h+=1)m[h].m(e,null)},p(p,[g]){if(g&1&&r!==(r=p[0].length+"")&&M(c,r),g&3){$=p[0];let h;for(h=0;h<$.length;h+=1){const y=tt(p,$,h);m[h]?m[h].p(y,g):(m[h]=nt(y),m[h].c(),m[h].m(e,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=$.length}},i:I,o:I,d(p){p&&S(e),pe(m,p)}}}function un(l,e,n){let t;Te(l,V,r=>n(2,t=r));let s=[];V.subscribe(r=>{r&&o()});function a(r){return function(){Se("teacher",r)}}he(()=>{t&&o()});async function o(){n(0,s=(await Ue()).response.data),s.length>0&&n(0,s=De(s,"lastName"))}return[s,a]}class fn extends F{constructor(e){super();R(this,e,un,cn,Z,{})}}function me(l){console.log(`OpenMod: Opening ${l}`);const e=je.has(l);Ie.set(je.get(e?l:"PageNotFound")),ue.set("m",e?l:"PageNotFound");const n=ue.get("person_id")?`&person_id=${ue.get("person_id")}`:"",t=ue.get("person_type")?`&person_type=${ue.get("person_type")}`:"";ue.set("person_id",""),ue.set("class_id",""),vt(`./?m=${e?l:"PageNotFound"}${l=="SchedulePeople"?`${n}${t}`:""}`),Ye.set(!1)}const je=new Map([["HomePage",{name:"Home",icon:"home",content:Pt,sidebar:!1}],["SchedulePeople",{name:"People",icon:"people",content:sn,sidebar:!0}],["ListStudents",{name:"Students",icon:"school",content:rn,sidebar:!0}],["ListTeachers",{name:"Teachers",icon:"supervisor_account",content:fn,sidebar:!0}],["Login",{name:"Login",icon:"",content:Dt,sidebar:!1}],["PageNotFound",{name:"Page Not Found",icon:"",content:jt,sidebar:!1}]]);Q.extend(Ee);Q.extend(ze);Q.extend(Fe);async function Le(l,e,n,t=!0,s,a){if(Ce(V)||s){const o={headers:{Authorization:`Bearer ${l}`},method:a?"POST":"GET"},r=await await fetch(`https://${e}.zportal.nl/api/v3/${n}`,s?{method:a?"POST":"GET"}:o);return t?r.json():r.text()}return t?{}:"{}"}async function pn(l,e){return await Le(void 0,e,`oauth/token?grant_type=authorization_code&code=${l}`,!0,!0,!0)}let V=$e(!1),ve,ge;async function qe(l,e){if(localStorage.getItem("accessToken")){ve=localStorage.getItem("accessToken"),ge=localStorage.getItem("school");const n=await(await fetch(`https://${ge}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ve}`}})).json();return V.set(n.response.status==200),V?(console.log("Zermelo login succeeded from stored access token"),He.set(n.response.data)):console.log("Zermelo login failed from stored access token: server returned ",n),Ce(V)}if(!l||!e)return console.log("Zermelo login failed; school or bindcode invalid"),!1;try{const n=await pn(e,l);n.access_token&&(localStorage.setItem("accessToken",n.access_token),localStorage.setItem("school",l),V.set(!0),He.set((await(await fetch(`https://${ge}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ve}`}})).json()).response.data)),Ce(V)&&console.log("Zermelo login succeeded from provided data")}catch{V.set(!1)}return Ce(V)}function dn(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),V.set(!1),me("Login")}async function Ae(){return await Le(ve,ge,`${yt}${$t}`)}async function Ue(){return await Le(ve,ge,`${Tt}${$t}`)}async function mn(l,e=0){const n=Ne(be.prev)+601200*e,t=Ne(be.next)+601200*e;return await Le(ve,ge,`appointments?start=${n}&end=${t}&teachers=${l}&fields=${Ct.get("teacherSchedule")}`,!0)}async function hn(l,e=0){const n=Ne(be.prev)+601200*e,t=Ne(be.next)+601200*e;return await Le(ve,ge,`appointments?user=${l}&start=${n}&end=${t}&fields=${Ct.get("studentSchedule")}`,!0)}function Ne(l){let e;return l==be.prev?e=Q().weekday(-7).unix():e=Q().weekday(0).unix(),e}async function gn(l){const e=(await Ae()).response.data;for(let n=0;n<e.length;n++)if(e[n].code==l)return e[n];return{}}async function _n(l){const e=(await Ue()).response.data;for(let n=0;n<e.length;n++)if(e[n].code==l)return e[n];return{}}function De(l,e){return l.sort(function(n,t){var s=n[e],a=t[e];return s<a?-1:s>a?1:0})}var be=(l=>(l[l.prev=0]="prev",l[l.next=1]="next",l))(be||{});function lt(l,e,n){const t=l.slice();return t[1]=e[n],t}function st(l){let e,n=l[1].icon+"",t,s,a,o,r;return{c(){e=d("button"),t=C(n),s=b(),v(e,"class","material-icons"),v(e,"title",a=l[1].caption)},m(c,u){w(c,e,u),i(e,t),i(e,s),o||(r=z(e,"click",l[1].action),o=!0)},p(c,u){l=c},d(c){c&&S(e),o=!1,r()}}}function vn(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=st(lt(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=_e()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);w(s,e,a)},p(s,[a]){if(a&1){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=lt(s,n,o);t[o]?t[o].p(r,a):(t[o]=st(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:I,o:I,d(s){pe(t,s),s&&S(e)}}}function bn(l){return[[{icon:"logout",action:()=>{dn()},caption:"Logout"},{icon:"calendar_today",action:()=>{Se("student",Ce(He)[0].code)},caption:"Show own calendar"}]]}class $n extends F{constructor(e){super();R(this,e,bn,vn,Z,{})}}function ot(l,e,n){const t=l.slice();return t[2]=e[n],t[3]=e,t[4]=n,t}function at(l){let e,n=l[2].icon+"",t,s,a;function o(){return l[1](l[2],l[3],l[4])}return{c(){e=d("button"),t=C(n),v(e,"class","material-icons svelte-1wpskyv"),j(e,"active",l[2].value)},m(r,c){w(r,e,c),i(e,t),s||(a=z(e,"click",o),s=!0)},p(r,c){l=r,c&1&&n!==(n=l[2].icon+"")&&M(t,n),c&1&&j(e,"active",l[2].value)},d(r){r&&S(e),s=!1,a()}}}function Cn(l){let e,n=l[0],t=[];for(let s=0;s<n.length;s+=1)t[s]=at(ot(l,n,s));return{c(){for(let s=0;s<t.length;s+=1)t[s].c();e=_e()},m(s,a){for(let o=0;o<t.length;o+=1)t[o].m(s,a);w(s,e,a)},p(s,[a]){if(a&1){n=s[0];let o;for(o=0;o<n.length;o+=1){const r=ot(s,n,o);t[o]?t[o].p(r,a):(t[o]=at(r),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=n.length}},i:I,o:I,d(s){pe(t,s),s&&S(e)}}}function kn(l,e,n){const t=[{icon:"person",value:!1,event:a=>{Me.set(a)}}];return Me.set(!0),[t,(a,o,r)=>{n(0,o[r].value=!a.value,t),a.event(a.value)}]}class wn extends F{constructor(e){super();R(this,e,kn,Cn,Z,{})}}function Sn(l){let e,n,t,s,a,o,r,c,u,f,$,m,p,g,h,y,H,D,W,E=l[0].firstName+"",G,K;return c=new wn({}),m=new $n({}),{c(){e=d("div"),n=d("div"),t=d("b"),t.innerHTML=`Zermelo
      <div class="sep"></div>`,s=b(),a=d("span"),a.textContent=`${ge}`,o=b(),r=d("div"),ee(c.$$.fragment),u=b(),f=d("div"),$=b(),ee(m.$$.fragment),p=b(),g=d("div"),h=b(),y=d("div"),H=d("span"),H.textContent="person",D=b(),W=d("p"),G=C(E),v(t,"class","name"),v(a,"class","schoolname"),v(n,"class","header"),v(f,"class","sep"),v(g,"class","sep"),v(H,"class","material-icons"),v(y,"class","userprofile"),v(r,"class","right"),v(e,"class","tb")},m(Y,J){w(Y,e,J),i(e,n),i(n,t),i(n,s),i(n,a),i(e,o),i(e,r),te(c,r,null),i(r,u),i(r,f),i(r,$),te(m,r,null),i(r,p),i(r,g),i(r,h),i(r,y),i(y,H),i(y,D),i(y,W),i(W,G),K=!0},p(Y,[J]){(!K||J&1)&&E!==(E=Y[0].firstName+"")&&M(G,E)},i(Y){K||(P(c.$$.fragment,Y),P(m.$$.fragment,Y),K=!0)},o(Y){A(c.$$.fragment,Y),A(m.$$.fragment,Y),K=!1},d(Y){Y&&S(e),ne(c),ne(m)}}}function yn(l,e,n){let t;return He.subscribe(s=>{n(0,t=s[0])}),[t]}class Tn extends F{constructor(e){super();R(this,e,yn,Sn,Z,{})}}function rt(l,e,n){const t=l.slice();return t[3]=e[n][0],t[4]=e[n][1],t}function Mn(l){let e,n,t=l[4].icon+"",s,a,o,r=l[4].name+"",c,u,f,$;function m(){return l[2](l[3])}return{c(){e=d("button"),n=d("span"),s=C(t),a=b(),o=d("p"),c=C(r),u=b(),v(n,"class","material-icons svelte-1syb81y"),v(o,"class","svelte-1syb81y"),v(e,"class","svelte-1syb81y"),j(e,"selected",l[0]&&l[0].name==l[4].name)},m(p,g){w(p,e,g),i(e,n),i(n,s),i(e,a),i(e,o),i(o,c),i(e,u),f||($=z(e,"click",m),f=!0)},p(p,g){l=p,g&1&&j(e,"selected",l[0]&&l[0].name==l[4].name)},d(p){p&&S(e),f=!1,$()}}}function it(l){let e,n=l[4].sidebar&&l[4]&&Mn(l);return{c(){n&&n.c(),e=_e()},m(t,s){n&&n.m(t,s),w(t,e,s)},p(t,s){t[4].sidebar&&t[4]&&n.p(t,s)},d(t){n&&n.d(t),t&&S(e)}}}function Nn(l){let e,n,t,s,a,o=[...je],r=[];for(let c=0;c<o.length;c+=1)r[c]=it(rt(l,o,c));return{c(){e=d("div"),n=d("button"),n.innerHTML=`<span class="material-icons svelte-1syb81y">home</span> 
    <p class="svelte-1syb81y">Home</p>`,t=b();for(let c=0;c<r.length;c+=1)r[c].c();v(n,"class","home svelte-1syb81y"),j(n,"selected",l[0].name=="Home"),v(e,"class","sidebar svelte-1syb81y")},m(c,u){w(c,e,u),i(e,n),i(e,t);for(let f=0;f<r.length;f+=1)r[f].m(e,null);s||(a=z(n,"click",l[1]),s=!0)},p(c,[u]){if(u&1&&j(n,"selected",c[0].name=="Home"),u&1){o=[...je];let f;for(f=0;f<o.length;f+=1){const $=rt(c,o,f);r[f]?r[f].p($,u):(r[f]=it($),r[f].c(),r[f].m(e,null))}for(;f<r.length;f+=1)r[f].d(1);r.length=o.length}},i:I,o:I,d(c){c&&S(e),pe(r,c),s=!1,a()}}}function Dn(l,e,n){let t;Te(l,Ie,o=>n(0,t=o));function s(){me("HomePage")}return[t,s,o=>me(o)]}class In extends F{constructor(e){super();R(this,e,Dn,Nn,Z,{})}}function ct(l){let e,n,t=(l[0].subjects.toString().toUpperCase()||"appointment")+"",s,a,o,r,c,u=(l[0].locations.length?l[0].locations:"None")+"",f,$,m,p,g,h=l[0].teachers.length>1?"s":"",y,H,D=l[0].teachers.join(" ").toUpperCase()+"",W,E,G,K,Y,J=Q(l[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",ae,X,se,re,de,x=Q(l[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",fe,ce,U,q,L,O=l[0].classes.length>1?"s":"",_,N,k=(l[0].classes.length?l[0].classes:"Unknown")+"",ie,Be,ye,le=l[0].changeWarning&&ut(l);return{c(){e=d("h3"),n=C("Information for "),s=C(t),a=b(),o=d("p"),r=d("b"),r.textContent="Location",c=C(": "),f=C(u),$=b(),m=d("p"),p=d("b"),g=C("Teacher"),y=C(h),H=C(": "),W=C(D),E=b(),G=d("p"),K=d("b"),K.textContent="Start",Y=C(": "),ae=C(J),X=b(),se=d("p"),re=d("b"),re.textContent="End",de=C(": "),fe=C(x),ce=b(),U=d("p"),q=d("b"),L=C("Group"),_=C(O),N=C(": "),ie=C(k),Be=b(),le&&le.c(),ye=_e()},m(T,B){w(T,e,B),i(e,n),i(e,s),w(T,a,B),w(T,o,B),i(o,r),i(o,c),i(o,f),w(T,$,B),w(T,m,B),i(m,p),i(p,g),i(p,y),i(m,H),i(m,W),w(T,E,B),w(T,G,B),i(G,K),i(G,Y),i(G,ae),w(T,X,B),w(T,se,B),i(se,re),i(se,de),i(se,fe),w(T,ce,B),w(T,U,B),i(U,q),i(q,L),i(q,_),i(U,N),i(U,ie),w(T,Be,B),le&&le.m(T,B),w(T,ye,B)},p(T,B){B&1&&t!==(t=(T[0].subjects.toString().toUpperCase()||"appointment")+"")&&M(s,t),B&1&&u!==(u=(T[0].locations.length?T[0].locations:"None")+"")&&M(f,u),B&1&&h!==(h=T[0].teachers.length>1?"s":"")&&M(y,h),B&1&&D!==(D=T[0].teachers.join(" ").toUpperCase()+"")&&M(W,D),B&1&&J!==(J=Q(T[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&M(ae,J),B&1&&x!==(x=Q(T[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&M(fe,x),B&1&&O!==(O=T[0].classes.length>1?"s":"")&&M(_,O),B&1&&k!==(k=(T[0].classes.length?T[0].classes:"Unknown")+"")&&M(ie,k),T[0].changeWarning?le?le.p(T,B):(le=ut(T),le.c(),le.m(ye.parentNode,ye)):le&&(le.d(1),le=null)},d(T){T&&S(e),T&&S(a),T&&S(o),T&&S($),T&&S(m),T&&S(E),T&&S(G),T&&S(X),T&&S(se),T&&S(ce),T&&S(U),T&&S(Be),le&&le.d(T),T&&S(ye)}}}function ut(l){let e,n,t,s,a,o,r=l[0].changeWarning+"",c;return{c(){e=d("hr"),n=b(),t=d("p"),s=d("b"),s.textContent="Warning",a=C(":"),o=d("br"),c=C(r)},m(u,f){w(u,e,f),w(u,n,f),w(u,t,f),i(t,s),i(t,a),i(t,o),i(t,c)},p(u,f){f&1&&r!==(r=u[0].changeWarning+"")&&M(c,r)},d(u){u&&S(e),u&&S(n),u&&S(t)}}}function Ln(l){let e,n,t,s,a,o,r,c=l[0]&&ct(l);return{c(){e=d("div"),n=b(),t=d("div"),s=d("button"),s.textContent="close",a=b(),c&&c.c(),v(e,"class","shade"),j(e,"hidden",!l[1]),v(s,"class","material-icons"),v(t,"class","dialog"),j(t,"hidden",!l[1])},m(u,f){w(u,e,f),w(u,n,f),w(u,t,f),i(t,s),i(t,a),c&&c.m(t,null),o||(r=[z(e,"click",l[2]),z(s,"click",l[2])],o=!0)},p(u,[f]){f&2&&j(e,"hidden",!u[1]),u[0]?c?c.p(u,f):(c=ct(u),c.c(),c.m(t,null)):c&&(c.d(1),c=null),f&2&&j(t,"hidden",!u[1])},i:I,o:I,d(u){u&&S(e),u&&S(n),u&&S(t),c&&c.d(),o=!1,Oe(r)}}}function Pn(l,e,n){Q.extend(Ee),Q.extend(ze),Q.extend(Fe);let t,s;kt.subscribe(o=>n(0,t=o)),Ye.subscribe(o=>n(1,s=o));function a(){Ye.set(!1)}return[t,s,a]}class Hn extends F{constructor(e){super();R(this,e,Pn,Ln,Z,{})}}function ft(l,e,n){const t=l.slice();return t[9]=e[n],t}function pt(l,e,n){const t=l.slice();return t[12]=e[n],t}function dt(l){let e,n=(l[12].prefix||"")+"",t,s,a=l[12].lastName+"",o,r,c,u=l[12].code.toUpperCase()+"",f,$,m,p;function g(){return l[7](l[12])}return{c(){e=d("button"),t=C(n),s=b(),o=C(a),r=b(),c=d("span"),f=C(u),$=b(),v(c,"class","right svelte-9oq5yo"),v(e,"class","svelte-9oq5yo")},m(h,y){w(h,e,y),i(e,t),i(e,s),i(e,o),i(e,r),i(e,c),i(c,f),i(e,$),m||(p=z(e,"click",g),m=!0)},p(h,y){l=h,y&2&&n!==(n=(l[12].prefix||"")+"")&&M(t,n),y&2&&a!==(a=l[12].lastName+"")&&M(o,a),y&2&&u!==(u=l[12].code.toUpperCase()+"")&&M(f,u)},d(h){h&&S(e),m=!1,p()}}}function mt(l){let e,n=l[9].firstName+"",t,s,a=(l[9].prefix||"")+"",o,r,c=l[9].lastName+"",u,f,$,m=(l[9].code||"...")+"",p,g,h,y;function H(){return l[8](l[9])}return{c(){e=d("button"),t=C(n),s=b(),o=C(a),r=b(),u=C(c),f=b(),$=d("span"),p=C(m),g=b(),v($,"class","right svelte-9oq5yo"),v(e,"class","svelte-9oq5yo")},m(D,W){w(D,e,W),i(e,t),i(e,s),i(e,o),i(e,r),i(e,u),i(e,f),i(e,$),i($,p),i(e,g),h||(y=z(e,"click",H),h=!0)},p(D,W){l=D,W&1&&n!==(n=l[9].firstName+"")&&M(t,n),W&1&&a!==(a=(l[9].prefix||"")+"")&&M(o,a),W&1&&c!==(c=l[9].lastName+"")&&M(u,c),W&1&&m!==(m=(l[9].code||"...")+"")&&M(p,m)},d(D){D&&S(e),h=!1,y()}}}function Yn(l){let e,n,t,s,a=l[2]?"less":"more",o,r,c,u,f,$=l[1].length+"",m,p,g,h,y,H,D,W,E=l[3]?"less":"more",G,K,Y,J,ae,X=l[0].length+"",se,re,de,x,fe,ce,U=l[1],q=[];for(let _=0;_<U.length;_+=1)q[_]=dt(pt(l,U,_));let L=l[0],O=[];for(let _=0;_<L.length;_+=1)O[_]=mt(ft(l,L,_));return{c(){e=d("div"),n=d("h3"),t=d("button"),s=C("expand_"),o=C(a),r=b(),c=d("span"),c.textContent="Teachers",u=b(),f=d("span"),m=C($),p=C("\xA0\xA0"),g=b(),h=d("div");for(let _=0;_<q.length;_+=1)q[_].c();y=b(),H=d("h3"),D=d("button"),W=C("expand_"),G=C(E),K=b(),Y=d("span"),Y.textContent="Students",J=b(),ae=d("span"),se=C(X),re=C("\xA0\xA0"),de=b(),x=d("div");for(let _=0;_<O.length;_+=1)O[_].c();v(t,"class","material-icons svelte-9oq5yo"),v(c,"class","svelte-9oq5yo"),v(f,"class","right svelte-9oq5yo"),v(n,"class","sect svelte-9oq5yo"),v(h,"class","svelte-9oq5yo"),j(h,"hidden",!l[2]),v(D,"class","material-icons svelte-9oq5yo"),v(Y,"class","svelte-9oq5yo"),v(ae,"class","right svelte-9oq5yo"),v(H,"class","sect svelte-9oq5yo"),v(x,"class","svelte-9oq5yo"),j(x,"hidden",!l[3]),v(e,"class","sidebar svelte-9oq5yo"),j(e,"hidden",!l[4])},m(_,N){w(_,e,N),i(e,n),i(n,t),i(t,s),i(t,o),i(n,r),i(n,c),i(n,u),i(n,f),i(f,m),i(f,p),i(e,g),i(e,h);for(let k=0;k<q.length;k+=1)q[k].m(h,null);i(e,y),i(e,H),i(H,D),i(D,W),i(D,G),i(H,K),i(H,Y),i(H,J),i(H,ae),i(ae,se),i(ae,re),i(e,de),i(e,x);for(let k=0;k<O.length;k+=1)O[k].m(x,null);fe||(ce=[z(t,"click",l[5]),z(D,"click",l[6])],fe=!0)},p(_,[N]){if(N&4&&a!==(a=_[2]?"less":"more")&&M(o,a),N&2&&$!==($=_[1].length+"")&&M(m,$),N&2){U=_[1];let k;for(k=0;k<U.length;k+=1){const ie=pt(_,U,k);q[k]?q[k].p(ie,N):(q[k]=dt(ie),q[k].c(),q[k].m(h,null))}for(;k<q.length;k+=1)q[k].d(1);q.length=U.length}if(N&4&&j(h,"hidden",!_[2]),N&8&&E!==(E=_[3]?"less":"more")&&M(G,E),N&1&&X!==(X=_[0].length+"")&&M(se,X),N&1){L=_[0];let k;for(k=0;k<L.length;k+=1){const ie=ft(_,L,k);O[k]?O[k].p(ie,N):(O[k]=mt(ie),O[k].c(),O[k].m(x,null))}for(;k<O.length;k+=1)O[k].d(1);O.length=L.length}N&8&&j(x,"hidden",!_[3]),N&16&&j(e,"hidden",!_[4])},i:I,o:I,d(_){_&&S(e),pe(q,_),pe(O,_),fe=!1,Oe(ce)}}}function jn(l,e,n){let t=[],s=[],a=!1,o=!1,r=!0;V.subscribe(async m=>{m==!0&&(n(0,t=(await Ae()).response.data),n(1,s=(await Ue()).response.data),t.length>0&&n(0,t=De(t,"firstName")),s.length>0&&n(1,s=De(s,"lastName")))});function c(){n(2,a=!a)}function u(){n(3,o=!o)}return he(()=>{Me.set(!1)}),Me.subscribe(m=>n(4,r=m)),[t,s,a,o,r,c,u,m=>{Se("teacher",m.code)},m=>{Se("student",m.code)}]}class qn extends F{constructor(e){super();R(this,e,jn,Yn,Z,{})}}function ht(l){let e,n,t,s,a,o;return e=new In({}),t=new Tn({}),a=new qn({}),{c(){ee(e.$$.fragment),n=b(),ee(t.$$.fragment),s=b(),ee(a.$$.fragment)},m(r,c){te(e,r,c),w(r,n,c),te(t,r,c),w(r,s,c),te(a,r,c),o=!0},i(r){o||(P(e.$$.fragment,r),P(t.$$.fragment,r),P(a.$$.fragment,r),o=!0)},o(r){A(e.$$.fragment,r),A(t.$$.fragment,r),A(a.$$.fragment,r),o=!1},d(r){ne(e,r),r&&S(n),ne(t,r),r&&S(s),ne(a,r)}}}function gt(l){let e,n,t,s,a;var o=l[1].content;function r(c){return{}}return o&&(n=new o(r())),s=new Hn({}),{c(){e=d("div"),n&&ee(n.$$.fragment),t=b(),ee(s.$$.fragment),v(e,"class","content-field")},m(c,u){w(c,e,u),n&&te(n,e,null),i(e,t),te(s,e,null),a=!0},p(c,u){if(o!==(o=c[1].content)){if(n){ke();const f=n;A(f.$$.fragment,1,0,()=>{ne(f,1)}),we()}o?(n=new o(r()),ee(n.$$.fragment),P(n.$$.fragment,1),te(n,e,t)):n=null}},i(c){a||(n&&P(n.$$.fragment,c),P(s.$$.fragment,c),a=!0)},o(c){n&&A(n.$$.fragment,c),A(s.$$.fragment,c),a=!1},d(c){c&&S(e),n&&ne(n),ne(s)}}}function An(l){let e,n,t,s,a=l[0]&&ht(),o=l[1]&&gt(l);return{c(){e=d("div"),n=d("div"),a&&a.c(),t=b(),o&&o.c(),v(n,"class","content"),v(e,"class","bg")},m(r,c){w(r,e,c),i(e,n),a&&a.m(n,null),i(n,t),o&&o.m(n,null),s=!0},p(r,[c]){r[0]?a?c&1&&P(a,1):(a=ht(),a.c(),P(a,1),a.m(n,t)):a&&(ke(),A(a,1,1,()=>{a=null}),we()),r[1]?o?(o.p(r,c),c&2&&P(o,1)):(o=gt(r),o.c(),P(o,1),o.m(n,null)):o&&(ke(),A(o,1,1,()=>{o=null}),we())},i(r){s||(P(a),P(o),s=!0)},o(r){A(a),A(o),s=!1},d(r){r&&S(e),a&&a.d(),o&&o.d()}}}function Un(l,e,n){let t=!1,s;return he(async()=>{n(0,t=await qe())}),Ie.subscribe(a=>n(1,s=a)),[t,s]}class Bn extends F{constructor(e){super();R(this,e,Un,An,Z,{})}}function _t(l){let e,n;return e=new Bn({}),{c(){ee(e.$$.fragment)},m(t,s){te(e,t,s),n=!0},i(t){n||(P(e.$$.fragment,t),n=!0)},o(t){A(e.$$.fragment,t),n=!1},d(t){ne(e,t)}}}function Wn(l){let e,n,t=l[0]&&_t();return{c(){e=d("div"),t&&t.c(),v(e,"class","app")},m(s,a){w(s,e,a),t&&t.m(e,null),n=!0},p(s,[a]){s[0]?t?a&1&&P(t,1):(t=_t(),t.c(),P(t,1),t.m(e,null)):t&&(ke(),A(t,1,1,()=>{t=null}),we())},i(s){n||(P(t),n=!0)},o(s){A(t),n=!1},d(s){s&&S(e),t&&t.d()}}}function On(l,e,n){let t,s;return Te(l,V,a=>n(1,t=a)),Te(l,Ie,a=>n(0,s=a)),he(async()=>{if(await qe(),!t){me("Login");return}const a=ue.get("m"),o=a=="Login";console.log(a,o),me(o?"HomePage":a)}),[s]}class En extends F{constructor(e){super();R(this,e,On,Wn,Z,{})}}new En({target:document.getElementById("app")});
