import{w as ge,d as Q,a as ye,b as Me,c as Te,g as pe,F as ot,S as ee,i as te,s as le,e as d,f as v,h as m,t as O,j as b,k as r,l as X,n as E,m as $,o as Ce,p as h,q as me,r as ue,u as K,v as I,x as ke,y as Xe,z as ne,A as se,B as Z,C as V,D as oe,E as Je,G as Qe}from"./vendor.5e678f43.js";const at=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))t(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&t(o)}).observe(document,{childList:!0,subtree:!0});function l(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerpolicy&&(a.referrerPolicy=n.referrerpolicy),n.crossorigin==="use-credentials"?a.credentials="include":n.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(n){if(n.ep)return;n.ep=!0;const a=l(n);fetch(n.href,a)}};at();const xe="1201",rt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",it="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ne=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),be=ge(),he=ge(!1),et=ge();let we=ge(!1);const tt=ge();Q.extend(ye);Q.extend(Me);Q.extend(Te);async function _e(s,e,l,t=!0,n){if(pe(ae)||n){const a={headers:{Authorization:`Bearer ${s}`},method:"GET"},o=await await fetch(`https://${e}.zportal.nl/api/v3/${l}`,n?{}:a);return t?o.json():o.text()}return t?{}:"{}"}async function ct(s,e){const l={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${s}`,l)).json()}let ae=ge(!1),ie,re;async function lt(s,e){if(localStorage.getItem("accessToken")){ie=localStorage.getItem("accessToken"),re=localStorage.getItem("school");const l=await(await fetch(`https://${re}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ie}`}})).json();return ae.set(l.response.status==200),ae?(console.log("Zermelo login succeeded from stored access token"),be.set(l.response.data)):console.log("Zermelo login failed from stored access token: server returned "+l.response.status),pe(ae)}if(!s||!e)return console.log("Zermelo login failed!"),console.error(s,e),!1;try{const l=await ct(e,s);l.access_token&&(localStorage.setItem("accessToken",l.access_token),localStorage.setItem("school",s),ae.set(!0),be.set((await(await fetch(`https://${re}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${ie}`}})).json()).response.data)),pe(ae)&&console.log("Zermelo login succeeded from provided data")}catch{ae.set(!1)}return ae}function ut(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),ae.set(!1)}async function nt(){return await _e(ie,re,`${rt}${xe}`)}async function st(){return await _e(ie,re,`${it}${xe}`)}async function ft(s,e=0){const l=new Date(de(ce.prev)).getTime()+601200*e,t=new Date(de(ce.next)).getTime()+601200*e;return await _e(ie,re,`appointments?start=${l}&end=${t}&teachers=${s}&fields=${Ne.get("teacherSchedule")}`,!0)}async function pt(s,e=0){const l=new Date(de(ce.prev)).getTime()+601200*e,t=new Date(de(ce.next)).getTime()+601200*e;return await _e(ie,re,`appointments?user=${s}&start=${l}&end=${t}&fields=${Ne.get("studentSchedule")}`,!0)}async function dt(s){const e=new Date(de(ce.prev)).getTime(),l=new Date(de(ce.next)).getTime(),t=await _e(ie,re,`appointments?valid=true&start=${e}&end=${l}&fields=${Ne.get("getStudentClassAppointments")}&possibleStudents=${s}`,!0);let n;const a=t.response.data;for(let o=0;o<a.length;o++)if(a[o].groupsInDepartments.length>0&&a[o].subjects.length>0){if(a[o].subjects[0]=="mtr"){n=a[o].groupsInDepartments[0];break}continue}return(await _e(ie,re,`groupindepartments?id=${n}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function de(s){let e;return s==ce.prev?e=Q().weekday(-7).unix():e=Q().weekday(0).unix(),e}async function mt(s){const e=Array.prototype.concat((await st()).response.data,(await nt()).response.data),l={includeScore:!0,keys:["firstName","lastName","code"]};return new ot(e,l).search(s)}function Se(s,e){return s.sort(function(l,t){var n=l[e],a=t[e];return n<a?-1:n>a?1:0})}var ce=(s=>(s[s.prev=0]="prev",s[s.next=1]="next",s))(ce||{});function ht(s){let e,l,t,n,a,o,i,c,u,f,_,g,T;return{c(){e=d("div"),l=d("div"),t=d("h1"),t.textContent="Login",n=v(),a=d("p"),a.textContent="Provide the requested information to continue to Zermelo.",o=v(),i=d("input"),c=v(),u=d("input"),f=v(),_=d("button"),_.textContent="Login",m(t,"class","svelte-1swo36e"),m(a,"class","svelte-1swo36e"),m(i,"placeholder","schoolname"),m(i,"class","svelte-1swo36e"),O(i,"error",s[2]),m(u,"placeholder","pairing code"),m(u,"type","number"),m(u,"class","svelte-1swo36e"),O(u,"error",s[2]),m(_,"class","svelte-1swo36e"),m(l,"class","centered svelte-1swo36e"),m(e,"class","svelte-1swo36e")},m(w,p){b(w,e,p),r(e,l),r(l,t),r(l,n),r(l,a),r(l,o),r(l,i),s[4](i),r(l,c),r(l,u),s[5](u),r(l,f),r(l,_),g||(T=X(_,"click",s[3]),g=!0)},p(w,[p]){p&4&&O(i,"error",w[2]),p&4&&O(u,"error",w[2])},i:E,o:E,d(w){w&&$(e),s[4](null),s[5](null),g=!1,T()}}}function _t(s,e,l){let t,n,a;async function o(){if(!t.value||!n.value){i();return}await lt(t.value,n.value),pe(ae)?window.location.reload():i()}function i(){l(2,a=!0),setTimeout(()=>{l(2,a=!1)},3e3)}function c(f){Ce[f?"unshift":"push"](()=>{t=f,l(0,t)})}function u(f){Ce[f?"unshift":"push"](()=>{n=f,l(1,n)})}return[t,n,a,o,c,u]}class gt extends ee{constructor(e){super();te(this,e,_t,ht,le,{})}}function $e(s,e){et.set({type:s,id:e})}function De(s,e,l){const t=s.slice();return t[1]=e[l],t}function Ie(s){let e,l=s[1].icon+"",t,n,a,o,i;return{c(){e=d("button"),t=h(l),n=v(),m(e,"class","material-icons svelte-10ub0dz"),m(e,"title",a=s[1].caption)},m(c,u){b(c,e,u),r(e,t),r(e,n),o||(i=X(e,"click",s[1].action),o=!0)},p(c,u){s=c},d(c){c&&$(e),o=!1,i()}}}function vt(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Ie(De(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=me()},m(n,a){for(let o=0;o<t.length;o+=1)t[o].m(n,a);b(n,e,a)},p(n,[a]){if(a&1){l=n[0];let o;for(o=0;o<l.length;o+=1){const i=De(n,l,o);t[o]?t[o].p(i,a):(t[o]=Ie(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:E,o:E,d(n){ue(t,n),n&&$(e)}}}function bt(s){return[[{icon:"logout",action:()=>{ut()},caption:"Logout"},{icon:"calendar_today",action:()=>{console.log(pe(be)),$e("student",pe(be)[0].code)},caption:"Show own calendar"},{icon:"people",action:()=>{he.set(!0)},caption:"Open user sidebar"}]]}class $t extends ee{constructor(e){super();te(this,e,bt,vt,le,{})}}function je(s,e,l){const t=s.slice();return t[9]=e[l],t}function Be(s){let e,l=s[3],t=[];for(let n=0;n<l.length;n+=1)t[n]=Le(je(s,l,n));return{c(){e=d("div");for(let n=0;n<t.length;n+=1)t[n].c();m(e,"class","searchResults svelte-z915me"),K(e,"top",s[2]+"px"),K(e,"left",s[1]+"px")},m(n,a){b(n,e,a);for(let o=0;o<t.length;o+=1)t[o].m(e,null)},p(n,a){if(a&9){l=n[3];let o;for(o=0;o<l.length;o+=1){const i=je(n,l,o);t[o]?t[o].p(i,a):(t[o]=Le(i),t[o].c(),t[o].m(e,null))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}a&4&&K(e,"top",n[2]+"px"),a&2&&K(e,"left",n[1]+"px")},d(n){n&&$(e),ue(t,n)}}}function Ae(s){let e,l=s[9].item.code.toUpperCase()+"",t,n;return{c(){e=h("("),t=h(l),n=h(")")},m(a,o){b(a,e,o),b(a,t,o),b(a,n,o)},p(a,o){o&8&&l!==(l=a[9].item.code.toUpperCase()+"")&&I(t,l)},d(a){a&&$(e),a&&$(t),a&&$(n)}}}function Le(s){let e,l=(s[9].item.firstName||"")+"",t,n,a=(s[9].item.prefix||"")+"",o,i,c=(s[9].item.lastName||"")+"",u,f,_,g,T,w=s[9].item.isEmployee&&Ae(s);function p(){return s[8](s[9])}return{c(){e=d("button"),t=h(l),n=v(),o=h(a),i=v(),u=h(c),f=v(),w&&w.c(),_=v(),m(e,"class","svelte-z915me")},m(S,j){b(S,e,j),r(e,t),r(e,n),r(e,o),r(e,i),r(e,u),r(e,f),w&&w.m(e,null),r(e,_),g||(T=X(e,"click",p),g=!0)},p(S,j){s=S,j&8&&l!==(l=(s[9].item.firstName||"")+"")&&I(t,l),j&8&&a!==(a=(s[9].item.prefix||"")+"")&&I(o,a),j&8&&c!==(c=(s[9].item.lastName||"")+"")&&I(u,c),s[9].item.isEmployee?w?w.p(s,j):(w=Ae(s),w.c(),w.m(e,_)):w&&(w.d(1),w=null)},d(S){S&&$(e),w&&w.d(),g=!1,T()}}}function kt(s){let e,l,t,n,a,o,i,c,u=!s[5]&&s[4]&&Be(s);return{c(){e=d("div"),l=d("input"),t=v(),n=d("button"),n.textContent="search",a=v(),u&&u.c(),o=me(),m(l,"placeholder","Search people..."),m(l,"class","svelte-z915me"),m(n,"class","material-icons svelte-z915me"),m(e,"class","searchOuter svelte-z915me")},m(f,_){b(f,e,_),r(e,l),s[7](l),r(e,t),r(e,n),b(f,a,_),u&&u.m(f,_),b(f,o,_),i||(c=[X(l,"focus",s[6]),X(l,"blur",s[6]),X(l,"input",s[6])],i=!0)},p(f,[_]){!f[5]&&f[4]?u?u.p(f,_):(u=Be(f),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null)},i:E,o:E,d(f){f&&$(e),s[7](null),f&&$(a),u&&u.d(f),f&&$(o),i=!1,ke(c)}}}function Ct(s,e,l){let t,n,a,o=[],i="",c=!1;Xe(()=>{l(1,n=t.offsetLeft-5),l(2,a=t.offsetTop+30)});async function u(){l(4,i=t.value),l(3,o=await mt(t.value)),console.log(o),l(5,c=document.activeElement!=t)}function f(g){Ce[g?"unshift":"push"](()=>{t=g,l(0,t)})}return[t,n,a,o,i,c,u,f,g=>{l(0,t.value="",t),$e(g.item.isEmployee?"teacher":"student",g.item.code)}]}class wt extends ee{constructor(e){super();te(this,e,Ct,kt,le,{})}}function ze(s,e,l){const t=s.slice();return t[2]=e[l],t[3]=e,t[4]=l,t}function Re(s){let e,l=s[2].icon+"",t,n,a;function o(){return s[1](s[2],s[3],s[4])}return{c(){e=d("button"),t=h(l),m(e,"class","material-icons svelte-yojadn"),O(e,"active",s[2].value)},m(i,c){b(i,e,c),r(e,t),n||(a=X(e,"click",o),n=!0)},p(i,c){s=i,c&1&&l!==(l=s[2].icon+"")&&I(t,l),c&1&&O(e,"active",s[2].value)},d(i){i&&$(e),n=!1,a()}}}function St(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Re(ze(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=me()},m(n,a){for(let o=0;o<t.length;o+=1)t[o].m(n,a);b(n,e,a)},p(n,[a]){if(a&1){l=n[0];let o;for(o=0;o<l.length;o+=1){const i=ze(n,l,o);t[o]?t[o].p(i,a):(t[o]=Re(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:E,o:E,d(n){ue(t,n),n&&$(e)}}}function yt(s,e,l){const t=[];return he.set(!0),[t,(a,o,i)=>{l(0,o[i].value=!a.value,t),a.event(a.value)}]}class Mt extends ee{constructor(e){super();te(this,e,yt,St,le,{})}}function Tt(s){let e,l,t,n,a,o,i,c,u,f,_,g,T,w,p,S=s[0].firstName+"",j,Y,R=(s[0].prefix||"")+"",J,q,H=s[0].lastName+"",F,x,G,z,P,W;return a=new wt({}),i=new Mt({}),_=new $t({}),{c(){e=d("div"),l=d("div"),l.textContent=`Zermelo Hub | ${re}`,t=v(),n=d("div"),ne(a.$$.fragment),o=v(),ne(i.$$.fragment),c=v(),u=d("div"),f=v(),ne(_.$$.fragment),g=v(),T=d("div"),w=v(),p=d("p"),j=h(S),Y=v(),J=h(R),q=v(),F=h(H),x=v(),G=d("span"),G.textContent="account_circle",z=v(),P=d("div"),m(l,"class","header svelte-p811u5"),m(u,"class","sep svelte-p811u5"),m(T,"class","sep svelte-p811u5"),m(p,"class","svelte-p811u5"),m(G,"class","material-icons svelte-p811u5"),m(n,"class","right svelte-p811u5"),m(e,"class","tb svelte-p811u5"),m(P,"class","accent svelte-p811u5")},m(D,L){b(D,e,L),r(e,l),r(e,t),r(e,n),se(a,n,null),r(n,o),se(i,n,null),r(n,c),r(n,u),r(n,f),se(_,n,null),r(n,g),r(n,T),r(n,w),r(n,p),r(p,j),r(p,Y),r(p,J),r(p,q),r(p,F),r(n,x),r(n,G),b(D,z,L),b(D,P,L),W=!0},p(D,[L]){(!W||L&1)&&S!==(S=D[0].firstName+"")&&I(j,S),(!W||L&1)&&R!==(R=(D[0].prefix||"")+"")&&I(J,R),(!W||L&1)&&H!==(H=D[0].lastName+"")&&I(F,H)},i(D){W||(Z(a.$$.fragment,D),Z(i.$$.fragment,D),Z(_.$$.fragment,D),W=!0)},o(D){V(a.$$.fragment,D),V(i.$$.fragment,D),V(_.$$.fragment,D),W=!1},d(D){D&&$(e),oe(a),oe(i),oe(_),D&&$(z),D&&$(P)}}}function Nt(s,e,l){let t;return be.subscribe(n=>{l(0,t=n[0])}),[t]}class Dt extends ee{constructor(e){super();te(this,e,Nt,Tt,le,{})}}function Ye(s,e,l){const t=s.slice();return t[9]=e[l],t}function Ue(s,e,l){const t=s.slice();return t[12]=e[l],t}function Ee(s){let e,l=(s[12].prefix||"")+"",t,n,a=s[12].lastName+"",o,i,c,u=s[12].code.toUpperCase()+"",f,_,g,T;function w(){return s[7](s[12])}return{c(){e=d("button"),t=h(l),n=v(),o=h(a),i=v(),c=d("span"),f=h(u),_=v(),m(c,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(p,S){b(p,e,S),r(e,t),r(e,n),r(e,o),r(e,i),r(e,c),r(c,f),r(e,_),g||(T=X(e,"click",w),g=!0)},p(p,S){s=p,S&2&&l!==(l=(s[12].prefix||"")+"")&&I(t,l),S&2&&a!==(a=s[12].lastName+"")&&I(o,a),S&2&&u!==(u=s[12].code.toUpperCase()+"")&&I(f,u)},d(p){p&&$(e),g=!1,T()}}}function Oe(s){let e,l=s[9].firstName+"",t,n,a=(s[9].prefix||"")+"",o,i,c=s[9].lastName+"",u,f,_,g=(s[9].class||"...")+"",T,w,p,S;function j(){return s[8](s[9])}return{c(){e=d("button"),t=h(l),n=v(),o=h(a),i=v(),u=h(c),f=v(),_=d("span"),T=h(g),w=v(),m(_,"class","right svelte-dvgbtd"),m(e,"class","svelte-dvgbtd")},m(Y,R){b(Y,e,R),r(e,t),r(e,n),r(e,o),r(e,i),r(e,u),r(e,f),r(e,_),r(_,T),r(e,w),p||(S=X(e,"click",j),p=!0)},p(Y,R){s=Y,R&1&&l!==(l=s[9].firstName+"")&&I(t,l),R&1&&a!==(a=(s[9].prefix||"")+"")&&I(o,a),R&1&&c!==(c=s[9].lastName+"")&&I(u,c),R&1&&g!==(g=(s[9].class||"...")+"")&&I(T,g)},d(Y){Y&&$(e),p=!1,S()}}}function It(s){let e,l,t,n,a=s[2]?"less":"more",o,i,c,u,f,_=s[1].length+"",g,T,w,p,S,j,Y,R,J=s[3]?"less":"more",q,H,F,x,G,z=s[0].length+"",P,W,D,L,A,fe,C=s[1],N=[];for(let M=0;M<C.length;M+=1)N[M]=Ee(Ue(s,C,M));let B=s[0],U=[];for(let M=0;M<B.length;M+=1)U[M]=Oe(Ye(s,B,M));return{c(){e=d("div"),l=d("h3"),t=d("button"),n=h("expand_"),o=h(a),i=v(),c=d("span"),c.textContent="Teachers",u=v(),f=d("span"),g=h(_),T=h("\xA0\xA0"),w=v(),p=d("div");for(let M=0;M<N.length;M+=1)N[M].c();S=v(),j=d("h3"),Y=d("button"),R=h("expand_"),q=h(J),H=v(),F=d("span"),F.textContent="Students",x=v(),G=d("span"),P=h(z),W=h("\xA0\xA0"),D=v(),L=d("div");for(let M=0;M<U.length;M+=1)U[M].c();m(t,"class","material-icons svelte-dvgbtd"),m(c,"class","svelte-dvgbtd"),m(f,"class","right svelte-dvgbtd"),m(l,"class","svelte-dvgbtd"),m(p,"class","svelte-dvgbtd"),O(p,"hidden",!s[2]),m(Y,"class","material-icons svelte-dvgbtd"),m(F,"class","svelte-dvgbtd"),m(G,"class","right svelte-dvgbtd"),m(j,"class","svelte-dvgbtd"),m(L,"class","svelte-dvgbtd"),O(L,"hidden",!s[3]),m(e,"class","sidebar svelte-dvgbtd"),O(e,"hidden",!s[4])},m(M,y){b(M,e,y),r(e,l),r(l,t),r(t,n),r(t,o),r(l,i),r(l,c),r(l,u),r(l,f),r(f,g),r(f,T),r(e,w),r(e,p);for(let k=0;k<N.length;k+=1)N[k].m(p,null);r(e,S),r(e,j),r(j,Y),r(Y,R),r(Y,q),r(j,H),r(j,F),r(j,x),r(j,G),r(G,P),r(G,W),r(e,D),r(e,L);for(let k=0;k<U.length;k+=1)U[k].m(L,null);A||(fe=[X(t,"click",s[5]),X(Y,"click",s[6])],A=!0)},p(M,[y]){if(y&4&&a!==(a=M[2]?"less":"more")&&I(o,a),y&2&&_!==(_=M[1].length+"")&&I(g,_),y&2){C=M[1];let k;for(k=0;k<C.length;k+=1){const ve=Ue(M,C,k);N[k]?N[k].p(ve,y):(N[k]=Ee(ve),N[k].c(),N[k].m(p,null))}for(;k<N.length;k+=1)N[k].d(1);N.length=C.length}if(y&4&&O(p,"hidden",!M[2]),y&8&&J!==(J=M[3]?"less":"more")&&I(q,J),y&1&&z!==(z=M[0].length+"")&&I(P,z),y&1){B=M[0];let k;for(k=0;k<B.length;k+=1){const ve=Ye(M,B,k);U[k]?U[k].p(ve,y):(U[k]=Oe(ve),U[k].c(),U[k].m(L,null))}for(;k<U.length;k+=1)U[k].d(1);U.length=B.length}y&8&&O(L,"hidden",!M[3]),y&16&&O(e,"hidden",!M[4])},i:E,o:E,d(M){M&&$(e),ue(N,M),ue(U,M),A=!1,ke(fe)}}}function jt(s,e,l){let t=[],n=[],a=!1,o=!1,i=!0;ae.subscribe(async g=>{if(g==!0){l(0,t=(await nt()).response.data),l(1,n=(await st()).response.data),t.length>0&&l(0,t=Se(t,"firstName")),n.length>0&&l(1,n=Se(n,"lastName"));for(let T=0;T<t.length;T++)l(0,t[T].class=await dt(t[T].code),t)}});function c(){l(2,a=!a)}function u(){l(3,o=!o)}return he.subscribe(g=>l(4,i=g)),[t,n,a,o,i,c,u,g=>{$e("teacher",g.code)},g=>{$e("student",g.code)}]}class Bt extends ee{constructor(e){super();te(this,e,jt,It,le,{})}}function At(s){let e,l=s[0].subjects[0]+"",t,n,a=s[0].locations+"",o,i,c,u,f,_=(s[0].classes||"")+"",g,T,w;return{c(){e=d("div"),t=h(l),n=v(),o=h(a),i=d("br"),c=d("br"),u=v(),f=d("p"),g=h(_),m(f,"class","classes svelte-r1xfn2"),m(e,"class","appointment svelte-r1xfn2"),K(e,"left",10+(s[0].startMin-440)*2+"px"),K(e,"width",(s[0].endMin-s[0].startMin)*2-2+"px"),K(e,"top",52+s[0].rowNr*80-80+"px"),O(e,"cancelled",s[0].cancelled),O(e,"changed",s[0].teacherChanged||s[0].timeChanged||s[0].locationChanged)},m(p,S){b(p,e,S),r(e,t),r(e,n),r(e,o),r(e,i),r(e,c),r(e,u),r(e,f),r(f,g),T||(w=X(e,"click",s[1]),T=!0)},p(p,[S]){S&1&&l!==(l=p[0].subjects[0]+"")&&I(t,l),S&1&&a!==(a=p[0].locations+"")&&I(o,a),S&1&&_!==(_=(p[0].classes||"")+"")&&I(g,_),S&1&&K(e,"left",10+(p[0].startMin-440)*2+"px"),S&1&&K(e,"width",(p[0].endMin-p[0].startMin)*2-2+"px"),S&1&&K(e,"top",52+p[0].rowNr*80-80+"px"),S&1&&O(e,"cancelled",p[0].cancelled),S&1&&O(e,"changed",p[0].teacherChanged||p[0].timeChanged||p[0].locationChanged)},i:E,o:E,d(p){p&&$(e),T=!1,w()}}}function Lt(s,e,l){let{appointment:t}=e;function n(){tt.set(t),we.set(!0)}return s.$$set=a=>{"appointment"in a&&l(0,t=a.appointment)},[t,n]}class zt extends ee{constructor(e){super();te(this,e,Lt,At,le,{appointment:0})}}function We(s,e,l){const t=s.slice();return t[1]=e[l],t}function Pe(s){let e,l=s[1].d+"",t,n;return{c(){e=d("div"),t=h(l),n=v(),m(e,"class","appointment svelte-vvjiw7"),K(e,"left","10px"),K(e,"width","80px"),K(e,"top",10+80*s[1].i-40+"px")},m(a,o){b(a,e,o),r(e,t),r(e,n)},p:E,d(a){a&&$(e)}}}function Rt(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=Pe(We(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=me()},m(n,a){for(let o=0;o<t.length;o+=1)t[o].m(n,a);b(n,e,a)},p(n,[a]){if(a&1){l=n[0];let o;for(o=0;o<l.length;o+=1){const i=We(n,l,o);t[o]?t[o].p(i,a):(t[o]=Pe(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:E,o:E,d(n){ue(t,n),n&&$(e)}}}function Yt(s){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class Ut extends ee{constructor(e){super();te(this,e,Yt,Rt,le,{})}}function qe(s,e,l){const t=s.slice();return t[1]=e[l],t}function He(s){let e,l=s[1].start.h.toString().padStart(2,"0")+"",t,n,a=s[1].start.m.toString().padStart(2,"0")+"",o,i,c=s[1].end.h.toString().padStart(2,"0")+"",u,f,_=s[1].end.m.toString().padStart(2,"0")+"",g,T;return{c(){e=d("div"),t=h(l),n=h(":"),o=h(a),i=h(" - "),u=h(c),f=h(":"),g=h(_),T=v(),m(e,"class","appointment svelte-yc4ag7"),K(e,"left",10+(s[1].startMin-440)*2+"px"),K(e,"width",(s[1].endMin-s[1].startMin)*2-2+"px"),K(e,"height","40px"),K(e,"top","10px")},m(w,p){b(w,e,p),r(e,t),r(e,n),r(e,o),r(e,i),r(e,u),r(e,f),r(e,g),r(e,T)},p:E,d(w){w&&$(e)}}}function Et(s){let e,l=s[0],t=[];for(let n=0;n<l.length;n+=1)t[n]=He(qe(s,l,n));return{c(){for(let n=0;n<t.length;n+=1)t[n].c();e=me()},m(n,a){for(let o=0;o<t.length;o+=1)t[o].m(n,a);b(n,e,a)},p(n,[a]){if(a&1){l=n[0];let o;for(o=0;o<l.length;o+=1){const i=qe(n,l,o);t[o]?t[o].p(i,a):(t[o]=He(i),t[o].c(),t[o].m(e.parentNode,e))}for(;o<t.length;o+=1)t[o].d(1);t.length=l.length}},i:E,o:E,d(n){ue(t,n),n&&$(e)}}}function Ot(s){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class Wt extends ee{constructor(e){super();te(this,e,Ot,Et,le,{})}}function Ze(s){let e,l,t=s[0].subjects.toString().toUpperCase()+"",n,a,o,i,c,u=s[0].locations+"",f,_,g,T,w,p=s[0].teachers.length>1?"s":"",S,j,Y=s[0].teachers.toString().toUpperCase()+"",R,J,q,H,F,x=Q(s[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"",G,z,P,W,D,L=s[0].classes.length>1?"s":"",A,fe,C=(s[0].classes.length?s[0].classes:"Unknown")+"",N,B,U,M=s[0].changeWarning&&Fe(s);return{c(){e=d("h3"),l=h("Information for "),n=h(t),a=v(),o=d("p"),i=d("b"),i.textContent="Location",c=h(": "),f=h(u),_=v(),g=d("p"),T=d("b"),w=h("Teacher"),S=h(p),j=h(": "),R=h(Y),J=v(),q=d("p"),H=d("b"),H.textContent="Timestamp",F=h(": "),G=h(x),z=v(),P=d("p"),W=d("b"),D=h("Group"),A=h(L),fe=h(": "),N=h(C),B=v(),M&&M.c(),U=me(),m(e,"class","svelte-13l868e"),m(o,"class","svelte-13l868e"),m(g,"class","svelte-13l868e"),m(q,"class","svelte-13l868e"),m(P,"class","svelte-13l868e")},m(y,k){b(y,e,k),r(e,l),r(e,n),b(y,a,k),b(y,o,k),r(o,i),r(o,c),r(o,f),b(y,_,k),b(y,g,k),r(g,T),r(T,w),r(T,S),r(g,j),r(g,R),b(y,J,k),b(y,q,k),r(q,H),r(q,F),r(q,G),b(y,z,k),b(y,P,k),r(P,W),r(W,D),r(W,A),r(P,fe),r(P,N),b(y,B,k),M&&M.m(y,k),b(y,U,k)},p(y,k){k&1&&t!==(t=y[0].subjects.toString().toUpperCase()+"")&&I(n,t),k&1&&u!==(u=y[0].locations+"")&&I(f,u),k&1&&p!==(p=y[0].teachers.length>1?"s":"")&&I(S,p),k&1&&Y!==(Y=y[0].teachers.toString().toUpperCase()+"")&&I(R,Y),k&1&&x!==(x=Q(y[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:MM A")+"")&&I(G,x),k&1&&L!==(L=y[0].classes.length>1?"s":"")&&I(A,L),k&1&&C!==(C=(y[0].classes.length?y[0].classes:"Unknown")+"")&&I(N,C),y[0].changeWarning?M?M.p(y,k):(M=Fe(y),M.c(),M.m(U.parentNode,U)):M&&(M.d(1),M=null)},d(y){y&&$(e),y&&$(a),y&&$(o),y&&$(_),y&&$(g),y&&$(J),y&&$(q),y&&$(z),y&&$(P),y&&$(B),M&&M.d(y),y&&$(U)}}}function Fe(s){let e,l,t,n,a,o,i=s[0].changeWarning+"",c;return{c(){e=d("hr"),l=v(),t=d("p"),n=d("b"),n.textContent="Warning",a=h(":"),o=d("br"),c=h(i),m(e,"class","svelte-13l868e"),m(t,"class","svelte-13l868e")},m(u,f){b(u,e,f),b(u,l,f),b(u,t,f),r(t,n),r(t,a),r(t,o),r(t,c)},p(u,f){f&1&&i!==(i=u[0].changeWarning+"")&&I(c,i)},d(u){u&&$(e),u&&$(l),u&&$(t)}}}function Pt(s){let e,l,t,n,a,o,i,c=s[0]&&Ze(s);return{c(){e=d("div"),l=v(),t=d("div"),n=d("button"),n.textContent="close",a=v(),c&&c.c(),m(e,"class","shade svelte-13l868e"),O(e,"hidden",!s[1]),m(n,"class","material-icons svelte-13l868e"),m(t,"class","dialog svelte-13l868e"),O(t,"hidden",!s[1])},m(u,f){b(u,e,f),b(u,l,f),b(u,t,f),r(t,n),r(t,a),c&&c.m(t,null),o||(i=[X(e,"click",s[2]),X(n,"click",s[2])],o=!0)},p(u,[f]){f&2&&O(e,"hidden",!u[1]),u[0]?c?c.p(u,f):(c=Ze(u),c.c(),c.m(t,null)):c&&(c.d(1),c=null),f&2&&O(t,"hidden",!u[1])},i:E,o:E,d(u){u&&$(e),u&&$(l),u&&$(t),c&&c.d(),o=!1,ke(i)}}}function qt(s,e,l){Q.extend(ye),Q.extend(Me),Q.extend(Te);let t,n;tt.subscribe(o=>l(0,t=o)),we.subscribe(o=>l(1,n=o));function a(){we.set(!1)}return[t,n,a]}class Ht extends ee{constructor(e){super();te(this,e,qt,Pt,le,{})}}function Ge(s,e,l){const t=s.slice();return t[8]=e[l],t}function Ke(s){let e;return{c(){e=h("(Current)")},m(l,t){b(l,e,t)},d(l){l&&$(e)}}}function Zt(s){let e;return{c(){e=h("Loading...")},m(l,t){b(l,e,t)},p:E,d(l){l&&$(e)}}}function Ft(s){let e;function l(a,o){return a[1].id?Kt:Gt}let t=l(s),n=t(s);return{c(){n.c(),e=me()},m(a,o){n.m(a,o),b(a,e,o)},p(a,o){t===(t=l(a))&&n?n.p(a,o):(n.d(1),n=t(a),n&&(n.c(),n.m(e.parentNode,e)))},d(a){n.d(a),a&&$(e)}}}function Gt(s){let e;return{c(){e=h("No schedule selected.")},m(l,t){b(l,e,t)},p:E,d(l){l&&$(e)}}}function Kt(s){let e,l=s[1].type+"",t,n,a=s[1].id.toUpperCase()+"",o;return{c(){e=h("Schedule for "),t=h(l),n=v(),o=h(a)},m(i,c){b(i,e,c),b(i,t,c),b(i,n,c),b(i,o,c)},p(i,c){c&2&&l!==(l=i[1].type+"")&&I(t,l),c&2&&a!==(a=i[1].id.toUpperCase()+"")&&I(o,a)},d(i){i&&$(e),i&&$(t),i&&$(n),i&&$(o)}}}function Ve(s){let e,l;return e=new zt({props:{appointment:s[8]}}),{c(){ne(e.$$.fragment)},m(t,n){se(e,t,n),l=!0},p(t,n){const a={};n&1&&(a.appointment=t[8]),e.$set(a)},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function Vt(s){let e,l,t,n,a,o=Q().week()-2+s[3]+"",i,c,u,f,_,g,T,w,p,S,j,Y,R,J,q,H,F,x,G,z=!s[3]&&Ke();function P(C,N){return C[2]?Zt:Ft}let W=P(s),D=W(s);j=new Ut({}),R=new Wt({});let L=s[0],A=[];for(let C=0;C<L.length;C+=1)A[C]=Ve(Ge(s,L,C));const fe=C=>V(A[C],1,1,()=>{A[C]=null});return H=new Ht({}),{c(){e=d("h3"),l=d("button"),l.textContent="arrow_back_ios_new",t=v(),n=d("span"),a=h("Week: "),i=h(o),c=v(),z&&z.c(),u=v(),f=d("button"),f.textContent="arrow_forward_ios",_=v(),g=d("div"),T=v(),w=d("h2"),D.c(),p=v(),S=d("div"),ne(j.$$.fragment),Y=v(),ne(R.$$.fragment),J=v();for(let C=0;C<A.length;C+=1)A[C].c();q=v(),ne(H.$$.fragment),m(l,"class","material-icons svelte-yk7fk3"),m(n,"class","svelte-yk7fk3"),m(f,"class","material-icons svelte-yk7fk3"),m(g,"class","sep svelte-yk7fk3"),m(e,"class","svelte-yk7fk3"),m(w,"class","svelte-yk7fk3"),m(S,"class","grid svelte-yk7fk3")},m(C,N){b(C,e,N),r(e,l),r(e,t),r(e,n),r(n,a),r(n,i),r(n,c),z&&z.m(n,null),r(e,u),r(e,f),r(e,_),r(e,g),b(C,T,N),b(C,w,N),D.m(w,null),b(C,p,N),b(C,S,N),se(j,S,null),r(S,Y),se(R,S,null),r(S,J);for(let B=0;B<A.length;B+=1)A[B].m(S,null);r(S,q),se(H,S,null),F=!0,x||(G=[X(l,"click",s[4]),X(f,"click",s[5])],x=!0)},p(C,[N]){if((!F||N&8)&&o!==(o=Q().week()-2+C[3]+"")&&I(i,o),C[3]?z&&(z.d(1),z=null):z||(z=Ke(),z.c(),z.m(n,null)),W===(W=P(C))&&D?D.p(C,N):(D.d(1),D=W(C),D&&(D.c(),D.m(w,null))),N&1){L=C[0];let B;for(B=0;B<L.length;B+=1){const U=Ge(C,L,B);A[B]?(A[B].p(U,N),Z(A[B],1)):(A[B]=Ve(U),A[B].c(),Z(A[B],1),A[B].m(S,q))}for(Je(),B=L.length;B<A.length;B+=1)fe(B);Qe()}},i(C){if(!F){Z(j.$$.fragment,C),Z(R.$$.fragment,C);for(let N=0;N<L.length;N+=1)Z(A[N]);Z(H.$$.fragment,C),F=!0}},o(C){V(j.$$.fragment,C),V(R.$$.fragment,C),A=A.filter(Boolean);for(let N=0;N<A.length;N+=1)V(A[N]);V(H.$$.fragment,C),F=!1},d(C){C&&$(e),z&&z.d(),C&&$(T),C&&$(w),D.d(),C&&$(p),C&&$(S),oe(j),oe(R),ue(A,C),oe(H),x=!1,ke(G)}}}function Xt(s,e,l){Q.extend(ye),Q.extend(Me),Q.extend(Te);let t=[],n=[],a={id:""},o=!1,i=0;et.subscribe(_=>{_&&(l(1,a=_),c(_.type,_.id))});async function c(_,g){l(2,o=!0),console.log(_,g);let T;_=="student"?T=await pt(g,i):T=await ft(g,i),t=Se(T.response.data,"start"),l(0,n=[]),console.log(t);for(let w=0;w<t.length;w++){const p=t[w];console.log(p);const S=new Date(p.start*1e3).getDay()-new Date(de(ce.prev)).getDay()+2;n.push({rowNr:S,startMin:new Date(p.start*1e3).getHours()*60+new Date(p.start*1e3).getMinutes(),endMin:new Date(p.end*1e3).getHours()*60+new Date(p.end*1e3).getMinutes(),slotName:p.startTimeSlotName,locations:p.locations,teachers:p.teachers,subjects:p.subjects,cancelled:p.cancelled,changeWarning:p.changeDescription,teacherChanged:p.teacherChanged,locationChanged:p.locationChanged,timeChanged:p.timeChanged,start:{h:new Date(p.start*1e3).getHours(),m:new Date(p.start*1e3).getMinutes()},end:{h:new Date(p.end*1e3).getHours(),m:new Date(p.end*1e3).getMinutes()},classes:p.groups,startTimeStamp:p.start,endTimeStamp:p.end})}l(2,o=!1)}function u(){l(3,i-=1),c(a.type,a.id)}function f(){l(3,i+=1),c(a.type,a.id)}return[n,a,o,i,u,f,c]}class Jt extends ee{constructor(e){super();te(this,e,Xt,Vt,le,{openSched:6})}get openSched(){return this.$$.ctx[6]}}function Qt(s){let e,l,t,n,a;return l=new Jt({}),{c(){e=d("div"),ne(l.$$.fragment),m(e,"class","content svelte-1v6jm7o"),O(e,"noRightBar",s[0])},m(o,i){b(o,e,i),se(l,e,null),t=!0,n||(a=X(e,"mousedown",s[1]),n=!0)},p(o,[i]){i&1&&O(e,"noRightBar",o[0])},i(o){t||(Z(l.$$.fragment,o),t=!0)},o(o){V(l.$$.fragment,o),t=!1},d(o){o&&$(e),oe(l),n=!1,a()}}}function xt(s,e,l){let t;he.subscribe(a=>l(0,t=!a));function n(a){const o=a.composedPath();let i=!0;for(let c=0;c<o.length;c++){console.log(o[c]);const u=o[c];if(u.classList&&u.classList.contains("sidebar")){i=!1;break}}i&&he.set(!1),console.log(pe(he))}return[t,n]}class el extends ee{constructor(e){super();te(this,e,xt,Qt,le,{})}}function tl(s){let e,l,t,n,a,o,i;return l=new el({}),n=new Bt({}),o=new Dt({}),{c(){e=d("div"),ne(l.$$.fragment),t=v(),ne(n.$$.fragment),a=v(),ne(o.$$.fragment),m(e,"class","bg svelte-36otyo")},m(c,u){b(c,e,u),se(l,e,null),r(e,t),se(n,e,null),r(e,a),se(o,e,null),i=!0},p:E,i(c){i||(Z(l.$$.fragment,c),Z(n.$$.fragment,c),Z(o.$$.fragment,c),i=!0)},o(c){V(l.$$.fragment,c),V(n.$$.fragment,c),V(o.$$.fragment,c),i=!1},d(c){c&&$(e),oe(l),oe(n),oe(o)}}}class ll extends ee{constructor(e){super();te(this,e,null,tl,le,{})}}function nl(s){let e,l;return e=new gt({}),{c(){ne(e.$$.fragment)},m(t,n){se(e,t,n),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function sl(s){let e,l;return e=new ll({}),{c(){ne(e.$$.fragment)},m(t,n){se(e,t,n),l=!0},i(t){l||(Z(e.$$.fragment,t),l=!0)},o(t){V(e.$$.fragment,t),l=!1},d(t){oe(e,t)}}}function ol(s){let e,l,t,n;const a=[sl,nl],o=[];function i(c,u){return c[0]?0:1}return l=i(s),t=o[l]=a[l](s),{c(){e=d("div"),t.c()},m(c,u){b(c,e,u),o[l].m(e,null),n=!0},p(c,[u]){let f=l;l=i(c),l!==f&&(Je(),V(o[f],1,1,()=>{o[f]=null}),Qe(),t=o[l],t||(t=o[l]=a[l](c),t.c()),Z(t,1),t.m(e,null))},i(c){n||(Z(t),n=!0)},o(c){V(t),n=!1},d(c){c&&$(e),o[l].d()}}}function al(s,e,l){let t;return ae.subscribe(n=>{l(0,t=n)}),Xe(async()=>{await lt()}),[t]}class rl extends ee{constructor(e){super();te(this,e,al,ol,le,{})}}new rl({target:document.getElementById("app")});
