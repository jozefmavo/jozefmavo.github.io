import { w as De, S as x, i as ee, s as te, e as p, a as $, b as d, t as le, c as w, d as o, l as F, n as Y, f as k, o as Ne, g as Te, h as je, j as y, k as Z, m as L, p as ke, q as be, r as we, u as X, v as Q, x as I, y as z, z as V, A as Se, B as Me, C as We, D as R, E as Ye, F as He, G as Ae, H as St, I as $t, J as Mt, K as Dt } from "./vendor.7e40f09b.js"; const Nt = function () { const e = document.createElement("link").relList; if (e && e.supports && e.supports("modulepreload")) return; for (const s of document.querySelectorAll('link[rel="modulepreload"]')) t(s); new MutationObserver(s => { for (const a of s) if (a.type === "childList") for (const r of a.addedNodes) r.tagName === "LINK" && r.rel === "modulepreload" && t(r) }).observe(document, { childList: !0, subtree: !0 }); function n(s) { const a = {}; return s.integrity && (a.integrity = s.integrity), s.referrerpolicy && (a.referrerPolicy = s.referrerpolicy), s.crossorigin === "use-credentials" ? a.credentials = "include" : s.crossorigin === "anonymous" ? a.credentials = "omit" : a.credentials = "same-origin", a } function t(s) { if (s.ep) return; s.ep = !0; const a = n(s); fetch(s.href, a) } }; Nt(); const he = new URLSearchParams(location.search), Be = "1201", jt = "users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=", Tt = "users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=", Ue = new Map([["teacherSchedule", "id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"], ["studentSchedule", "start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"], ["classSchedule", "id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional"], ["getStudentClassAppointments", "groupsInDepartments%2Csubjects"]]), Ie = De(), It = De(!0), Oe = De(); let Le = De(!1); const bt = De(), Re = De(); function Lt(l) { let e, n, t, s, a, r, i, f, c, m, v, h, C; return { c() { e = p("div"), n = p("div"), t = p("h1"), t.textContent = "Login", s = $(), a = p("p"), a.textContent = "Please provide login information to continue to Zermelo.", r = $(), i = p("input"), f = $(), c = p("input"), m = $(), v = p("button"), v.textContent = "Login", d(t, "class", "svelte-1w0gyqm"), d(a, "class", "svelte-1w0gyqm"), d(i, "placeholder", "schoolname"), d(i, "class", "svelte-1w0gyqm"), le(i, "error", l[2]), d(c, "placeholder", "pairing code"), d(c, "type", "number"), d(c, "class", "svelte-1w0gyqm"), le(c, "error", l[2]), d(v, "class", "svelte-1w0gyqm"), d(n, "class", "centered svelte-1w0gyqm"), d(e, "class", "svelte-1w0gyqm") }, m(u, b) { w(u, e, b), o(e, n), o(n, t), o(n, s), o(n, a), o(n, r), o(n, i), l[4](i), o(n, f), o(n, c), l[5](c), o(n, m), o(n, v), h || (C = F(v, "click", l[3]), h = !0) }, p(u, [b]) { b & 4 && le(i, "error", u[2]), b & 4 && le(c, "error", u[2]) }, i: Y, o: Y, d(u) { u && k(e), l[4](null), l[5](null), h = !1, C() } } } function zt(l, e, n) { let t, s, a; Ne(async () => { await Pe() && ve("Home") }); async function r() { if (!t.value || !s.value) { i(); return } await Pe(t.value, s.value), je(se) ? window.location.reload() : i() } function i() { n(2, a = !0), setTimeout(() => { n(2, a = !1) }, 3e3) } function f(m) { Te[m ? "unshift" : "push"](() => { t = m, n(0, t) }) } function c(m) { Te[m ? "unshift" : "push"](() => { s = m, n(1, s) }) } return [t, s, a, r, f, c] } class Pt extends x { constructor(e) { super(); ee(this, e, zt, Lt, te, {}) } } function Wt(l) { let e, n, t, s, a, r, i, f, c, m = (l[0].classes || "") + "", v, h, C; return { c() { e = p("div"), n = p("p"), t = p("b"), s = y(l[5]), a = $(), r = p("p"), i = y(l[6]), f = $(), c = p("p"), v = y(m), d(n, "class", "svelte-6mydv4"), d(r, "class", "svelte-6mydv4"), d(c, "class", "classes svelte-6mydv4"), d(e, "class", "appointment svelte-6mydv4"), Z(e, "left", l[2] + "px"), Z(e, "width", l[3] + "px"), Z(e, "top", l[4] + "px"), le(e, "cancelled", l[0].cancelled), le(e, "changed", l[1]) }, m(u, b) { w(u, e, b), o(e, n), o(n, t), o(t, s), o(e, a), o(e, r), o(r, i), o(e, f), o(e, c), o(c, v), h || (C = F(e, "click", l[7]), h = !0) }, p(u, [b]) { b & 32 && L(s, u[5]), b & 64 && L(i, u[6]), b & 1 && m !== (m = (u[0].classes || "") + "") && L(v, m), b & 4 && Z(e, "left", u[2] + "px"), b & 8 && Z(e, "width", u[3] + "px"), b & 16 && Z(e, "top", u[4] + "px"), b & 1 && le(e, "cancelled", u[0].cancelled), b & 2 && le(e, "changed", u[1]) }, i: Y, o: Y, d(u) { u && k(e), h = !1, C() } } } function Yt(l, e, n) { let { appointment: t } = e; function s() { bt.set(t), Le.set(!0) } let a, r, i, f, c, m; return Ne(() => { n(1, a = t.teacherChanged || t.timeChanged || t.locationChanged), n(2, r = (t.startMin - 440) * 2), n(3, i = (t.endMin - t.startMin) * 2 - 2), n(4, f = 42 + t.rowNr * 80 - 80), n(5, c = `${t.subjects[0] || t.teachers.join(" ").toUpperCase()} - ${t.locations.length ? t.locations : "0_00"}`), n(6, m = t.subjects[0] ? t.teachers.join(" ").toUpperCase() : "") }), l.$$set = v => { "appointment" in v && n(0, t = v.appointment) }, [t, a, r, i, f, c, m, s] } class Ct extends x { constructor(e) { super(); ee(this, e, Yt, Wt, te, { appointment: 0 }) } } function Ge(l, e, n) { const t = l.slice(); return t[1] = e[n], t } function Ze(l) { let e, n = l[1].d + "", t, s; return { c() { e = p("div"), t = y(n), s = $(), d(e, "class", "appointment svelte-1kb08l9"), Z(e, "left", "0px"), Z(e, "width", "80px"), Z(e, "top", 2 + 80 * l[1].i - 40 + "px"), le(e, "today", new Date().getDay() == l[1].i) }, m(a, r) { w(a, e, r), o(e, t), o(e, s) }, p(a, r) { r & 1 && le(e, "today", new Date().getDay() == a[1].i) }, d(a) { a && k(e) } } } function Ht(l) { let e, n = l[0], t = []; for (let s = 0; s < n.length; s += 1)t[s] = Ze(Ge(l, n, s)); return { c() { for (let s = 0; s < t.length; s += 1)t[s].c(); e = ke() }, m(s, a) { for (let r = 0; r < t.length; r += 1)t[r].m(s, a); w(s, e, a) }, p(s, [a]) { if (a & 1) { n = s[0]; let r; for (r = 0; r < n.length; r += 1) { const i = Ge(s, n, r); t[r] ? t[r].p(i, a) : (t[r] = Ze(i), t[r].c(), t[r].m(e.parentNode, e)) } for (; r < t.length; r += 1)t[r].d(1); t.length = n.length } }, i: Y, o: Y, d(s) { be(t, s), s && k(e) } } } function At(l) { return [[{ i: 1, d: "Mon" }, { i: 2, d: "Tue" }, { i: 3, d: "Wed" }, { i: 4, d: "Thu" }, { i: 5, d: "Fri" }]] } class wt extends x { constructor(e) { super(); ee(this, e, At, Ht, te, {}) } } function Ke(l, e, n) { const t = l.slice(); return t[1] = e[n], t } function Je(l) { let e, n = l[1].start.h.toString().padStart(2, "0") + "", t, s, a = l[1].start.m.toString().padStart(2, "0") + "", r, i, f = l[1].end.h.toString().padStart(2, "0") + "", c, m, v = l[1].end.m.toString().padStart(2, "0") + "", h, C; return { c() { e = p("div"), t = y(n), s = y(":"), r = y(a), i = y(" - "), c = y(f), m = y(":"), h = y(v), C = $(), d(e, "class", "appointment svelte-jp6sc9"), Z(e, "left", (l[1].startMin - 440) * 2 + "px"), Z(e, "width", (l[1].endMin - l[1].startMin) * 2 - 2 + "px"), Z(e, "height", "40px"), Z(e, "top", "0px") }, m(u, b) { w(u, e, b), o(e, t), o(e, s), o(e, r), o(e, i), o(e, c), o(e, m), o(e, h), o(e, C) }, p: Y, d(u) { u && k(e) } } } function Bt(l) { let e, n = l[0], t = []; for (let s = 0; s < n.length; s += 1)t[s] = Je(Ke(l, n, s)); return { c() { for (let s = 0; s < t.length; s += 1)t[s].c(); e = ke() }, m(s, a) { for (let r = 0; r < t.length; r += 1)t[r].m(s, a); w(s, e, a) }, p(s, [a]) { if (a & 1) { n = s[0]; let r; for (r = 0; r < n.length; r += 1) { const i = Ke(s, n, r); t[r] ? t[r].p(i, a) : (t[r] = Je(i), t[r].c(), t[r].m(e.parentNode, e)) } for (; r < t.length; r += 1)t[r].d(1); t.length = n.length } }, i: Y, o: Y, d(s) { be(t, s), s && k(e) } } } function Ut(l) { return [[{ startMin: 480, endMin: 540, start: { h: 8, m: 0 }, end: { h: 9, m: 0 } }, { startMin: 540, endMin: 600, start: { h: 9, m: 0 }, end: { h: 10, m: 0 } }, { startMin: 600, endMin: 660, start: { h: 10, m: 0 }, end: { h: 11, m: 0 } }, { startMin: 660, endMin: 720, start: { h: 11, m: 0 }, end: { h: 12, m: 0 } }, { startMin: 720, endMin: 780, start: { h: 12, m: 0 }, end: { h: 13, m: 0 } }, { startMin: 780, endMin: 840, start: { h: 13, m: 0 }, end: { h: 14, m: 0 } }, { startMin: 840, endMin: 900, start: { h: 14, m: 0 }, end: { h: 15, m: 0 } }, { startMin: 900, endMin: 960, start: { h: 15, m: 0 }, end: { h: 16, m: 0 } }, { startMin: 960, endMin: 1020, start: { h: 16, m: 0 }, end: { h: 17, m: 0 } }, { startMin: 1020, endMin: 1080, start: { h: 17, m: 0 }, end: { h: 18, m: 0 } }]] } class kt extends x { constructor(e) { super(); ee(this, e, Ut, Bt, te, {}) } } const qt = new Map([["groupindepartments", ["id", "name", "isMentorGroup"]], ["departmentsofbranches", ["id", "code"]]]); function Xe(l) { return (qt.get(l) || []).join("%2C") } function Qe(l, e, n) { const t = l.slice(); return t[21] = e[n], t } function Ve(l) { let e, n, t, s, a = { value: l[8], items: l[6] }; return t = new St({ props: a }), l[15](t), t.$on("select", l[9]), { c() { e = p("div"), n = p("div"), X(t.$$.fragment), d(n, "class", "svelte-zfs850"), d(e, "class", "select svelte-zfs850") }, m(r, i) { w(r, e, i), o(e, n), Q(t, n, null), s = !0 }, p(r, i) { const f = {}; i & 64 && (f.items = r[6]), t.$set(f) }, i(r) { s || (I(t.$$.fragment, r), s = !0) }, o(r) { z(t.$$.fragment, r), s = !1 }, d(r) { r && k(e), l[15](null), V(t) } } } function Et(l) { let e; return { c() { e = p("span"), e.textContent = "Loading...", d(e, "class", "svelte-zfs850") }, m(n, t) { w(n, e, t) }, p: Y, d(n) { n && k(e) } } } function Ot(l) { let e = (l[3] || "No schedule selected.") + "", n; return { c() { n = y(e) }, m(t, s) { w(t, n, s) }, p(t, s) { s & 8 && e !== (e = (t[3] || "No schedule selected.") + "") && L(n, e) }, d(t) { t && k(n) } } } function xe(l) { let e, n; return e = new Ct({ props: { appointment: l[21] } }), { c() { X(e.$$.fragment) }, m(t, s) { Q(e, t, s), n = !0 }, p(t, s) { const a = {}; s & 1 && (a.appointment = t[21]), e.$set(a) }, i(t) { n || (I(e.$$.fragment, t), n = !0) }, o(t) { z(e.$$.fragment, t), n = !1 }, d(t) { V(e, t) } } } function Rt(l) { let e, n, t, s, a, r, i, f, c, m, v, h, C, u, b = parseInt(we().format("W")) + l[2] + "", S, P, H, B, j, O, G, T, A, U, N, J, ae, fe, re, ue, oe, ne, pe, q = l[4] && Ve(l); function _e(_, M) { return _[1] ? Et : Ot } let ie = _e(l), E = ie(l); N = new wt({}), ae = new kt({}); let K = l[0], D = []; for (let _ = 0; _ < K.length; _ += 1)D[_] = xe(Qe(l, K, _)); const ye = _ => z(D[_], 1, 1, () => { D[_] = null }); return { c() { e = p("div"), n = p("h3"), t = p("button"), t.textContent = "arrow_back_ios_new", s = $(), a = p("button"), a.textContent = "date_range", r = $(), i = p("button"), i.textContent = "arrow_forward_ios", f = $(), c = p("button"), c.textContent = "list", m = $(), v = p("div"), h = $(), C = p("span"), u = y("Week "), S = y(b), P = $(), H = p("div"), B = $(), q && q.c(), j = $(), O = p("div"), G = $(), T = p("h3"), E.c(), A = $(), U = p("div"), X(N.$$.fragment), J = $(), X(ae.$$.fragment), fe = $(), re = p("div"), ue = $(); for (let _ = 0; _ < D.length; _ += 1)D[_].c(); d(t, "class", "material-icons svelte-zfs850"), d(a, "class", "material-icons svelte-zfs850"), d(i, "class", "material-icons svelte-zfs850"), d(c, "class", "material-icons svelte-zfs850"), d(v, "class", "sep svelte-zfs850"), d(C, "class", "week svelte-zfs850"), d(H, "class", "sep svelte-zfs850"), d(O, "class", "sep svelte-zfs850"), d(n, "class", "svelte-zfs850"), d(T, "class", "svelte-zfs850"), d(e, "class", "header svelte-zfs850"), d(re, "class", "timeline svelte-zfs850"), Z(re, "left", (l[7] - 442) * 2 + "px"), d(U, "class", "grid svelte-zfs850") }, m(_, M) { w(_, e, M), o(e, n), o(n, t), o(n, s), o(n, a), o(n, r), o(n, i), o(n, f), o(n, c), o(n, m), o(n, v), o(n, h), o(n, C), o(C, u), o(C, S), o(n, P), o(n, H), o(n, B), q && q.m(n, null), o(n, j), o(n, O), o(e, G), o(e, T), E.m(T, null), w(_, A, M), w(_, U, M), Q(N, U, null), o(U, J), Q(ae, U, null), o(U, fe), o(U, re), o(U, ue); for (let g = 0; g < D.length; g += 1)D[g].m(U, null); oe = !0, ne || (pe = [F(t, "click", l[10]), F(a, "click", l[12]), F(i, "click", l[11]), F(c, "click", l[14])], ne = !0) }, p(_, [M]) { if ((!oe || M & 4) && b !== (b = parseInt(we().format("W")) + _[2] + "") && L(S, b), _[4] ? q ? (q.p(_, M), M & 16 && I(q, 1)) : (q = Ve(_), q.c(), I(q, 1), q.m(n, j)) : q && (Se(), z(q, 1, 1, () => { q = null }), Me()), ie === (ie = _e(_)) && E ? E.p(_, M) : (E.d(1), E = ie(_), E && (E.c(), E.m(T, null))), (!oe || M & 128) && Z(re, "left", (_[7] - 442) * 2 + "px"), M & 1) { K = _[0]; let g; for (g = 0; g < K.length; g += 1) { const W = Qe(_, K, g); D[g] ? (D[g].p(W, M), I(D[g], 1)) : (D[g] = xe(W), D[g].c(), I(D[g], 1), D[g].m(U, null)) } for (Se(), g = K.length; g < D.length; g += 1)ye(g); Me() } }, i(_) { if (!oe) { I(q), I(N.$$.fragment, _), I(ae.$$.fragment, _); for (let M = 0; M < K.length; M += 1)I(D[M]); oe = !0 } }, o(_) { z(q), z(N.$$.fragment, _), z(ae.$$.fragment, _), D = D.filter(Boolean); for (let M = 0; M < D.length; M += 1)z(D[M]); oe = !1 }, d(_) { _ && k(e), q && q.d(), E.d(), _ && k(A), _ && k(U), V(N), V(ae), be(D, _), ne = !1, We(pe) } } } function Ft(l, e, n) { R.extend(Ye), R.extend(He), R.extend(Ae); let t = [], s = [], a = { id: "" }, r = !1, i = 0, f, c = [], m = [], v = !1, h, C, u = []; Ne(async () => { c = await $e(de, ce, `departmentsofbranches?fields=${Xe("departmentsofbranches")}&schoolInSchoolYear=${Be}`, !0), c.response.data.forEach(async T => { const A = (await $e(de, ce, `groupindepartments?fields=${Xe("groupindepartments")}&isMentorOrMainGroup=true&departmentOfBranch=${T.id}`, !0)).response.data; m.push(...Ce(A, "name")) }), setTimeout(() => { n(6, u = []), Ce(m, "name").forEach(T => { u.push({ value: T.id, label: T.name }) }), n(4, v = !0) }, 1e3) }); function b(T) { const A = T.detail; n(3, f = "Schedule for " + T.detail.label), S(A.value) } async function S(T) { let A; n(0, s = []), A = await Dn(T, i + 1), t = Ce(A.response.data, "start"), n(0, s = []), a = { id: T }; for (let U = 0; U < t.length; U++) { const N = t[U], J = new Date(N.start * 1e3).getDay() - new Date(ge(me.prev)).getDay() + 2; s.push({ rowNr: J, startMin: new Date(N.start * 1e3).getHours() * 60 + new Date(N.start * 1e3).getMinutes(), endMin: new Date(N.end * 1e3).getHours() * 60 + new Date(N.end * 1e3).getMinutes(), slotName: N.startTimeSlotName, locations: N.locations, teachers: N.teachers, subjects: N.subjects, cancelled: N.cancelled, changeWarning: N.changeDescription, teacherChanged: N.teacherChanged, locationChanged: N.locationChanged, timeChanged: N.timeChanged, start: { h: new Date(N.start * 1e3).getHours(), m: new Date(N.start * 1e3).getMinutes() }, end: { h: new Date(N.end * 1e3).getHours(), m: new Date(N.end * 1e3).getMinutes() }, classes: N.groups, startTimeStamp: N.start, endTimeStamp: N.end }) } n(1, r = !1) } function P() { i + parseInt(we().format("W")) > 1 && (n(2, i -= 1), S(a.id)) } function H() { i + parseInt(we().format("W")) < 52 && (n(2, i += 1), S(a.id)) } function B() { i != 0 && (n(2, i = 0), S(a.id)) } let j = 0; setInterval(() => { n(7, j = 60 * parseInt(R().format("HH")) + parseInt(R().format("m"))) }, 300); const O = () => { ve("EveryonePage") }; function G(T) { Te[T ? "unshift" : "push"](() => { h = T, n(5, h) }) } return [s, r, i, f, v, h, u, j, C, b, P, H, B, S, O, G] } class Gt extends x { constructor(e) { super(); ee(this, e, Ft, Rt, te, { openSched: 13 }) } get openSched() { return this.$$.ctx[13] } } function et(l) { let e, n; return e = new Gt({}), { c() { X(e.$$.fragment) }, m(t, s) { Q(e, t, s), n = !0 }, i(t) { n || (I(e.$$.fragment, t), n = !0) }, o(t) { z(e.$$.fragment, t), n = !1 }, d(t) { V(e, t) } } } function Zt(l) { let e, n, t = l[0] && et(); return { c() { t && t.c(), e = ke() }, m(s, a) { t && t.m(s, a), w(s, e, a), n = !0 }, p(s, [a]) { s[0] ? t ? a & 1 && I(t, 1) : (t = et(), t.c(), I(t, 1), t.m(e.parentNode, e)) : t && (Se(), z(t, 1, 1, () => { t = null }), Me()) }, i(s) { n || (I(t), n = !0) }, o(s) { z(t), n = !1 }, d(s) { t && t.d(s), s && k(e) } } } function Kt(l, e, n) { let t; return se.subscribe(s => n(0, t = s)), [t] } class Jt extends x { constructor(e) { super(); ee(this, e, Kt, Zt, te, {}) } } function qe(l, e) { Oe.set({ type: l, id: e }), ve("SchedulePeople") } function tt(l, e, n) { const t = l.slice(); return t[2] = e[n], t } function nt(l) { let e, n = l[2].firstName + "", t, s, a = (l[2].prefix || "") + "", r, i, f = l[2].lastName + "", c, m, v, h = l[2].code.toUpperCase() + "", C, u, b, S; function P() { return l[1](l[2]) } return { c() { e = p("button"), t = y(n), s = $(), r = y(a), i = $(), c = y(f), m = $(), v = p("span"), C = y(h), u = $(), d(v, "class", "right svelte-1x3rp31"), d(e, "class", "svelte-1x3rp31") }, m(H, B) { w(H, e, B), o(e, t), o(e, s), o(e, r), o(e, i), o(e, c), o(e, m), o(e, v), o(v, C), o(e, u), b || (S = F(e, "click", P), b = !0) }, p(H, B) { l = H, B & 1 && n !== (n = l[2].firstName + "") && L(t, n), B & 1 && a !== (a = (l[2].prefix || "") + "") && L(r, a), B & 1 && f !== (f = l[2].lastName + "") && L(c, f), B & 1 && h !== (h = l[2].code.toUpperCase() + "") && L(C, h) }, d(H) { H && k(e), b = !1, S() } } } function Xt(l) { let e, n, t, s, a, r = l[0].length + "", i, f, c, m = l[0], v = []; for (let h = 0; h < m.length; h += 1)v[h] = nt(tt(l, m, h)); return { c() { e = p("div"), n = p("h3"), t = p("span"), t.textContent = "Students", s = $(), a = p("span"), i = y(r), f = y("\xA0\xA0"), c = $(); for (let h = 0; h < v.length; h += 1)v[h].c(); d(t, "class", "svelte-1x3rp31"), d(a, "class", "right svelte-1x3rp31"), d(n, "class", "svelte-1x3rp31"), d(e, "class", "svelte-1x3rp31") }, m(h, C) { w(h, e, C), o(e, n), o(n, t), o(n, s), o(n, a), o(a, i), o(a, f), o(e, c); for (let u = 0; u < v.length; u += 1)v[u].m(e, null) }, p(h, [C]) { if (C & 1 && r !== (r = h[0].length + "") && L(i, r), C & 1) { m = h[0]; let u; for (u = 0; u < m.length; u += 1) { const b = tt(h, m, u); v[u] ? v[u].p(b, C) : (v[u] = nt(b), v[u].c(), v[u].m(e, null)) } for (; u < v.length; u += 1)v[u].d(1); v.length = m.length } }, i: Y, o: Y, d(h) { h && k(e), be(v, h) } } } function Qt(l, e, n) { let t = []; return se.subscribe(async a => { if (a == !0) { n(0, t = (await Ee()).response.data), t.length > 0 && n(0, t = Ce(t, "firstName")), t.length > 0 && n(0, t = Ce(t, "lastName")); for (let r = 0; r < t.length; r++)n(0, t[r].class = await yt(t[r].code), t) } }), [t, a => { qe("student", a.code) }] } class Vt extends x { constructor(e) { super(); ee(this, e, Qt, Xt, te, {}) } } function lt(l, e, n) { const t = l.slice(); return t[7] = e[n], t } function st(l) { let e, n = (l[7].prefix || "") + "", t, s, a = l[7].lastName + "", r, i, f, c = l[7].code.toUpperCase() + "", m, v, h, C; function u() { return l[1](l[7]) } return { c() { e = p("button"), t = y(n), s = $(), r = y(a), i = $(), f = p("span"), m = y(c), v = $(), d(f, "class", "right svelte-1jwpn1u"), d(e, "class", "svelte-1jwpn1u") }, m(b, S) { w(b, e, S), o(e, t), o(e, s), o(e, r), o(e, i), o(e, f), o(f, m), o(e, v), h || (C = F(e, "click", u), h = !0) }, p(b, S) { l = b, S & 1 && n !== (n = (l[7].prefix || "") + "") && L(t, n), S & 1 && a !== (a = l[7].lastName + "") && L(r, a), S & 1 && c !== (c = l[7].code.toUpperCase() + "") && L(m, c) }, d(b) { b && k(e), h = !1, C() } } } function xt(l) { let e, n, t, s, a, r = l[0].length + "", i, f, c, m = l[0], v = []; for (let h = 0; h < m.length; h += 1)v[h] = st(lt(l, m, h)); return { c() { e = p("div"), n = p("h3"), t = p("span"), t.textContent = "Teachers", s = $(), a = p("span"), i = y(r), f = y("\xA0\xA0"), c = $(); for (let h = 0; h < v.length; h += 1)v[h].c(); d(t, "class", "svelte-1jwpn1u"), d(a, "class", "right svelte-1jwpn1u"), d(n, "class", "svelte-1jwpn1u"), d(e, "class", "svelte-1jwpn1u") }, m(h, C) { w(h, e, C), o(e, n), o(n, t), o(n, s), o(n, a), o(a, i), o(a, f), o(e, c); for (let u = 0; u < v.length; u += 1)v[u].m(e, null) }, p(h, [C]) { if (C & 1 && r !== (r = h[0].length + "") && L(i, r), C & 1) { m = h[0]; let u; for (u = 0; u < m.length; u += 1) { const b = lt(h, m, u); v[u] ? v[u].p(b, C) : (v[u] = st(b), v[u].c(), v[u].m(e, null)) } for (; u < v.length; u += 1)v[u].d(1); v.length = m.length } }, i: Y, o: Y, d(h) { h && k(e), be(v, h) } } } function en(l, e, n) { let t = [], s = []; return se.subscribe(async r => { if (r == !0) { t = (await Ee()).response.data, n(0, s = (await Fe()).response.data), t.length > 0 && (t = Ce(t, "firstName")), s.length > 0 && n(0, s = Ce(s, "lastName")); for (let i = 0; i < t.length; i++)t[i].class = await yt(t[i].code) } }), [s, r => { qe("teacher", r.code) }] } class tn extends x { constructor(e) { super(); ee(this, e, en, xt, te, {}) } } function nn(l) { let e, n, t, s; return e = new tn({}), t = new Vt({}), { c() { X(e.$$.fragment), n = $(), X(t.$$.fragment) }, m(a, r) { Q(e, a, r), w(a, n, r), Q(t, a, r), s = !0 }, p: Y, i(a) { s || (I(e.$$.fragment, a), I(t.$$.fragment, a), s = !0) }, o(a) { z(e.$$.fragment, a), z(t.$$.fragment, a), s = !1 }, d(a) { V(e, a), a && k(n), V(t, a) } } } class ln extends x { constructor(e) { super(); ee(this, e, null, nn, te, {}) } } function sn(l) { let e; return { c() { e = p("h1"), e.textContent = "Home!" }, m(n, t) { w(n, e, t) }, p: Y, i: Y, o: Y, d(n) { n && k(e) } } } class an extends x { constructor(e) { super(); ee(this, e, null, sn, te, {}) } } function at(l, e, n) { const t = l.slice(); return t[10] = e[n], t } function rt(l) { let e, n, t, s = l[3], a = []; for (let r = 0; r < s.length; r += 1)a[r] = it(at(l, s, r)); return { c() { e = p("div"); for (let r = 0; r < a.length; r += 1)a[r].c(); d(e, "class", "searchResults svelte-1ve9yp3"), Z(e, "top", l[2] + "px"), Z(e, "left", l[1] + "px") }, m(r, i) { w(r, e, i); for (let f = 0; f < a.length; f += 1)a[f].m(e, null); n || (t = F(e, "click", l[9]), n = !0) }, p(r, i) { if (i & 9) { s = r[3]; let f; for (f = 0; f < s.length; f += 1) { const c = at(r, s, f); a[f] ? a[f].p(c, i) : (a[f] = it(c), a[f].c(), a[f].m(e, null)) } for (; f < a.length; f += 1)a[f].d(1); a.length = s.length } i & 4 && Z(e, "top", r[2] + "px"), i & 2 && Z(e, "left", r[1] + "px") }, d(r) { r && k(e), be(a, r), n = !1, t() } } } function ot(l) { let e, n = l[10].item.code.toUpperCase() + "", t, s; return { c() { e = y("("), t = y(n), s = y(")") }, m(a, r) { w(a, e, r), w(a, t, r), w(a, s, r) }, p(a, r) { r & 8 && n !== (n = a[10].item.code.toUpperCase() + "") && L(t, n) }, d(a) { a && k(e), a && k(t), a && k(s) } } } function it(l) { let e, n = (l[10].item.firstName || "") + "", t, s, a = (l[10].item.prefix || "") + "", r, i, f = (l[10].item.lastName || "") + "", c, m, v, h, C, u = l[10].item.isEmployee && ot(l); function b() { return l[8](l[10]) } return { c() { e = p("button"), t = y(n), s = $(), r = y(a), i = $(), c = y(f), m = $(), u && u.c(), v = $(), d(e, "class", "svelte-1ve9yp3") }, m(S, P) { w(S, e, P), o(e, t), o(e, s), o(e, r), o(e, i), o(e, c), o(e, m), u && u.m(e, null), o(e, v), h || (C = F(e, "click", b), h = !0) }, p(S, P) { l = S, P & 8 && n !== (n = (l[10].item.firstName || "") + "") && L(t, n), P & 8 && a !== (a = (l[10].item.prefix || "") + "") && L(r, a), P & 8 && f !== (f = (l[10].item.lastName || "") + "") && L(c, f), l[10].item.isEmployee ? u ? u.p(l, P) : (u = ot(l), u.c(), u.m(e, v)) : u && (u.d(1), u = null) }, d(S) { S && k(e), u && u.d(), h = !1, C() } } } function rn(l) { let e, n, t, s, a, r, i, f = !l[5] && l[4] && rt(l); return { c() { e = p("input"), n = $(), t = p("button"), t.textContent = "search", s = $(), f && f.c(), a = ke(), d(e, "placeholder", "Search people..."), d(e, "class", "svelte-1ve9yp3"), d(t, "class", "material-icons svelte-1ve9yp3") }, m(c, m) { w(c, e, m), l[7](e), w(c, n, m), w(c, t, m), w(c, s, m), f && f.m(c, m), w(c, a, m), r || (i = [F(e, "focus", l[6]), F(e, "blur", l[6]), F(e, "input", l[6])], r = !0) }, p(c, [m]) { !c[5] && c[4] ? f ? f.p(c, m) : (f = rt(c), f.c(), f.m(a.parentNode, a)) : f && (f.d(1), f = null) }, i: Y, o: Y, d(c) { c && k(e), l[7](null), c && k(n), c && k(t), c && k(s), f && f.d(c), c && k(a), r = !1, We(i) } } } function on(l, e, n) { let t, s, a, r = [], i = "", f = !1; Ne(() => { n(1, s = t.offsetLeft - 5), n(2, a = t.offsetTop + 30) }); async function c() { n(4, i = t.value), n(3, r = await yn(t.value)), n(5, f = document.activeElement != t) } function m(C) { Te[C ? "unshift" : "push"](() => { t = C, n(0, t) }) } return [t, s, a, r, i, f, c, m, C => { n(0, t.value = "", t), qe(C.item.isEmployee ? "teacher" : "student", C.item.code) }, () => t.focus()] } class cn extends x { constructor(e) { super(); ee(this, e, on, rn, te, {}) } } function ct(l, e, n) { const t = l.slice(); return t[12] = e[n], t } function fn(l) { let e; return { c() { e = y("Loading...") }, m(n, t) { w(n, e, t) }, p: Y, d(n) { n && k(e) } } } function un(l) { let e; function n(a, r) { return a[1].id ? dn : pn } let t = n(l), s = t(l); return { c() { s.c(), e = ke() }, m(a, r) { s.m(a, r), w(a, e, r) }, p(a, r) { t === (t = n(a)) && s ? s.p(a, r) : (s.d(1), s = t(a), s && (s.c(), s.m(e.parentNode, e))) }, d(a) { s.d(a), a && k(e) } } } function pn(l) { let e; return { c() { e = y("No schedule selected.") }, m(n, t) { w(n, e, t) }, p: Y, d(n) { n && k(e) } } } function dn(l) { let e = (l[4] || "Loading...") + "", n; return { c() { n = y(e) }, m(t, s) { w(t, n, s) }, p(t, s) { s & 16 && e !== (e = (t[4] || "Loading...") + "") && L(n, e) }, d(t) { t && k(n) } } } function ft(l) { let e, n; return e = new Ct({ props: { appointment: l[12] } }), { c() { X(e.$$.fragment) }, m(t, s) { Q(e, t, s), n = !0 }, p(t, s) { const a = {}; s & 1 && (a.appointment = t[12]), e.$set(a) }, i(t) { n || (I(e.$$.fragment, t), n = !0) }, o(t) { z(e.$$.fragment, t), n = !1 }, d(t) { V(e, t) } } } function mn(l) { let e, n, t, s, a, r, i, f, c, m, v, h, C, u, b = parseInt(we().format("W")) + l[3] + "", S, P, H, B, j, O, G, T, A, U, N, J, ae, fe, re, ue, oe, ne, pe, q; j = new cn({}); function _e(_, M) { return _[2] ? fn : un } let ie = _e(l), E = ie(l); J = new wt({}), fe = new kt({}); let K = l[0], D = []; for (let _ = 0; _ < K.length; _ += 1)D[_] = ft(ct(l, K, _)); const ye = _ => z(D[_], 1, 1, () => { D[_] = null }); return { c() { e = p("div"), n = p("h3"), t = p("button"), t.textContent = "arrow_back_ios_new", s = $(), a = p("button"), a.textContent = "date_range", r = $(), i = p("button"), i.textContent = "arrow_forward_ios", f = $(), c = p("button"), c.textContent = "list", m = $(), v = p("div"), h = $(), C = p("span"), u = y("Week "), S = y(b), P = $(), H = p("div"), B = $(), X(j.$$.fragment), O = $(), G = p("div"), T = $(), A = p("h3"), E.c(), U = $(), N = p("div"), X(J.$$.fragment), ae = $(), X(fe.$$.fragment), re = $(), ue = p("div"), oe = $(); for (let _ = 0; _ < D.length; _ += 1)D[_].c(); d(t, "class", "material-icons"), d(a, "class", "material-icons"), d(i, "class", "material-icons"), d(c, "class", "material-icons"), d(v, "class", "sep"), d(C, "class", "week"), d(H, "class", "sep"), d(G, "class", "sep"), d(e, "class", "header"), d(ue, "class", "timeline"), Z(ue, "left", (l[5] - 442) * 2 + "px"), d(N, "class", "grid") }, m(_, M) { w(_, e, M), o(e, n), o(n, t), o(n, s), o(n, a), o(n, r), o(n, i), o(n, f), o(n, c), o(n, m), o(n, v), o(n, h), o(n, C), o(C, u), o(C, S), o(n, P), o(n, H), o(n, B), Q(j, n, null), o(n, O), o(n, G), o(e, T), o(e, A), E.m(A, null), w(_, U, M), w(_, N, M), Q(J, N, null), o(N, ae), Q(fe, N, null), o(N, re), o(N, ue), o(N, oe); for (let g = 0; g < D.length; g += 1)D[g].m(N, null); ne = !0, pe || (q = [F(t, "click", l[6]), F(a, "click", l[8]), F(i, "click", l[7]), F(c, "click", l[10])], pe = !0) }, p(_, [M]) { if ((!ne || M & 8) && b !== (b = parseInt(we().format("W")) + _[3] + "") && L(S, b), ie === (ie = _e(_)) && E ? E.p(_, M) : (E.d(1), E = ie(_), E && (E.c(), E.m(A, null))), (!ne || M & 32) && Z(ue, "left", (_[5] - 442) * 2 + "px"), M & 1) { K = _[0]; let g; for (g = 0; g < K.length; g += 1) { const W = ct(_, K, g); D[g] ? (D[g].p(W, M), I(D[g], 1)) : (D[g] = ft(W), D[g].c(), I(D[g], 1), D[g].m(N, null)) } for (Se(), g = K.length; g < D.length; g += 1)ye(g); Me() } }, i(_) { if (!ne) { I(j.$$.fragment, _), I(J.$$.fragment, _), I(fe.$$.fragment, _); for (let M = 0; M < K.length; M += 1)I(D[M]); ne = !0 } }, o(_) { z(j.$$.fragment, _), z(J.$$.fragment, _), z(fe.$$.fragment, _), D = D.filter(Boolean); for (let M = 0; M < D.length; M += 1)z(D[M]); ne = !1 }, d(_) { _ && k(e), V(j), E.d(), _ && k(U), _ && k(N), V(J), V(fe), be(D, _), pe = !1, We(q) } } } function hn(l, e, n) { R.extend(Ye), R.extend(He), R.extend(Ae); let t = [], s = [], a = { id: "" }, r = !1, i = 0, f; Oe.subscribe(async b => { if (b) if (n(2, r = !0), n(1, a = b), c(b.type, b.id), b.type == "teacher") { const S = await Mn(b.id); n(4, f = `${S.prefix || ""} ${S.lastName || ""} (${S.code.toUpperCase()})`), n(2, r = !1) } else { const S = await Sn(b.id); n(4, f = `${S.firstName || ""} ${S.prefix || ""} ${S.lastName || ""} (${S.code.toUpperCase()})`), n(2, r = !1) } }), Ne(() => { const b = new URLSearchParams(location.search), S = b.get("person_id"), P = b.get("person_type"); n(2, r = !1), console.error(S, P, b.getAll("person")), S && P && (Oe.set({ type: P, id: S }), c(P, S, !0)) }); async function c(b, S, P = !0) { let H; n(0, s = []), b == "student" ? H = await kn(S, i + 1) : H = await wn(S, i + 1), P && $t(`./?m=${he.get("m")}&person_id=${S}&person_type=${b}`), he.set("person_id", S), he.set("person_type", b), console.log(H.response), t = Ce(H.response.data, "start"), n(0, s = []); for (let B = 0; B < t.length; B++) { const j = t[B], O = new Date(j.start * 1e3).getDay() - new Date(ge(me.prev)).getDay() + 2; s.push({ rowNr: O, startMin: new Date(j.start * 1e3).getHours() * 60 + new Date(j.start * 1e3).getMinutes(), endMin: new Date(j.end * 1e3).getHours() * 60 + new Date(j.end * 1e3).getMinutes(), slotName: j.startTimeSlotName, locations: j.locations, teachers: j.teachers, subjects: j.subjects, cancelled: j.cancelled, changeWarning: j.changeDescription, teacherChanged: j.teacherChanged, locationChanged: j.locationChanged, timeChanged: j.timeChanged, start: { h: new Date(j.start * 1e3).getHours(), m: new Date(j.start * 1e3).getMinutes() }, end: { h: new Date(j.end * 1e3).getHours(), m: new Date(j.end * 1e3).getMinutes() }, classes: j.groups, startTimeStamp: j.start, endTimeStamp: j.end }) } n(2, r = !1) } function m() { i + parseInt(we().format("W")) > 1 && (n(3, i -= 1), c(a.type, a.id)) } function v() { i + parseInt(we().format("W")) < 52 && (n(3, i += 1), c(a.type, a.id)) } function h() { i != 0 && (n(3, i = 0), c(a.type, a.id)) } let C = 0; return setInterval(() => { n(5, C = 60 * parseInt(R().format("HH")) + parseInt(R().format("m"))) }, 300), [s, a, r, i, f, C, m, v, h, c, () => { ve("ListEveryone") }] } class _n extends x { constructor(e) { super(); ee(this, e, hn, mn, te, { openSched: 9 }) } get openSched() { return this.$$.ctx[9] } } function gn(l) { let e, n, t, s, a; return n = new _n({}), { c() { e = p("div"), X(n.$$.fragment), d(e, "class", "svelte-za3vn1") }, m(r, i) { w(r, e, i), Q(n, e, null), t = !0, s || (a = F(e, "mousedown", l[0]), s = !0) }, p: Y, i(r) { t || (I(n.$$.fragment, r), t = !0) }, o(r) { z(n.$$.fragment, r), t = !1 }, d(r) { r && k(e), V(n), s = !1, a() } } } function vn(l) { function e(n) { const t = n.composedPath(); let s = !0; for (let a = 0; a < t.length; a++) { const r = t[a]; if (r.classList && r.classList.contains("sidebar")) { s = !1; break } } s && It.set(!1) } return [e] } class $n extends x { constructor(e) { super(); ee(this, e, vn, gn, te, {}) } } function ve(l) { if (ze.has(l)) { Re.set(ze.get(l)), he.set("m", l); const e = he.get("person_id") ? `&person_id=${he.get("person_id")}` : "", n = he.get("person_type") ? `&person_type=${he.get("person_type")}` : ""; he.set("person_id", ""), he.set("class_id", ""), $t(`./?m=${l}${e}${n}`), Le.set(!1) } return !1 } const ze = new Map([["HomePage", { name: "Home", icon: "home", content: an, sidebar: !0 }], ["SchedulePeople", { name: "People", icon: "people", content: $n, sidebar: !0 }], ["ScheduleClasses", { name: "Classes", icon: "event", content: Jt, sidebar: !0 }], ["ListEveryone", { name: "List", icon: "list", content: ln, sidebar: !0 }], ["Login", { name: "Login", icon: "", content: Pt, sidebar: !1 }]]); R.extend(Ye); R.extend(He); R.extend(Ae); async function $e(l, e, n, t = !0, s) { if (je(se) || s) { const a = { headers: { Authorization: `Bearer ${l}` }, method: "GET" }, r = await await fetch(`https://${e}.zportal.nl/api/v3/${n}`, s ? {} : a); return t ? r.json() : r.text() } return t ? {} : "{}" } async function bn(l, e) { const n = { method: "POST" }; return await (await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${l}`, n)).json() } let se = De(!1), de, ce; async function Pe(l, e) { if (localStorage.getItem("accessToken")) { de = localStorage.getItem("accessToken"), ce = localStorage.getItem("school"); const n = await (await fetch(`https://${ce}.zportal.nl/api/v3/users/~me`, { headers: { Authorization: `Bearer ${de}` } })).json(); return se.set(n.response.status == 200), se ? (console.log("Zermelo login succeeded from stored access token"), Ie.set(n.response.data)) : console.log("Zermelo login failed from stored access token: server returned " + n.response.status), je(se) } if (!l || !e) return console.log("Zermelo login failed!"), console.error(l, e), !1; try { const n = await bn(e, l); n.access_token && (localStorage.setItem("accessToken", n.access_token), localStorage.setItem("school", l), se.set(!0), Ie.set((await (await fetch(`https://${ce}.zportal.nl/api/v3/users/~me`, { headers: { Authorization: `Bearer ${de}` } })).json()).response.data)), je(se) && console.log("Zermelo login succeeded from provided data") } catch { se.set(!1) } return je(se) } function Cn() { localStorage.removeItem("school"), localStorage.removeItem("accessToken"), se.set(!1), ve("Login") } async function Ee() { return await $e(de, ce, `${jt}${Be}`) } async function Fe() { return await $e(de, ce, `${Tt}${Be}`) } async function wn(l, e = 0) { const n = ge(me.prev) + 601200 * e, t = ge(me.next) + 601200 * e; return await $e(de, ce, `appointments?start=${n}&end=${t}&teachers=${l}&fields=${Ue.get("teacherSchedule")}`, !0) } async function kn(l, e = 0) { const n = ge(me.prev) + 601200 * e, t = ge(me.next) + 601200 * e; return await $e(de, ce, `appointments?user=${l}&start=${n}&end=${t}&fields=${Ue.get("studentSchedule")}`, !0) } async function yt(l) { const e = ge(me.prev), n = ge(me.next), t = await $e(de, ce, `appointments?valid=true&start=${e}&end=${n}&fields=${Ue.get("getStudentClassAppointments")}&possibleStudents=${l}`, !0); let s; const a = t.response.data; for (let r = 0; r < a.length; r++)if (a[r].groupsInDepartments.length > 0 && a[r].subjects.length > 0) { if (a[r].subjects[0] == "mtr") { s = a[r].groupsInDepartments[0]; break } continue } return (await $e(de, ce, `groupindepartments?id=${s}&fields=name`, !0)).response.data[0].name.replace("jv", "").replace("jb", "").toUpperCase() } function ge(l) { let e; return l == me.prev ? e = R().weekday(-7).unix() : e = R().weekday(0).unix(), e } async function yn(l) { const e = Array.prototype.concat((await Fe()).response.data, (await Ee()).response.data), n = { includeScore: !0, keys: ["firstName", "lastName", "code"] }; return new Mt(e, n).search(l) } async function Sn(l) { const e = (await Ee()).response.data; for (let n = 0; n < e.length; n++)if (e[n].code == l) return e[n]; return {} } async function Mn(l) { const e = (await Fe()).response.data; for (let n = 0; n < e.length; n++)if (e[n].code == l) return e[n]; return {} } function Ce(l, e) { return l.sort(function (n, t) { var s = n[e], a = t[e]; return s < a ? -1 : s > a ? 1 : 0 }) } async function Dn(l, e) { const n = ge(me.prev) + 601200 * e, t = ge(me.next) + 601200 * e; return await $e(de, ce, `appointments?valid=true&start=${n}&end=${t}&fields=${Ue.get("classSchedule")}&schoolInSchoolYear=${Be}&containsStudentsFromGroupInDepartment=${l}`) } var me = (l => (l[l.prev = 0] = "prev", l[l.next = 1] = "next", l))(me || {}); function ut(l, e, n) { const t = l.slice(); return t[1] = e[n], t } function pt(l) { let e, n = l[1].icon + "", t, s, a, r, i; return { c() { e = p("button"), t = y(n), s = $(), d(e, "class", "material-icons svelte-10ub0dz"), d(e, "title", a = l[1].caption) }, m(f, c) { w(f, e, c), o(e, t), o(e, s), r || (i = F(e, "click", l[1].action), r = !0) }, p(f, c) { l = f }, d(f) { f && k(e), r = !1, i() } } } function Nn(l) { let e, n = l[0], t = []; for (let s = 0; s < n.length; s += 1)t[s] = pt(ut(l, n, s)); return { c() { for (let s = 0; s < t.length; s += 1)t[s].c(); e = ke() }, m(s, a) { for (let r = 0; r < t.length; r += 1)t[r].m(s, a); w(s, e, a) }, p(s, [a]) { if (a & 1) { n = s[0]; let r; for (r = 0; r < n.length; r += 1) { const i = ut(s, n, r); t[r] ? t[r].p(i, a) : (t[r] = pt(i), t[r].c(), t[r].m(e.parentNode, e)) } for (; r < t.length; r += 1)t[r].d(1); t.length = n.length } }, i: Y, o: Y, d(s) { be(t, s), s && k(e) } } } function jn(l) { return [[{ icon: "logout", action: () => { Cn() }, caption: "Logout" }, { icon: "calendar_today", action: () => { qe("student", je(Ie)[0].code) }, caption: "Show own calendar" }]] } class Tn extends x { constructor(e) { super(); ee(this, e, jn, Nn, te, {}) } } function In(l) { let e, n, t, s, a, r, i, f, c, m = l[0].firstName + "", v, h, C = (l[0].prefix || "") + "", u, b, S = l[0].lastName + "", P, H, B, j, O, G; return a = new Tn({}), { c() { e = p("div"), n = p("div"), n.textContent = `Zermelo Hub | ${ce}`, t = $(), s = p("div"), X(a.$$.fragment), r = $(), i = p("div"), f = $(), c = p("p"), v = y(m), h = $(), u = y(C), b = $(), P = y(S), H = $(), B = p("span"), B.textContent = "account_circle", j = $(), O = p("div"), d(n, "class", "header svelte-1l29745"), d(i, "class", "sep svelte-1l29745"), d(c, "class", "svelte-1l29745"), d(B, "class", "material-icons svelte-1l29745"), d(s, "class", "right svelte-1l29745"), d(e, "class", "tb svelte-1l29745"), d(O, "class", "accent svelte-1l29745") }, m(T, A) { w(T, e, A), o(e, n), o(e, t), o(e, s), Q(a, s, null), o(s, r), o(s, i), o(s, f), o(s, c), o(c, v), o(c, h), o(c, u), o(c, b), o(c, P), o(s, H), o(s, B), w(T, j, A), w(T, O, A), G = !0 }, p(T, [A]) { (!G || A & 1) && m !== (m = T[0].firstName + "") && L(v, m), (!G || A & 1) && C !== (C = (T[0].prefix || "") + "") && L(u, C), (!G || A & 1) && S !== (S = T[0].lastName + "") && L(P, S) }, i(T) { G || (I(a.$$.fragment, T), G = !0) }, o(T) { z(a.$$.fragment, T), G = !1 }, d(T) { T && k(e), V(a), T && k(j), T && k(O) } } } function Ln(l, e, n) { let t; return Ie.subscribe(s => { n(0, t = s[0]) }), [t] } class zn extends x { constructor(e) { super(); ee(this, e, Ln, In, te, {}) } } function dt(l, e, n) { const t = l.slice(); return t[2] = e[n][0], t[3] = e[n][1], t } function Pn(l) { let e, n, t = l[3].icon + "", s, a, r, i = l[3].name + "", f, c, m, v; function h() { return l[1](l[2]) } return { c() { e = p("button"), n = p("span"), s = y(t), a = $(), r = p("p"), f = y(i), c = $(), d(n, "class", "material-icons svelte-1qx5v5t"), d(r, "class", "svelte-1qx5v5t"), d(e, "class", "svelte-1qx5v5t"), le(e, "selected", l[0] && l[0].name == l[3].name) }, m(C, u) { w(C, e, u), o(e, n), o(n, s), o(e, a), o(e, r), o(r, f), o(e, c), m || (v = F(e, "click", h), m = !0) }, p(C, u) { l = C, u & 1 && le(e, "selected", l[0] && l[0].name == l[3].name) }, d(C) { C && k(e), m = !1, v() } } } function mt(l) { let e, n = l[3].sidebar && l[3] && Pn(l); return { c() { n && n.c(), e = ke() }, m(t, s) { n && n.m(t, s), w(t, e, s) }, p(t, s) { t[3].sidebar && t[3] && n.p(t, s) }, d(t) { n && n.d(t), t && k(e) } } } function Wn(l) { let e, n = [...ze], t = []; for (let s = 0; s < n.length; s += 1)t[s] = mt(dt(l, n, s)); return { c() { e = p("div"); for (let s = 0; s < t.length; s += 1)t[s].c(); d(e, "class", "sidebar svelte-1qx5v5t") }, m(s, a) { w(s, e, a); for (let r = 0; r < t.length; r += 1)t[r].m(e, null) }, p(s, [a]) { if (a & 1) { n = [...ze]; let r; for (r = 0; r < n.length; r += 1) { const i = dt(s, n, r); t[r] ? t[r].p(i, a) : (t[r] = mt(i), t[r].c(), t[r].m(e, null)) } for (; r < t.length; r += 1)t[r].d(1); t.length = n.length } }, i: Y, o: Y, d(s) { s && k(e), be(t, s) } } } function Yn(l, e, n) { let t; return Dt(l, Re, a => n(0, t = a)), [t, a => ve(a)] } class Hn extends x { constructor(e) { super(); ee(this, e, Yn, Wn, te, {}) } } function ht(l) { let e, n, t = (l[0].subjects.toString().toUpperCase() || "appointment") + "", s, a, r, i, f, c = (l[0].locations.length ? l[0].locations : "None") + "", m, v, h, C, u, b = l[0].teachers.length > 1 ? "s" : "", S, P, H = l[0].teachers.join(" ").toUpperCase() + "", B, j, O, G, T, A = R(l[0].startTimeStamp * 1e3).format("DD/MM/YYYY, hh:mm A") + "", U, N, J, ae, fe, re = R(l[0].endTimeStamp * 1e3).format("DD/MM/YYYY, hh:mm A") + "", ue, oe, ne, pe, q, _e = l[0].classes.length > 1 ? "s" : "", ie, E, K = (l[0].classes.length ? l[0].classes : "Unknown") + "", D, ye, _, M = l[0].changeWarning && _t(l); return { c() { e = p("h3"), n = y("Information for "), s = y(t), a = $(), r = p("p"), i = p("b"), i.textContent = "Location", f = y(": "), m = y(c), v = $(), h = p("p"), C = p("b"), u = y("Teacher"), S = y(b), P = y(": "), B = y(H), j = $(), O = p("p"), G = p("b"), G.textContent = "Start", T = y(": "), U = y(A), N = $(), J = p("p"), ae = p("b"), ae.textContent = "End", fe = y(": "), ue = y(re), oe = $(), ne = p("p"), pe = p("b"), q = y("Group"), ie = y(_e), E = y(": "), D = y(K), ye = $(), M && M.c(), _ = ke(), d(e, "class", "svelte-t0yfsj"), d(i, "class", "svelte-t0yfsj"), d(r, "class", "svelte-t0yfsj"), d(C, "class", "svelte-t0yfsj"), d(h, "class", "svelte-t0yfsj"), d(G, "class", "svelte-t0yfsj"), d(O, "class", "svelte-t0yfsj"), d(ae, "class", "svelte-t0yfsj"), d(J, "class", "svelte-t0yfsj"), d(pe, "class", "svelte-t0yfsj"), d(ne, "class", "svelte-t0yfsj") }, m(g, W) { w(g, e, W), o(e, n), o(e, s), w(g, a, W), w(g, r, W), o(r, i), o(r, f), o(r, m), w(g, v, W), w(g, h, W), o(h, C), o(C, u), o(C, S), o(h, P), o(h, B), w(g, j, W), w(g, O, W), o(O, G), o(O, T), o(O, U), w(g, N, W), w(g, J, W), o(J, ae), o(J, fe), o(J, ue), w(g, oe, W), w(g, ne, W), o(ne, pe), o(pe, q), o(pe, ie), o(ne, E), o(ne, D), w(g, ye, W), M && M.m(g, W), w(g, _, W) }, p(g, W) { W & 1 && t !== (t = (g[0].subjects.toString().toUpperCase() || "appointment") + "") && L(s, t), W & 1 && c !== (c = (g[0].locations.length ? g[0].locations : "None") + "") && L(m, c), W & 1 && b !== (b = g[0].teachers.length > 1 ? "s" : "") && L(S, b), W & 1 && H !== (H = g[0].teachers.join(" ").toUpperCase() + "") && L(B, H), W & 1 && A !== (A = R(g[0].startTimeStamp * 1e3).format("DD/MM/YYYY, hh:mm A") + "") && L(U, A), W & 1 && re !== (re = R(g[0].endTimeStamp * 1e3).format("DD/MM/YYYY, hh:mm A") + "") && L(ue, re), W & 1 && _e !== (_e = g[0].classes.length > 1 ? "s" : "") && L(ie, _e), W & 1 && K !== (K = (g[0].classes.length ? g[0].classes : "Unknown") + "") && L(D, K), g[0].changeWarning ? M ? M.p(g, W) : (M = _t(g), M.c(), M.m(_.parentNode, _)) : M && (M.d(1), M = null) }, d(g) { g && k(e), g && k(a), g && k(r), g && k(v), g && k(h), g && k(j), g && k(O), g && k(N), g && k(J), g && k(oe), g && k(ne), g && k(ye), M && M.d(g), g && k(_) } } } function _t(l) { let e, n, t, s, a, r, i = l[0].changeWarning + "", f; return { c() { e = p("hr"), n = $(), t = p("p"), s = p("b"), s.textContent = "Warning", a = y(":"), r = p("br"), f = y(i), d(e, "class", "svelte-t0yfsj"), d(s, "class", "svelte-t0yfsj"), d(r, "class", "svelte-t0yfsj"), d(t, "class", "svelte-t0yfsj") }, m(c, m) { w(c, e, m), w(c, n, m), w(c, t, m), o(t, s), o(t, a), o(t, r), o(t, f) }, p(c, m) { m & 1 && i !== (i = c[0].changeWarning + "") && L(f, i) }, d(c) { c && k(e), c && k(n), c && k(t) } } } function An(l) { let e, n, t, s, a, r, i, f = l[0] && ht(l); return { c() { e = p("div"), n = $(), t = p("div"), s = p("button"), s.textContent = "close", a = $(), f && f.c(), d(e, "class", "shade svelte-t0yfsj"), le(e, "hidden", !l[1]), d(s, "class", "material-icons svelte-t0yfsj"), d(t, "class", "dialog svelte-t0yfsj"), le(t, "hidden", !l[1]) }, m(c, m) { w(c, e, m), w(c, n, m), w(c, t, m), o(t, s), o(t, a), f && f.m(t, null), r || (i = [F(e, "click", l[2]), F(s, "click", l[2])], r = !0) }, p(c, [m]) { m & 2 && le(e, "hidden", !c[1]), c[0] ? f ? f.p(c, m) : (f = ht(c), f.c(), f.m(t, null)) : f && (f.d(1), f = null), m & 2 && le(t, "hidden", !c[1]) }, i: Y, o: Y, d(c) { c && k(e), c && k(n), c && k(t), f && f.d(), r = !1, We(i) } } } function Bn(l, e, n) { R.extend(Ye), R.extend(He), R.extend(Ae); let t, s; bt.subscribe(r => n(0, t = r)), Le.subscribe(r => n(1, s = r)); function a() { Le.set(!1) } return [t, s, a] } class Un extends x { constructor(e) { super(); ee(this, e, Bn, An, te, {}) } } function gt(l) { let e, n, t, s; return e = new Hn({}), t = new zn({}), { c() { X(e.$$.fragment), n = $(), X(t.$$.fragment) }, m(a, r) { Q(e, a, r), w(a, n, r), Q(t, a, r), s = !0 }, i(a) { s || (I(e.$$.fragment, a), I(t.$$.fragment, a), s = !0) }, o(a) { z(e.$$.fragment, a), z(t.$$.fragment, a), s = !1 }, d(a) { V(e, a), a && k(n), V(t, a) } } } function vt(l) { let e, n, t, s; var a = l[1].content; function r(i) { return {} } return a && (e = new a(r())), t = new Un({}), { c() { e && X(e.$$.fragment), n = $(), X(t.$$.fragment) }, m(i, f) { e && Q(e, i, f), w(i, n, f), Q(t, i, f), s = !0 }, p(i, f) { if (a !== (a = i[1].content)) { if (e) { Se(); const c = e; z(c.$$.fragment, 1, 0, () => { V(c, 1) }), Me() } a ? (e = new a(r()), X(e.$$.fragment), I(e.$$.fragment, 1), Q(e, n.parentNode, n)) : e = null } }, i(i) { s || (e && I(e.$$.fragment, i), I(t.$$.fragment, i), s = !0) }, o(i) { e && z(e.$$.fragment, i), z(t.$$.fragment, i), s = !1 }, d(i) { e && V(e, i), i && k(n), V(t, i) } } } function qn(l) { let e, n, t, s, a = l[0] && gt(), r = l[1] && vt(l); return { c() { e = p("div"), n = p("div"), a && a.c(), t = $(), r && r.c(), d(n, "class", "content svelte-1efnqlf"), d(e, "class", "bg svelte-1efnqlf") }, m(i, f) { w(i, e, f), o(e, n), a && a.m(n, null), o(n, t), r && r.m(n, null), s = !0 }, p(i, [f]) { i[0] ? a ? f & 1 && I(a, 1) : (a = gt(), a.c(), I(a, 1), a.m(n, t)) : a && (Se(), z(a, 1, 1, () => { a = null }), Me()), i[1] ? r ? (r.p(i, f), f & 2 && I(r, 1)) : (r = vt(i), r.c(), I(r, 1), r.m(n, null)) : r && (Se(), z(r, 1, 1, () => { r = null }), Me()) }, i(i) { s || (I(a), I(r), s = !0) }, o(i) { z(a), z(r), s = !1 }, d(i) { i && k(e), a && a.d(), r && r.d() } } } function En(l, e, n) { let t = !1, s; return Ne(async () => { n(0, t = await Pe()), t ? (se.set(!0), ve("Home")) : ve("Login") }), Re.subscribe(a => n(1, s = a)), [t, s] } class On extends x { constructor(e) { super(); ee(this, e, En, qn, te, {}) } } function Rn(l) { let e, n, t; return n = new On({}), { c() { e = p("div"), X(n.$$.fragment) }, m(s, a) { w(s, e, a), Q(n, e, null), t = !0 }, p: Y, i(s) { t || (I(n.$$.fragment, s), t = !0) }, o(s) { z(n.$$.fragment, s), t = !1 }, d(s) { s && k(e), V(n) } } } function Fn(l) { return se.subscribe(e => { }), Ne(async () => { var e; await Pe(), ve((e = he.get("m")) != null ? e : "HomePage") }), [] } class Gn extends x { constructor(e) { super(); ee(this, e, Fn, Rn, te, {}) } } new Gn({ target: document.getElementById("app") });
