import{w as Se,d as F,a as We,b as Ye,c as He,g as we,n as Me,F as Ct,S as te,i as se,s as le,e as d,f as b,h as m,t as K,j as C,k as o,l as P,m as R,o as w,p as ke,q as Ie,r as y,u as ye,v as be,x as Q,y as Y,z as Ae,A as H,B as A,C as T,D as I,E as B,G as ve,H as Ne,I as Te,R as dt,L as je,J as wt,K as De}from"./vendor.9bbbbdc0.js";const kt=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))t(l);new MutationObserver(l=>{for(const a of l)if(a.type==="childList")for(const r of a.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&t(r)}).observe(document,{childList:!0,subtree:!0});function s(l){const a={};return l.integrity&&(a.integrity=l.integrity),l.referrerpolicy&&(a.referrerPolicy=l.referrerpolicy),l.crossorigin==="use-credentials"?a.credentials="include":l.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(l){if(l.ep)return;l.ep=!0;const a=s(l);fetch(l.href,a)}};kt();const Be="1201",yt="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CfirstName&isStudent=true&schoolInSchoolYear=",St="users?archived=false&fields=archived%2Ccode%2Cprefix%2ClastName%2CisEmployee&isEmployee=true&schoolInSchoolYear=",Ue=new Map([["teacherSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional%2Coptional"],["studentSchedule","start%2Cend%2CstartTimeSlotName%2Ctype%2Cteachers%2Csubjects%2Cgroups%2Clocations%2Cremark%2CschedulerRemark%2CchangeDescription%2Ccancelled%2CteacherChanged%2CtimeChanged%2ClocationChanged%2CchoosableInDepartmentCodes"],["classSchedule","id%2CappointmentInstance%2CbranchOfSchool%2Cgroups%2CstartTimeSlot%2CstartTimeSlotName%2Cstart%2CendTimeSlot%2CendTimeSlotName%2Cend%2Csubjects%2Cteachers%2ConlineTeachers%2Clocations%2Ctype%2Cvalid%2Ccancelled%2CteacherChanged%2CgroupChanged%2ClocationChanged%2CtimeChanged%2CchangeDescription%2Ccontent%2Cremark%2CschedulerRemark%2ClocationsOfBranch%2CgroupsInDepartments%2CchoosableInDepartmentCodes%2Coptional"],["getStudentClassAppointments","groupsInDepartments%2Csubjects"]]),Le=Se(),ze=Se(!0),ht=Se();let Re=Se(!1);const _t=Se();F.extend(We);F.extend(Ye);F.extend(He);async function $e(n,e,s,t=!0,l){if(we(ne)||l){const a={headers:{Authorization:`Bearer ${n}`},method:"GET"},r=await await fetch(`https://${e}.zportal.nl/api/v3/${s}`,l?{}:a);return t?r.json():r.text()}return t?{}:"{}"}async function Mt(n,e){const s={method:"POST"};return await(await fetch(`https://${e}.zportal.nl/api/v3/oauth/token?grant_type=authorization_code&code=${n}`,s)).json()}let ne=Se(!1),me,ce;async function qe(n,e){if(localStorage.getItem("accessToken")){me=localStorage.getItem("accessToken"),ce=localStorage.getItem("school");const s=await(await fetch(`https://${ce}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${me}`}})).json();return ne.set(s.response.status==200),ne?(console.log("Zermelo login succeeded from stored access token"),Le.set(s.response.data)):console.log("Zermelo login failed from stored access token: server returned "+s.response.status),we(ne)}if(!n||!e)return console.log("Zermelo login failed!"),console.error(n,e),!1;try{const s=await Mt(e,n);s.access_token&&(localStorage.setItem("accessToken",s.access_token),localStorage.setItem("school",n),ne.set(!0),Le.set((await(await fetch(`https://${ce}.zportal.nl/api/v3/users/~me`,{headers:{Authorization:`Bearer ${me}`}})).json()).response.data)),we(ne)&&console.log("Zermelo login succeeded from provided data")}catch{ne.set(!1)}return we(ne)}function Dt(){localStorage.removeItem("school"),localStorage.removeItem("accessToken"),ne.set(!1),Me("/login")}async function Ee(){return await $e(me,ce,`${yt}${Be}`)}async function Oe(){return await $e(me,ce,`${St}${Be}`)}async function Nt(n,e=0){const s=_e(de.prev)+601200*e,t=_e(de.next)+601200*e;return await $e(me,ce,`appointments?start=${s}&end=${t}&teachers=${n}&fields=${Ue.get("teacherSchedule")}`,!0)}async function Tt(n,e=0){const s=_e(de.prev)+601200*e,t=_e(de.next)+601200*e;return await $e(me,ce,`appointments?user=${n}&start=${s}&end=${t}&fields=${Ue.get("studentSchedule")}`,!0)}async function $t(n){const e=_e(de.prev),s=_e(de.next),t=await $e(me,ce,`appointments?valid=true&start=${e}&end=${s}&fields=${Ue.get("getStudentClassAppointments")}&possibleStudents=${n}`,!0);let l;const a=t.response.data;for(let r=0;r<a.length;r++)if(a[r].groupsInDepartments.length>0&&a[r].subjects.length>0){if(a[r].subjects[0]=="mtr"){l=a[r].groupsInDepartments[0];break}continue}return(await $e(me,ce,`groupindepartments?id=${l}&fields=name`,!0)).response.data[0].name.replace("jv","").replace("jb","").toUpperCase()}function _e(n){let e;return n==de.prev?e=F().weekday(-7).unix():e=F().weekday(0).unix(),e}async function jt(n){const e=Array.prototype.concat((await Oe()).response.data,(await Ee()).response.data),s={includeScore:!0,keys:["firstName","lastName","code"]};return new Ct(e,s).search(n)}async function It(n){const e=(await Ee()).response.data;for(let s=0;s<e.length;s++)if(e[s].code==n)return e[s];return{}}async function Lt(n){const e=(await Oe()).response.data;for(let s=0;s<e.length;s++)if(e[s].code==n)return e[s];return{}}function ge(n,e){return n.sort(function(s,t){var l=s[e],a=t[e];return l<a?-1:l>a?1:0})}async function qt(n,e){const s=_e(de.prev)+601200*e,t=_e(de.next)+601200*e;return await $e(me,ce,`appointments?valid=true&start=${s}&end=${t}&fields=${Ue.get("classSchedule")}&schoolInSchoolYear=${Be}&containsStudentsFromGroupInDepartment=${n}`)}var de=(n=>(n[n.prev=0]="prev",n[n.next=1]="next",n))(de||{});function Wt(n){let e,s,t,l,a,r,i,p,f,h,_,$,c;return{c(){e=d("div"),s=d("div"),t=d("h1"),t.textContent="Login",l=b(),a=d("p"),a.textContent="Please provide login information to continue to Zermelo.",r=b(),i=d("input"),p=b(),f=d("input"),h=b(),_=d("button"),_.textContent="Login",m(t,"class","svelte-1w0gyqm"),m(a,"class","svelte-1w0gyqm"),m(i,"placeholder","schoolname"),m(i,"class","svelte-1w0gyqm"),K(i,"error",n[2]),m(f,"placeholder","pairing code"),m(f,"type","number"),m(f,"class","svelte-1w0gyqm"),K(f,"error",n[2]),m(_,"class","svelte-1w0gyqm"),m(s,"class","centered svelte-1w0gyqm"),m(e,"class","svelte-1w0gyqm")},m(u,k){C(u,e,k),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),n[4](i),o(s,p),o(s,f),n[5](f),o(s,h),o(s,_),$||(c=P(_,"click",n[3]),$=!0)},p(u,[k]){k&4&&K(i,"error",u[2]),k&4&&K(f,"error",u[2])},i:R,o:R,d(u){u&&w(e),n[4](null),n[5](null),$=!1,c()}}}function Yt(n,e,s){let t,l,a;ke(async()=>{await qe()&&Me("/")});async function r(){if(!t.value||!l.value){i();return}await qe(t.value,l.value),we(ne)?window.location.reload():i()}function i(){s(2,a=!0),setTimeout(()=>{s(2,a=!1)},3e3)}function p(h){Ie[h?"unshift":"push"](()=>{t=h,s(0,t)})}function f(h){Ie[h?"unshift":"push"](()=>{l=h,s(1,l)})}return[t,l,a,r,p,f]}class Ht extends te{constructor(e){super();se(this,e,Yt,Wt,le,{})}}function Pe(n,e){ht.set({type:n,id:e}),Me("/schedule/people")}function Ge(n,e,s){const t=n.slice();return t[1]=e[s],t}function Ze(n){let e,s=n[1].icon+"",t,l,a,r,i;return{c(){e=d("button"),t=y(s),l=b(),m(e,"class","material-icons svelte-10ub0dz"),m(e,"title",a=n[1].caption)},m(p,f){C(p,e,f),o(e,t),o(e,l),r||(i=P(e,"click",n[1].action),r=!0)},p(p,f){n=p},d(p){p&&w(e),r=!1,i()}}}function At(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=Ze(Ge(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ye()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=Ge(l,s,r);t[r]?t[r].p(i,a):(t[r]=Ze(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:R,o:R,d(l){be(t,l),l&&w(e)}}}function Bt(n){return[[{icon:"logout",action:()=>{Dt()},caption:"Logout"},{icon:"calendar_today",action:()=>{Pe("student",we(Le)[0].code)},caption:"Show own calendar"}]]}class Ut extends te{constructor(e){super();se(this,e,Bt,At,le,{})}}function Fe(n,e,s){const t=n.slice();return t[10]=e[s],t}function Ke(n){let e,s,t,l=n[3],a=[];for(let r=0;r<l.length;r+=1)a[r]=Xe(Fe(n,l,r));return{c(){e=d("div");for(let r=0;r<a.length;r+=1)a[r].c();m(e,"class","searchResults svelte-1ve9yp3"),Q(e,"top",n[2]+"px"),Q(e,"left",n[1]+"px")},m(r,i){C(r,e,i);for(let p=0;p<a.length;p+=1)a[p].m(e,null);s||(t=P(e,"click",n[9]),s=!0)},p(r,i){if(i&9){l=r[3];let p;for(p=0;p<l.length;p+=1){const f=Fe(r,l,p);a[p]?a[p].p(f,i):(a[p]=Xe(f),a[p].c(),a[p].m(e,null))}for(;p<a.length;p+=1)a[p].d(1);a.length=l.length}i&4&&Q(e,"top",r[2]+"px"),i&2&&Q(e,"left",r[1]+"px")},d(r){r&&w(e),be(a,r),s=!1,t()}}}function Je(n){let e,s=n[10].item.code.toUpperCase()+"",t,l;return{c(){e=y("("),t=y(s),l=y(")")},m(a,r){C(a,e,r),C(a,t,r),C(a,l,r)},p(a,r){r&8&&s!==(s=a[10].item.code.toUpperCase()+"")&&Y(t,s)},d(a){a&&w(e),a&&w(t),a&&w(l)}}}function Xe(n){let e,s=(n[10].item.firstName||"")+"",t,l,a=(n[10].item.prefix||"")+"",r,i,p=(n[10].item.lastName||"")+"",f,h,_,$,c,u=n[10].item.isEmployee&&Je(n);function k(){return n[8](n[10])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),f=y(p),h=b(),u&&u.c(),_=b(),m(e,"class","svelte-1ve9yp3")},m(S,q){C(S,e,q),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),u&&u.m(e,null),o(e,_),$||(c=P(e,"click",k),$=!0)},p(S,q){n=S,q&8&&s!==(s=(n[10].item.firstName||"")+"")&&Y(t,s),q&8&&a!==(a=(n[10].item.prefix||"")+"")&&Y(r,a),q&8&&p!==(p=(n[10].item.lastName||"")+"")&&Y(f,p),n[10].item.isEmployee?u?u.p(n,q):(u=Je(n),u.c(),u.m(e,_)):u&&(u.d(1),u=null)},d(S){S&&w(e),u&&u.d(),$=!1,c()}}}function Et(n){let e,s,t,l,a,r,i,p=!n[5]&&n[4]&&Ke(n);return{c(){e=d("input"),s=b(),t=d("button"),t.textContent="search",l=b(),p&&p.c(),a=ye(),m(e,"placeholder","Search people..."),m(e,"class","svelte-1ve9yp3"),m(t,"class","material-icons svelte-1ve9yp3")},m(f,h){C(f,e,h),n[7](e),C(f,s,h),C(f,t,h),C(f,l,h),p&&p.m(f,h),C(f,a,h),r||(i=[P(e,"focus",n[6]),P(e,"blur",n[6]),P(e,"input",n[6])],r=!0)},p(f,[h]){!f[5]&&f[4]?p?p.p(f,h):(p=Ke(f),p.c(),p.m(a.parentNode,a)):p&&(p.d(1),p=null)},i:R,o:R,d(f){f&&w(e),n[7](null),f&&w(s),f&&w(t),f&&w(l),p&&p.d(f),f&&w(a),r=!1,Ae(i)}}}function Pt(n,e,s){let t,l,a,r=[],i="",p=!1;ke(()=>{s(1,l=t.offsetLeft-5),s(2,a=t.offsetTop+30)});async function f(){s(4,i=t.value),s(3,r=await jt(t.value)),s(5,p=document.activeElement!=t)}function h(c){Ie[c?"unshift":"push"](()=>{t=c,s(0,t)})}return[t,l,a,r,i,p,f,h,c=>{s(0,t.value="",t),Pe(c.item.isEmployee?"teacher":"student",c.item.code)},()=>t.focus()]}class Rt extends te{constructor(e){super();se(this,e,Pt,Et,le,{})}}function Ot(n){let e,s,t,l,a,r,i,p,f,h=n[0].firstName+"",_,$,c=(n[0].prefix||"")+"",u,k,S=n[0].lastName+"",q,W,D,Z,J,X;return a=new Ut({}),{c(){e=d("div"),s=d("div"),s.textContent=`Zermelo Hub | ${ce}`,t=b(),l=d("div"),H(a.$$.fragment),r=b(),i=d("div"),p=b(),f=d("p"),_=y(h),$=b(),u=y(c),k=b(),q=y(S),W=b(),D=d("span"),D.textContent="account_circle",Z=b(),J=d("div"),m(s,"class","header svelte-1l29745"),m(i,"class","sep svelte-1l29745"),m(f,"class","svelte-1l29745"),m(D,"class","material-icons svelte-1l29745"),m(l,"class","right svelte-1l29745"),m(e,"class","tb svelte-1l29745"),m(J,"class","accent svelte-1l29745")},m(L,E){C(L,e,E),o(e,s),o(e,t),o(e,l),A(a,l,null),o(l,r),o(l,i),o(l,p),o(l,f),o(f,_),o(f,$),o(f,u),o(f,k),o(f,q),o(l,W),o(l,D),C(L,Z,E),C(L,J,E),X=!0},p(L,[E]){(!X||E&1)&&h!==(h=L[0].firstName+"")&&Y(_,h),(!X||E&1)&&c!==(c=(L[0].prefix||"")+"")&&Y(u,c),(!X||E&1)&&S!==(S=L[0].lastName+"")&&Y(q,S)},i(L){X||(T(a.$$.fragment,L),X=!0)},o(L){I(a.$$.fragment,L),X=!1},d(L){L&&w(e),B(a),L&&w(Z),L&&w(J)}}}function zt(n,e,s){let t;return Le.subscribe(l=>{s(0,t=l[0])}),[t]}class Gt extends te{constructor(e){super();se(this,e,zt,Ot,le,{})}}function Qe(n){let e,s,t=(n[0].subjects.toString().toUpperCase()||"appointment")+"",l,a,r,i,p,f=(n[0].locations.length?n[0].locations:"None")+"",h,_,$,c,u,k=n[0].teachers.length>1?"s":"",S,q,W=n[0].teachers.join(" ").toUpperCase()+"",D,Z,J,X,L,E=F(n[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",O,j,x,ae,fe,re=F(n[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"",ue,oe,ee,pe,z,he=n[0].classes.length>1?"s":"",ie,G,V=(n[0].classes.length?n[0].classes:"Unknown")+"",N,Ce,g,M=n[0].changeWarning&&Ve(n);return{c(){e=d("h3"),s=y("Information for "),l=y(t),a=b(),r=d("p"),i=d("b"),i.textContent="Location",p=y(": "),h=y(f),_=b(),$=d("p"),c=d("b"),u=y("Teacher"),S=y(k),q=y(": "),D=y(W),Z=b(),J=d("p"),X=d("b"),X.textContent="Start",L=y(": "),O=y(E),j=b(),x=d("p"),ae=d("b"),ae.textContent="End",fe=y(": "),ue=y(re),oe=b(),ee=d("p"),pe=d("b"),z=y("Group"),ie=y(he),G=y(": "),N=y(V),Ce=b(),M&&M.c(),g=ye(),m(e,"class","svelte-t0yfsj"),m(i,"class","svelte-t0yfsj"),m(r,"class","svelte-t0yfsj"),m(c,"class","svelte-t0yfsj"),m($,"class","svelte-t0yfsj"),m(X,"class","svelte-t0yfsj"),m(J,"class","svelte-t0yfsj"),m(ae,"class","svelte-t0yfsj"),m(x,"class","svelte-t0yfsj"),m(pe,"class","svelte-t0yfsj"),m(ee,"class","svelte-t0yfsj")},m(v,U){C(v,e,U),o(e,s),o(e,l),C(v,a,U),C(v,r,U),o(r,i),o(r,p),o(r,h),C(v,_,U),C(v,$,U),o($,c),o(c,u),o(c,S),o($,q),o($,D),C(v,Z,U),C(v,J,U),o(J,X),o(J,L),o(J,O),C(v,j,U),C(v,x,U),o(x,ae),o(x,fe),o(x,ue),C(v,oe,U),C(v,ee,U),o(ee,pe),o(pe,z),o(pe,ie),o(ee,G),o(ee,N),C(v,Ce,U),M&&M.m(v,U),C(v,g,U)},p(v,U){U&1&&t!==(t=(v[0].subjects.toString().toUpperCase()||"appointment")+"")&&Y(l,t),U&1&&f!==(f=(v[0].locations.length?v[0].locations:"None")+"")&&Y(h,f),U&1&&k!==(k=v[0].teachers.length>1?"s":"")&&Y(S,k),U&1&&W!==(W=v[0].teachers.join(" ").toUpperCase()+"")&&Y(D,W),U&1&&E!==(E=F(v[0].startTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&Y(O,E),U&1&&re!==(re=F(v[0].endTimeStamp*1e3).format("DD/MM/YYYY, hh:mm A")+"")&&Y(ue,re),U&1&&he!==(he=v[0].classes.length>1?"s":"")&&Y(ie,he),U&1&&V!==(V=(v[0].classes.length?v[0].classes:"Unknown")+"")&&Y(N,V),v[0].changeWarning?M?M.p(v,U):(M=Ve(v),M.c(),M.m(g.parentNode,g)):M&&(M.d(1),M=null)},d(v){v&&w(e),v&&w(a),v&&w(r),v&&w(_),v&&w($),v&&w(Z),v&&w(J),v&&w(j),v&&w(x),v&&w(oe),v&&w(ee),v&&w(Ce),M&&M.d(v),v&&w(g)}}}function Ve(n){let e,s,t,l,a,r,i=n[0].changeWarning+"",p;return{c(){e=d("hr"),s=b(),t=d("p"),l=d("b"),l.textContent="Warning",a=y(":"),r=d("br"),p=y(i),m(e,"class","svelte-t0yfsj"),m(l,"class","svelte-t0yfsj"),m(r,"class","svelte-t0yfsj"),m(t,"class","svelte-t0yfsj")},m(f,h){C(f,e,h),C(f,s,h),C(f,t,h),o(t,l),o(t,a),o(t,r),o(t,p)},p(f,h){h&1&&i!==(i=f[0].changeWarning+"")&&Y(p,i)},d(f){f&&w(e),f&&w(s),f&&w(t)}}}function Zt(n){let e,s,t,l,a,r,i,p=n[0]&&Qe(n);return{c(){e=d("div"),s=b(),t=d("div"),l=d("button"),l.textContent="close",a=b(),p&&p.c(),m(e,"class","shade svelte-t0yfsj"),K(e,"hidden",!n[1]),m(l,"class","material-icons svelte-t0yfsj"),m(t,"class","dialog svelte-t0yfsj"),K(t,"hidden",!n[1])},m(f,h){C(f,e,h),C(f,s,h),C(f,t,h),o(t,l),o(t,a),p&&p.m(t,null),r||(i=[P(e,"click",n[2]),P(l,"click",n[2])],r=!0)},p(f,[h]){h&2&&K(e,"hidden",!f[1]),f[0]?p?p.p(f,h):(p=Qe(f),p.c(),p.m(t,null)):p&&(p.d(1),p=null),h&2&&K(t,"hidden",!f[1])},i:R,o:R,d(f){f&&w(e),f&&w(s),f&&w(t),p&&p.d(),r=!1,Ae(i)}}}function Ft(n,e,s){F.extend(We),F.extend(Ye),F.extend(He);let t,l;_t.subscribe(r=>s(0,t=r)),Re.subscribe(r=>s(1,l=r));function a(){Re.set(!1)}return[t,l,a]}class Kt extends te{constructor(e){super();se(this,e,Ft,Zt,le,{})}}function Jt(n){let e,s,t,l,a,r,i,p,f,h=(n[0].classes||"")+"",_,$,c;return{c(){e=d("div"),s=d("p"),t=d("b"),l=y(n[5]),a=b(),r=d("p"),i=y(n[6]),p=b(),f=d("p"),_=y(h),m(s,"class","svelte-qab7p0"),m(r,"class","svelte-qab7p0"),m(f,"class","classes svelte-qab7p0"),m(e,"class","appointment svelte-qab7p0"),Q(e,"left",n[2]+"px"),Q(e,"width",n[3]+"px"),Q(e,"top",n[4]+"px"),K(e,"cancelled",n[0].cancelled),K(e,"changed",n[1])},m(u,k){C(u,e,k),o(e,s),o(s,t),o(t,l),o(e,a),o(e,r),o(r,i),o(e,p),o(e,f),o(f,_),$||(c=P(e,"click",n[7]),$=!0)},p(u,[k]){k&32&&Y(l,u[5]),k&64&&Y(i,u[6]),k&1&&h!==(h=(u[0].classes||"")+"")&&Y(_,h),k&4&&Q(e,"left",u[2]+"px"),k&8&&Q(e,"width",u[3]+"px"),k&16&&Q(e,"top",u[4]+"px"),k&1&&K(e,"cancelled",u[0].cancelled),k&2&&K(e,"changed",u[1])},i:R,o:R,d(u){u&&w(e),$=!1,c()}}}function Xt(n,e,s){let{appointment:t}=e;function l(){_t.set(t),Re.set(!0)}let a,r,i,p,f,h;return ke(()=>{s(1,a=t.teacherChanged||t.timeChanged||t.locationChanged),s(2,r=(t.startMin-440)*2),s(3,i=(t.endMin-t.startMin)*2-2),s(4,p=42+t.rowNr*80-80),s(5,f=`${t.subjects[0]||t.teachers.join(" ").toUpperCase()} - ${t.locations.length?t.locations:"0_00"}`),s(6,h=t.subjects[0]?t.teachers.join(" ").toUpperCase():"")}),n.$$set=_=>{"appointment"in _&&s(0,t=_.appointment)},[t,a,r,i,p,f,h,l]}class gt extends te{constructor(e){super();se(this,e,Xt,Jt,le,{appointment:0})}}function xe(n,e,s){const t=n.slice();return t[1]=e[s],t}function et(n){let e,s=n[1].d+"",t,l;return{c(){e=d("div"),t=y(s),l=b(),m(e,"class","appointment svelte-14e4oll"),Q(e,"left","0px"),Q(e,"width","80px"),Q(e,"top",2+80*n[1].i-40+"px"),K(e,"today",new Date().getDay()==n[1].i)},m(a,r){C(a,e,r),o(e,t),o(e,l)},p(a,r){r&1&&K(e,"today",new Date().getDay()==a[1].i)},d(a){a&&w(e)}}}function Qt(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=et(xe(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ye()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=xe(l,s,r);t[r]?t[r].p(i,a):(t[r]=et(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:R,o:R,d(l){be(t,l),l&&w(e)}}}function Vt(n){return[[{i:1,d:"Mon"},{i:2,d:"Tue"},{i:3,d:"Wed"},{i:4,d:"Thu"},{i:5,d:"Fri"}]]}class vt extends te{constructor(e){super();se(this,e,Vt,Qt,le,{})}}function tt(n,e,s){const t=n.slice();return t[1]=e[s],t}function st(n){let e,s=n[1].start.h.toString().padStart(2,"0")+"",t,l,a=n[1].start.m.toString().padStart(2,"0")+"",r,i,p=n[1].end.h.toString().padStart(2,"0")+"",f,h,_=n[1].end.m.toString().padStart(2,"0")+"",$,c;return{c(){e=d("div"),t=y(s),l=y(":"),r=y(a),i=y(" - "),f=y(p),h=y(":"),$=y(_),c=b(),m(e,"class","appointment svelte-jp6sc9"),Q(e,"left",(n[1].startMin-440)*2+"px"),Q(e,"width",(n[1].endMin-n[1].startMin)*2-2+"px"),Q(e,"height","40px"),Q(e,"top","0px")},m(u,k){C(u,e,k),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),o(e,$),o(e,c)},p:R,d(u){u&&w(e)}}}function xt(n){let e,s=n[0],t=[];for(let l=0;l<s.length;l+=1)t[l]=st(tt(n,s,l));return{c(){for(let l=0;l<t.length;l+=1)t[l].c();e=ye()},m(l,a){for(let r=0;r<t.length;r+=1)t[r].m(l,a);C(l,e,a)},p(l,[a]){if(a&1){s=l[0];let r;for(r=0;r<s.length;r+=1){const i=tt(l,s,r);t[r]?t[r].p(i,a):(t[r]=st(i),t[r].c(),t[r].m(e.parentNode,e))}for(;r<t.length;r+=1)t[r].d(1);t.length=s.length}},i:R,o:R,d(l){be(t,l),l&&w(e)}}}function es(n){return[[{startMin:480,endMin:540,start:{h:8,m:0},end:{h:9,m:0}},{startMin:540,endMin:600,start:{h:9,m:0},end:{h:10,m:0}},{startMin:600,endMin:660,start:{h:10,m:0},end:{h:11,m:0}},{startMin:660,endMin:720,start:{h:11,m:0},end:{h:12,m:0}},{startMin:720,endMin:780,start:{h:12,m:0},end:{h:13,m:0}},{startMin:780,endMin:840,start:{h:13,m:0},end:{h:14,m:0}},{startMin:840,endMin:900,start:{h:14,m:0},end:{h:15,m:0}},{startMin:900,endMin:960,start:{h:15,m:0},end:{h:16,m:0}},{startMin:960,endMin:1020,start:{h:16,m:0},end:{h:17,m:0}},{startMin:1020,endMin:1080,start:{h:17,m:0},end:{h:18,m:0}}]]}class bt extends te{constructor(e){super();se(this,e,es,xt,le,{})}}function lt(n,e,s){const t=n.slice();return t[12]=e[s],t}function ts(n){let e;return{c(){e=y("Loading...")},m(s,t){C(s,e,t)},p:R,d(s){s&&w(e)}}}function ss(n){let e;function s(a,r){return a[1].id?ns:ls}let t=s(n),l=t(n);return{c(){l.c(),e=ye()},m(a,r){l.m(a,r),C(a,e,r)},p(a,r){t===(t=s(a))&&l?l.p(a,r):(l.d(1),l=t(a),l&&(l.c(),l.m(e.parentNode,e)))},d(a){l.d(a),a&&w(e)}}}function ls(n){let e;return{c(){e=y("No schedule selected.")},m(s,t){C(s,e,t)},p:R,d(s){s&&w(e)}}}function ns(n){let e=(n[4]||"Loading...")+"",s;return{c(){s=y(e)},m(t,l){C(t,s,l)},p(t,l){l&16&&e!==(e=(t[4]||"Loading...")+"")&&Y(s,e)},d(t){t&&w(s)}}}function nt(n){let e,s;return e=new gt({props:{appointment:n[12]}}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},p(t,l){const a={};l&1&&(a.appointment=t[12]),e.$set(a)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function as(n){let e,s,t,l,a,r,i,p,f,h,_,$,c,u,k=parseInt(ve().format("W"))+n[3]+"",S,q,W,D,Z,J,X,L,E,O,j,x,ae,fe,re,ue,oe,ee,pe,z;Z=new Rt({});function he(g,M){return g[2]?ts:ss}let ie=he(n),G=ie(n);x=new vt({}),fe=new bt({});let V=n[0],N=[];for(let g=0;g<V.length;g+=1)N[g]=nt(lt(n,V,g));const Ce=g=>I(N[g],1,1,()=>{N[g]=null});return{c(){e=d("div"),s=d("h3"),t=d("button"),t.textContent="arrow_back_ios_new",l=b(),a=d("button"),a.textContent="date_range",r=b(),i=d("button"),i.textContent="arrow_forward_ios",p=b(),f=d("button"),f.textContent="list",h=b(),_=d("div"),$=b(),c=d("span"),u=y("Week "),S=y(k),q=b(),W=d("div"),D=b(),H(Z.$$.fragment),J=b(),X=d("div"),L=b(),E=d("h3"),G.c(),O=b(),j=d("div"),H(x.$$.fragment),ae=b(),H(fe.$$.fragment),re=b(),ue=d("div"),oe=b();for(let g=0;g<N.length;g+=1)N[g].c();m(t,"class","material-icons"),m(a,"class","material-icons"),m(i,"class","material-icons"),m(f,"class","material-icons"),m(_,"class","sep"),m(c,"class","week"),m(W,"class","sep"),m(X,"class","sep"),m(e,"class","header"),m(ue,"class","timeline"),Q(ue,"left",(n[5]-442)*2+"px"),m(j,"class","grid")},m(g,M){C(g,e,M),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),o(s,p),o(s,f),o(s,h),o(s,_),o(s,$),o(s,c),o(c,u),o(c,S),o(s,q),o(s,W),o(s,D),A(Z,s,null),o(s,J),o(s,X),o(e,L),o(e,E),G.m(E,null),C(g,O,M),C(g,j,M),A(x,j,null),o(j,ae),A(fe,j,null),o(j,re),o(j,ue),o(j,oe);for(let v=0;v<N.length;v+=1)N[v].m(j,null);ee=!0,pe||(z=[P(t,"click",n[6]),P(a,"click",n[8]),P(i,"click",n[7]),P(f,"click",n[10])],pe=!0)},p(g,[M]){if((!ee||M&8)&&k!==(k=parseInt(ve().format("W"))+g[3]+"")&&Y(S,k),ie===(ie=he(g))&&G?G.p(g,M):(G.d(1),G=ie(g),G&&(G.c(),G.m(E,null))),(!ee||M&32)&&Q(ue,"left",(g[5]-442)*2+"px"),M&1){V=g[0];let v;for(v=0;v<V.length;v+=1){const U=lt(g,V,v);N[v]?(N[v].p(U,M),T(N[v],1)):(N[v]=nt(U),N[v].c(),T(N[v],1),N[v].m(j,null))}for(Ne(),v=V.length;v<N.length;v+=1)Ce(v);Te()}},i(g){if(!ee){T(Z.$$.fragment,g),T(x.$$.fragment,g),T(fe.$$.fragment,g);for(let M=0;M<V.length;M+=1)T(N[M]);ee=!0}},o(g){I(Z.$$.fragment,g),I(x.$$.fragment,g),I(fe.$$.fragment,g),N=N.filter(Boolean);for(let M=0;M<N.length;M+=1)I(N[M]);ee=!1},d(g){g&&w(e),B(Z),G.d(),g&&w(O),g&&w(j),B(x),B(fe),be(N,g),pe=!1,Ae(z)}}}function rs(n,e,s){F.extend(We),F.extend(Ye),F.extend(He);let t=[],l=[],a={id:""},r=!1,i=0,p;ht.subscribe(async k=>{if(k)if(s(2,r=!0),s(1,a=k),f(k.type,k.id),k.type=="teacher"){const S=await Lt(k.id);s(4,p=`${S.prefix||""} ${S.lastName||""} (${S.code.toUpperCase()})`),s(2,r=!1)}else{const S=await It(k.id);s(4,p=`${S.firstName||""} ${S.prefix||""} ${S.lastName||""} (${S.code.toUpperCase()})`),s(2,r=!1)}});async function f(k,S){let q;s(0,l=[]),k=="student"?q=await Tt(S,i+1):q=await Nt(S,i+1),t=ge(q.response.data,"start"),s(0,l=[]);for(let W=0;W<t.length;W++){const D=t[W],Z=new Date(D.start*1e3).getDay()-new Date(_e(de.prev)).getDay()+2;l.push({rowNr:Z,startMin:new Date(D.start*1e3).getHours()*60+new Date(D.start*1e3).getMinutes(),endMin:new Date(D.end*1e3).getHours()*60+new Date(D.end*1e3).getMinutes(),slotName:D.startTimeSlotName,locations:D.locations,teachers:D.teachers,subjects:D.subjects,cancelled:D.cancelled,changeWarning:D.changeDescription,teacherChanged:D.teacherChanged,locationChanged:D.locationChanged,timeChanged:D.timeChanged,start:{h:new Date(D.start*1e3).getHours(),m:new Date(D.start*1e3).getMinutes()},end:{h:new Date(D.end*1e3).getHours(),m:new Date(D.end*1e3).getMinutes()},classes:D.groups,startTimeStamp:D.start,endTimeStamp:D.end})}s(2,r=!1)}function h(){i+parseInt(ve().format("W"))>1&&(s(3,i-=1),f(a.type,a.id))}function _(){i+parseInt(ve().format("W"))<52&&(s(3,i+=1),f(a.type,a.id))}function $(){i!=0&&(s(3,i=0),f(a.type,a.id))}let c=0;return setInterval(()=>{s(5,c=60*parseInt(F().format("HH"))+parseInt(F().format("m")))},300),[l,a,r,i,p,c,h,_,$,f,()=>{Me("/everyone")}]}class os extends te{constructor(e){super();se(this,e,rs,as,le,{openSched:9})}get openSched(){return this.$$.ctx[9]}}function is(n){let e,s,t,l,a;return s=new os({}),{c(){e=d("div"),H(s.$$.fragment),m(e,"class","svelte-s8nf7d")},m(r,i){C(r,e,i),A(s,e,null),t=!0,l||(a=P(e,"mousedown",n[0]),l=!0)},p:R,i(r){t||(T(s.$$.fragment,r),t=!0)},o(r){I(s.$$.fragment,r),t=!1},d(r){r&&w(e),B(s),l=!1,a()}}}function cs(n){ze.subscribe(s=>!s);function e(s){const t=s.composedPath();let l=!0;for(let a=0;a<t.length;a++){const r=t[a];if(r.classList&&r.classList.contains("sidebar")){l=!1;break}}l&&ze.set(!1)}return[e]}class fs extends te{constructor(e){super();se(this,e,cs,is,le,{})}}function us(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-hxc33h">home</span> 
        <p class="svelte-hxc33h">Home</p>`,m(e,"class","home svelte-hxc33h"),K(e,"selected",n[0]=="/")},m(l,a){C(l,e,a),s||(t=P(e,"click",n[1]),s=!0)},p(l,a){a&1&&K(e,"selected",l[0]=="/")},d(l){l&&w(e),s=!1,t()}}}function ps(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-hxc33h">people</span> 
        <p class="svelte-hxc33h">People</p>`,m(e,"class","svelte-hxc33h"),K(e,"selected",n[0]=="/schedule/people")},m(l,a){C(l,e,a),s||(t=P(e,"click",n[1]),s=!0)},p(l,a){a&1&&K(e,"selected",l[0]=="/schedule/people")},d(l){l&&w(e),s=!1,t()}}}function ms(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-hxc33h">event</span> 
        <p class="svelte-hxc33h">Classes</p>`,m(e,"class","svelte-hxc33h"),K(e,"selected",n[0]=="/schedule/classes")},m(l,a){C(l,e,a),s||(t=P(e,"click",n[1]),s=!0)},p(l,a){a&1&&K(e,"selected",l[0]=="/schedule/classes")},d(l){l&&w(e),s=!1,t()}}}function ds(n){let e,s,t;return{c(){e=d("button"),e.innerHTML=`<span class="material-icons svelte-hxc33h">list</span> 
        <p class="svelte-hxc33h">List</p>`,m(e,"class","svelte-hxc33h"),K(e,"selected",n[0]=="/everyone")},m(l,a){C(l,e,a),s||(t=P(e,"click",n[1]),s=!0)},p(l,a){a&1&&K(e,"selected",l[0]=="/everyone")},d(l){l&&w(e),s=!1,t()}}}function hs(n){let e,s,t,l,a,r,i,p,f,h,_,$;return e=new je({props:{to:"/",$$slots:{default:[us]},$$scope:{ctx:n}}}),a=new je({props:{to:"/schedule/people",$$slots:{default:[ps]},$$scope:{ctx:n}}}),i=new je({props:{to:"/schedule/classes",$$slots:{default:[ms]},$$scope:{ctx:n}}}),_=new je({props:{to:"/everyone",$$slots:{default:[ds]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),s=b(),t=d("hr"),l=b(),H(a.$$.fragment),r=b(),H(i.$$.fragment),p=b(),f=d("hr"),h=b(),H(_.$$.fragment),m(t,"class","svelte-hxc33h"),m(f,"class","svelte-hxc33h")},m(c,u){A(e,c,u),C(c,s,u),C(c,t,u),C(c,l,u),A(a,c,u),C(c,r,u),A(i,c,u),C(c,p,u),C(c,f,u),C(c,h,u),A(_,c,u),$=!0},p(c,u){const k={};u&5&&(k.$$scope={dirty:u,ctx:c}),e.$set(k);const S={};u&5&&(S.$$scope={dirty:u,ctx:c}),a.$set(S);const q={};u&5&&(q.$$scope={dirty:u,ctx:c}),i.$set(q);const W={};u&5&&(W.$$scope={dirty:u,ctx:c}),_.$set(W)},i(c){$||(T(e.$$.fragment,c),T(a.$$.fragment,c),T(i.$$.fragment,c),T(_.$$.fragment,c),$=!0)},o(c){I(e.$$.fragment,c),I(a.$$.fragment,c),I(i.$$.fragment,c),I(_.$$.fragment,c),$=!1},d(c){B(e,c),c&&w(s),c&&w(t),c&&w(l),B(a,c),c&&w(r),B(i,c),c&&w(p),c&&w(f),c&&w(h),B(_,c)}}}function _s(n){let e,s,t;return s=new dt({props:{$$slots:{default:[hs]},$$scope:{ctx:n}}}),{c(){e=d("div"),H(s.$$.fragment),m(e,"class","sidebar svelte-hxc33h")},m(l,a){C(l,e,a),A(s,e,null),t=!0},p(l,[a]){const r={};a&5&&(r.$$scope={dirty:a,ctx:l}),s.$set(r)},i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){I(s.$$.fragment,l),t=!1},d(l){l&&w(e),B(s)}}}function $s(n,e,s){let t="";function l(){s(0,t=location.pathname)}return ke(()=>{l(),setInterval(l,10)}),[t,l]}class gs extends te{constructor(e){super();se(this,e,$s,_s,le,{})}}function at(n,e,s){const t=n.slice();return t[2]=e[s],t}function rt(n){let e,s=n[2].firstName+"",t,l,a=(n[2].prefix||"")+"",r,i,p=n[2].lastName+"",f,h,_,$=n[2].code.toUpperCase()+"",c,u,k,S;function q(){return n[1](n[2])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),f=y(p),h=b(),_=d("span"),c=y($),u=b(),m(_,"class","right svelte-1x3rp31"),m(e,"class","svelte-1x3rp31")},m(W,D){C(W,e,D),o(e,t),o(e,l),o(e,r),o(e,i),o(e,f),o(e,h),o(e,_),o(_,c),o(e,u),k||(S=P(e,"click",q),k=!0)},p(W,D){n=W,D&1&&s!==(s=n[2].firstName+"")&&Y(t,s),D&1&&a!==(a=(n[2].prefix||"")+"")&&Y(r,a),D&1&&p!==(p=n[2].lastName+"")&&Y(f,p),D&1&&$!==($=n[2].code.toUpperCase()+"")&&Y(c,$)},d(W){W&&w(e),k=!1,S()}}}function vs(n){let e,s,t,l,a,r=n[0].length+"",i,p,f,h=n[0],_=[];for(let $=0;$<h.length;$+=1)_[$]=rt(at(n,h,$));return{c(){e=d("div"),s=d("h3"),t=d("span"),t.textContent="Students",l=b(),a=d("span"),i=y(r),p=y("\xA0\xA0"),f=b();for(let $=0;$<_.length;$+=1)_[$].c();m(t,"class","svelte-1x3rp31"),m(a,"class","right svelte-1x3rp31"),m(s,"class","svelte-1x3rp31"),m(e,"class","svelte-1x3rp31")},m($,c){C($,e,c),o(e,s),o(s,t),o(s,l),o(s,a),o(a,i),o(a,p),o(e,f);for(let u=0;u<_.length;u+=1)_[u].m(e,null)},p($,[c]){if(c&1&&r!==(r=$[0].length+"")&&Y(i,r),c&1){h=$[0];let u;for(u=0;u<h.length;u+=1){const k=at($,h,u);_[u]?_[u].p(k,c):(_[u]=rt(k),_[u].c(),_[u].m(e,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=h.length}},i:R,o:R,d($){$&&w(e),be(_,$)}}}function bs(n,e,s){let t=[];return ne.subscribe(async a=>{if(a==!0){s(0,t=(await Ee()).response.data),t.length>0&&s(0,t=ge(t,"firstName")),t.length>0&&s(0,t=ge(t,"lastName"));for(let r=0;r<t.length;r++)s(0,t[r].class=await $t(t[r].code),t)}}),[t,a=>{Pe("student",a.code)}]}class Cs extends te{constructor(e){super();se(this,e,bs,vs,le,{})}}function ot(n,e,s){const t=n.slice();return t[7]=e[s],t}function it(n){let e,s=(n[7].prefix||"")+"",t,l,a=n[7].lastName+"",r,i,p,f=n[7].code.toUpperCase()+"",h,_,$,c;function u(){return n[1](n[7])}return{c(){e=d("button"),t=y(s),l=b(),r=y(a),i=b(),p=d("span"),h=y(f),_=b(),m(p,"class","right svelte-1jwpn1u"),m(e,"class","svelte-1jwpn1u")},m(k,S){C(k,e,S),o(e,t),o(e,l),o(e,r),o(e,i),o(e,p),o(p,h),o(e,_),$||(c=P(e,"click",u),$=!0)},p(k,S){n=k,S&1&&s!==(s=(n[7].prefix||"")+"")&&Y(t,s),S&1&&a!==(a=n[7].lastName+"")&&Y(r,a),S&1&&f!==(f=n[7].code.toUpperCase()+"")&&Y(h,f)},d(k){k&&w(e),$=!1,c()}}}function ws(n){let e,s,t,l,a,r=n[0].length+"",i,p,f,h=n[0],_=[];for(let $=0;$<h.length;$+=1)_[$]=it(ot(n,h,$));return{c(){e=d("div"),s=d("h3"),t=d("span"),t.textContent="Teachers",l=b(),a=d("span"),i=y(r),p=y("\xA0\xA0"),f=b();for(let $=0;$<_.length;$+=1)_[$].c();m(t,"class","svelte-1jwpn1u"),m(a,"class","right svelte-1jwpn1u"),m(s,"class","svelte-1jwpn1u"),m(e,"class","svelte-1jwpn1u")},m($,c){C($,e,c),o(e,s),o(s,t),o(s,l),o(s,a),o(a,i),o(a,p),o(e,f);for(let u=0;u<_.length;u+=1)_[u].m(e,null)},p($,[c]){if(c&1&&r!==(r=$[0].length+"")&&Y(i,r),c&1){h=$[0];let u;for(u=0;u<h.length;u+=1){const k=ot($,h,u);_[u]?_[u].p(k,c):(_[u]=it(k),_[u].c(),_[u].m(e,null))}for(;u<_.length;u+=1)_[u].d(1);_.length=h.length}},i:R,o:R,d($){$&&w(e),be(_,$)}}}function ks(n,e,s){let t=[],l=[];return ne.subscribe(async r=>{if(r==!0){t=(await Ee()).response.data,s(0,l=(await Oe()).response.data),t.length>0&&(t=ge(t,"firstName")),l.length>0&&s(0,l=ge(l,"lastName"));for(let i=0;i<t.length;i++)t[i].class=await $t(t[i].code)}}),[l,r=>{Pe("teacher",r.code)}]}class ys extends te{constructor(e){super();se(this,e,ks,ws,le,{})}}function Ss(n){let e,s,t,l;return e=new ys({}),t=new Cs({}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment)},m(a,r){A(e,a,r),C(a,s,r),A(t,a,r),l=!0},p:R,i(a){l||(T(e.$$.fragment,a),T(t.$$.fragment,a),l=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),l=!1},d(a){B(e,a),a&&w(s),B(t,a)}}}class Ms extends te{constructor(e){super();se(this,e,null,Ss,le,{})}}function ct(n,e,s){const t=n.slice();return t[21]=e[s],t}function ft(n){let e,s,t,l,a={value:n[8],items:n[6]};return t=new wt({props:a}),n[15](t),t.$on("select",n[9]),{c(){e=d("div"),s=d("div"),H(t.$$.fragment),m(s,"class","svelte-qte5a2"),m(e,"class","select svelte-qte5a2")},m(r,i){C(r,e,i),o(e,s),A(t,s,null),l=!0},p(r,i){const p={};i&64&&(p.items=r[6]),t.$set(p)},i(r){l||(T(t.$$.fragment,r),l=!0)},o(r){I(t.$$.fragment,r),l=!1},d(r){r&&w(e),n[15](null),B(t)}}}function Ds(n){let e;return{c(){e=d("span"),e.textContent="Loading...",m(e,"class","svelte-qte5a2")},m(s,t){C(s,e,t)},p:R,d(s){s&&w(e)}}}function Ns(n){let e=(n[3]||"No schedule selected.")+"",s;return{c(){s=y(e)},m(t,l){C(t,s,l)},p(t,l){l&8&&e!==(e=(t[3]||"No schedule selected.")+"")&&Y(s,e)},d(t){t&&w(s)}}}function ut(n){let e,s;return e=new gt({props:{appointment:n[21]}}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},p(t,l){const a={};l&1&&(a.appointment=t[21]),e.$set(a)},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ts(n){let e,s,t,l,a,r,i,p,f,h,_,$,c,u,k=parseInt(ve().format("W"))+n[2]+"",S,q,W,D,Z,J,X,L,E,O,j,x,ae,fe,re,ue,oe,ee,pe,z=n[4]&&ft(n);function he(g,M){return g[1]?Ds:Ns}let ie=he(n),G=ie(n);j=new vt({}),ae=new bt({});let V=n[0],N=[];for(let g=0;g<V.length;g+=1)N[g]=ut(ct(n,V,g));const Ce=g=>I(N[g],1,1,()=>{N[g]=null});return{c(){e=d("div"),s=d("h3"),t=d("button"),t.textContent="arrow_back_ios_new",l=b(),a=d("button"),a.textContent="date_range",r=b(),i=d("button"),i.textContent="arrow_forward_ios",p=b(),f=d("button"),f.textContent="list",h=b(),_=d("div"),$=b(),c=d("span"),u=y("Week "),S=y(k),q=b(),W=d("div"),D=b(),z&&z.c(),Z=b(),J=d("div"),X=b(),L=d("h3"),G.c(),E=b(),O=d("div"),H(j.$$.fragment),x=b(),H(ae.$$.fragment),fe=b(),re=d("div"),ue=b();for(let g=0;g<N.length;g+=1)N[g].c();m(t,"class","material-icons svelte-qte5a2"),m(a,"class","material-icons svelte-qte5a2"),m(i,"class","material-icons svelte-qte5a2"),m(f,"class","material-icons svelte-qte5a2"),m(_,"class","sep svelte-qte5a2"),m(c,"class","week svelte-qte5a2"),m(W,"class","sep svelte-qte5a2"),m(J,"class","sep svelte-qte5a2"),m(s,"class","svelte-qte5a2"),m(L,"class","svelte-qte5a2"),m(e,"class","header svelte-qte5a2"),m(re,"class","timeline svelte-qte5a2"),Q(re,"left",(n[7]-442)*2+"px"),m(O,"class","grid svelte-qte5a2")},m(g,M){C(g,e,M),o(e,s),o(s,t),o(s,l),o(s,a),o(s,r),o(s,i),o(s,p),o(s,f),o(s,h),o(s,_),o(s,$),o(s,c),o(c,u),o(c,S),o(s,q),o(s,W),o(s,D),z&&z.m(s,null),o(s,Z),o(s,J),o(e,X),o(e,L),G.m(L,null),C(g,E,M),C(g,O,M),A(j,O,null),o(O,x),A(ae,O,null),o(O,fe),o(O,re),o(O,ue);for(let v=0;v<N.length;v+=1)N[v].m(O,null);oe=!0,ee||(pe=[P(t,"click",n[10]),P(a,"click",n[12]),P(i,"click",n[11]),P(f,"click",n[14])],ee=!0)},p(g,[M]){if((!oe||M&4)&&k!==(k=parseInt(ve().format("W"))+g[2]+"")&&Y(S,k),g[4]?z?(z.p(g,M),M&16&&T(z,1)):(z=ft(g),z.c(),T(z,1),z.m(s,Z)):z&&(Ne(),I(z,1,1,()=>{z=null}),Te()),ie===(ie=he(g))&&G?G.p(g,M):(G.d(1),G=ie(g),G&&(G.c(),G.m(L,null))),(!oe||M&128)&&Q(re,"left",(g[7]-442)*2+"px"),M&1){V=g[0];let v;for(v=0;v<V.length;v+=1){const U=ct(g,V,v);N[v]?(N[v].p(U,M),T(N[v],1)):(N[v]=ut(U),N[v].c(),T(N[v],1),N[v].m(O,null))}for(Ne(),v=V.length;v<N.length;v+=1)Ce(v);Te()}},i(g){if(!oe){T(z),T(j.$$.fragment,g),T(ae.$$.fragment,g);for(let M=0;M<V.length;M+=1)T(N[M]);oe=!0}},o(g){I(z),I(j.$$.fragment,g),I(ae.$$.fragment,g),N=N.filter(Boolean);for(let M=0;M<N.length;M+=1)I(N[M]);oe=!1},d(g){g&&w(e),z&&z.d(),G.d(),g&&w(E),g&&w(O),B(j),B(ae),be(N,g),ee=!1,Ae(pe)}}}function js(n,e,s){F.extend(We),F.extend(Ye),F.extend(He);let t=[],l=[],a={id:""},r=!1,i=0,p,f=[],h=[],_=!1,$,c,u=[];ke(async()=>{for(;!we(ne););f=await $e(me,ce,`departmentsofbranches?fields=id%2Ccode&schoolInSchoolYear=${Be}`,!0),f.response.data.forEach(async L=>{const E=(await $e(me,ce,`groupindepartments?fields=id%2Cname%2CisMentorGroup&isMentorOrMainGroup=true&departmentOfBranch=${L.id}`,!0)).response.data;h.push(...ge(E,"name"))}),setTimeout(()=>{s(6,u=[]),ge(h,"name").forEach(L=>{u.push({value:L.id,label:L.name})}),s(4,_=!0)},1e3)});function k(L){const E=L.detail;console.log(E),s(3,p="Schedule for "+L.detail.label),S(E.value)}async function S(L){let E;s(0,l=[]),E=await qt(L,i+1),t=ge(E.response.data,"start"),s(0,l=[]);for(let O=0;O<t.length;O++){const j=t[O],x=new Date(j.start*1e3).getDay()-new Date(_e(de.prev)).getDay()+2;l.push({rowNr:x,startMin:new Date(j.start*1e3).getHours()*60+new Date(j.start*1e3).getMinutes(),endMin:new Date(j.end*1e3).getHours()*60+new Date(j.end*1e3).getMinutes(),slotName:j.startTimeSlotName,locations:j.locations,teachers:j.teachers,subjects:j.subjects,cancelled:j.cancelled,changeWarning:j.changeDescription,teacherChanged:j.teacherChanged,locationChanged:j.locationChanged,timeChanged:j.timeChanged,start:{h:new Date(j.start*1e3).getHours(),m:new Date(j.start*1e3).getMinutes()},end:{h:new Date(j.end*1e3).getHours(),m:new Date(j.end*1e3).getMinutes()},classes:j.groups,startTimeStamp:j.start,endTimeStamp:j.end})}s(1,r=!1)}function q(){i+parseInt(ve().format("W"))>1&&(s(2,i-=1),S(a.id))}function W(){i+parseInt(ve().format("W"))<52&&(s(2,i+=1),S(a.id))}function D(){i!=0&&(s(2,i=0),S(a.id))}let Z=0;setInterval(()=>{s(7,Z=60*parseInt(F().format("HH"))+parseInt(F().format("m")))},300);const J=()=>{Me("/everyone")};function X(L){Ie[L?"unshift":"push"](()=>{$=L,s(5,$)})}return[l,r,i,p,_,$,u,Z,c,k,q,W,D,S,J,X]}class Is extends te{constructor(e){super();se(this,e,js,Ts,le,{openSched:13})}get openSched(){return this.$$.ctx[13]}}function pt(n){let e,s;return e=new Is({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Ls(n){let e,s,t=n[0]&&pt();return{c(){t&&t.c(),e=ye()},m(l,a){t&&t.m(l,a),C(l,e,a),s=!0},p(l,[a]){l[0]?t?a&1&&T(t,1):(t=pt(),t.c(),T(t,1),t.m(e.parentNode,e)):t&&(Ne(),I(t,1,1,()=>{t=null}),Te())},i(l){s||(T(t),s=!0)},o(l){I(t),s=!1},d(l){t&&t.d(l),l&&w(e)}}}function qs(n,e,s){let t;return ne.subscribe(l=>s(0,t=l)),[t]}class Ws extends te{constructor(e){super();se(this,e,qs,Ls,le,{})}}function mt(n){let e,s,t,l;return e=new gs({}),t=new Gt({}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment)},m(a,r){A(e,a,r),C(a,s,r),A(t,a,r),l=!0},i(a){l||(T(e.$$.fragment,a),T(t.$$.fragment,a),l=!0)},o(a){I(e.$$.fragment,a),I(t.$$.fragment,a),l=!1},d(a){B(e,a),a&&w(s),B(t,a)}}}function Ys(n){let e;return{c(){e=d("h1"),e.textContent="Home!",m(e,"class","svelte-1efnqlf")},m(s,t){C(s,e,t)},d(s){s&&w(e)}}}function Hs(n){let e,s;return e=new fs({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function As(n){let e,s;return e=new Ws({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Bs(n){let e,s;return e=new Ms({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Us(n){let e,s;return e=new Ht({}),{c(){H(e.$$.fragment)},m(t,l){A(e,t,l),s=!0},i(t){s||(T(e.$$.fragment,t),s=!0)},o(t){I(e.$$.fragment,t),s=!1},d(t){B(e,t)}}}function Es(n){let e,s,t,l,a,r,i,p,f,h,_,$;return e=new De({props:{path:"/",$$slots:{default:[Ys]},$$scope:{ctx:n}}}),t=new De({props:{path:"/schedule/people",$$slots:{default:[Hs]},$$scope:{ctx:n}}}),a=new De({props:{path:"/schedule/classes",$$slots:{default:[As]},$$scope:{ctx:n}}}),i=new Kt({}),f=new De({props:{path:"/everyone",$$slots:{default:[Bs]},$$scope:{ctx:n}}}),_=new De({props:{path:"/login",$$slots:{default:[Us]},$$scope:{ctx:n}}}),{c(){H(e.$$.fragment),s=b(),H(t.$$.fragment),l=b(),H(a.$$.fragment),r=b(),H(i.$$.fragment),p=b(),H(f.$$.fragment),h=b(),H(_.$$.fragment)},m(c,u){A(e,c,u),C(c,s,u),A(t,c,u),C(c,l,u),A(a,c,u),C(c,r,u),A(i,c,u),C(c,p,u),A(f,c,u),C(c,h,u),A(_,c,u),$=!0},p(c,u){const k={};u&2&&(k.$$scope={dirty:u,ctx:c}),e.$set(k);const S={};u&2&&(S.$$scope={dirty:u,ctx:c}),t.$set(S);const q={};u&2&&(q.$$scope={dirty:u,ctx:c}),a.$set(q);const W={};u&2&&(W.$$scope={dirty:u,ctx:c}),f.$set(W);const D={};u&2&&(D.$$scope={dirty:u,ctx:c}),_.$set(D)},i(c){$||(T(e.$$.fragment,c),T(t.$$.fragment,c),T(a.$$.fragment,c),T(i.$$.fragment,c),T(f.$$.fragment,c),T(_.$$.fragment,c),$=!0)},o(c){I(e.$$.fragment,c),I(t.$$.fragment,c),I(a.$$.fragment,c),I(i.$$.fragment,c),I(f.$$.fragment,c),I(_.$$.fragment,c),$=!1},d(c){B(e,c),c&&w(s),B(t,c),c&&w(l),B(a,c),c&&w(r),B(i,c),c&&w(p),B(f,c),c&&w(h),B(_,c)}}}function Ps(n){let e,s,t,l,a,r=n[0]&&mt();return l=new dt({props:{$$slots:{default:[Es]},$$scope:{ctx:n}}}),{c(){e=d("div"),s=d("div"),r&&r.c(),t=b(),H(l.$$.fragment),m(s,"class","content svelte-1efnqlf"),m(e,"class","bg svelte-1efnqlf")},m(i,p){C(i,e,p),o(e,s),r&&r.m(s,null),o(s,t),A(l,s,null),a=!0},p(i,[p]){i[0]?r?p&1&&T(r,1):(r=mt(),r.c(),T(r,1),r.m(s,t)):r&&(Ne(),I(r,1,1,()=>{r=null}),Te());const f={};p&2&&(f.$$scope={dirty:p,ctx:i}),l.$set(f)},i(i){a||(T(r),T(l.$$.fragment,i),a=!0)},o(i){I(r),I(l.$$.fragment,i),a=!1},d(i){i&&w(e),r&&r.d(),B(l)}}}function Rs(n,e,s){let t=!1;return ke(async()=>{s(0,t=await qe()),t?ne.set(!0):location.pathname!="/login"&&Me("/login")}),[t]}class Os extends te{constructor(e){super();se(this,e,Rs,Ps,le,{})}}function zs(n){let e,s,t;return s=new Os({}),{c(){e=d("div"),H(s.$$.fragment)},m(l,a){C(l,e,a),A(s,e,null),t=!0},p:R,i(l){t||(T(s.$$.fragment,l),t=!0)},o(l){I(s.$$.fragment,l),t=!1},d(l){l&&w(e),B(s)}}}function Gs(n){return ne.subscribe(e=>{}),ke(async()=>{await qe()}),[]}class Zs extends te{constructor(e){super();se(this,e,Gs,zs,le,{})}}new Zs({target:document.getElementById("app")});
